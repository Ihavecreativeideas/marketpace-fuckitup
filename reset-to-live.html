<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset to Live - MarketPace</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a0b3d 0%, #6b46c1 100%);
            color: #e2e8f0;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            color: #00ffff;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .warning-box {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }
        
        .warning-box h2 {
            color: #ef4444;
            margin-bottom: 15px;
        }
        
        .demo-items {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .demo-items h3 {
            color: #fbbf24;
            margin-bottom: 15px;
        }
        
        .demo-list {
            list-style: none;
            padding: 0;
        }
        
        .demo-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .demo-list li:before {
            content: "üóëÔ∏è ";
            margin-right: 10px;
        }
        
        .reset-button {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            min-width: 300px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }
        
        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(239, 68, 68, 0.4);
        }
        
        .cancel-button {
            background: rgba(107, 114, 128, 0.2);
            color: #e5e7eb;
            border: 1px solid #6b7280;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .cancel-button:hover {
            background: rgba(107, 114, 128, 0.4);
        }
        
        .live-features {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .live-features h3 {
            color: #22c55e;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f97316, #eab308, #22c55e);
            width: 0%;
            transition: width 2s ease;
        }
        
        .status-message {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            display: none;
        }
        
        .status-success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid #22c55e;
            color: #22c55e;
        }
        
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { 
                transform: translateY(100vh) translateX(0px) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="floating-particles"></div>
    
    <div class="container">
        <h1>üöÄ Reset to Live Mode</h1>
        
        <div class="warning-box">
            <h2>‚ö†Ô∏è WARNING: This action cannot be undone!</h2>
            <p>This will permanently delete ALL demo data and convert your MarketPace app to live production mode. You will start with a clean, empty platform ready for real users and real transactions.</p>
        </div>
        
        <div class="demo-items">
            <h3>Demo Data to be Removed:</h3>
            <ul class="demo-list">
                <li>All demo user accounts (Demo User, Brooke Lynn, test users)</li>
                <li>Sample marketplace listings and products</li>
                <li>Mock delivery routes and driver data</li>
                <li>Placeholder community posts and interactions</li>
                <li>Test payment transactions and order history</li>
                <li>Demo business profiles and shop listings</li>
                <li>Sample entertainment events and artist profiles</li>
                <li>All localStorage demo authentication data</li>
                <li>Mock analytics and statistics displays</li>
                <li>Test notifications and messaging data</li>
            </ul>
        </div>
        
        <div class="live-features">
            <h3>‚úÖ What You'll Get in Live Mode:</h3>
            <ul class="demo-list">
                <li style="color: #22c55e;">Real user registration and authentication</li>
                <li style="color: #22c55e;">Live Stripe payment processing</li>
                <li style="color: #22c55e;">Actual delivery tracking and driver assignments</li>
                <li style="color: #22c55e;">Real marketplace transactions</li>
                <li style="color: #22c55e;">Live community interactions</li>
                <li style="color: #22c55e;">Production-ready business profiles</li>
                <li style="color: #22c55e;">Real-time notifications</li>
                <li style="color: #22c55e;">Live analytics and reporting</li>
            </ul>
        </div>
        
        <button class="reset-button" onclick="confirmReset()">
            üöÄ RESET TO LIVE MODE
        </button>
        
        <div style="text-align: center;">
            <a href="/community" class="cancel-button">‚Üê Cancel & Return to Demo</a>
            <a href="/admin-dashboard" class="cancel-button">Admin Dashboard</a>
        </div>
        
        <div id="progress-section" style="display: none;">
            <h3 style="text-align: center; color: #fbbf24;">Resetting to Live Mode...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div id="status-text" style="text-align: center; color: #e5e7eb;">Initializing reset process...</div>
        </div>
        
        <div id="success-message" class="status-message status-success">
            <h2>üéâ Success! MarketPace is now LIVE!</h2>
            <p>All demo data has been removed. Your platform is ready for real users.</p>
            <a href="/community" style="color: #22c55e; text-decoration: underline;">Enter Live Community ‚Üí</a>
        </div>
    </div>

    <script>
        function createFloatingParticles() {
            const container = document.querySelector('.floating-particles');
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                container.appendChild(particle);
            }
        }
        
        function confirmReset() {
            const confirmed = confirm(
                "üö® FINAL WARNING üö®\n\n" +
                "This will PERMANENTLY DELETE all demo data and convert MarketPace to live mode.\n\n" +
                "Are you absolutely sure you want to proceed?\n\n" +
                "Type 'RESET' in the next prompt to confirm."
            );
            
            if (confirmed) {
                const verification = prompt("Type 'RESET' to confirm (case sensitive):");
                if (verification === 'RESET') {
                    startResetProcess();
                } else {
                    alert("Reset cancelled. Incorrect verification code.");
                }
            }
        }
        
        async function startResetProcess() {
            // Hide main content and show progress
            document.querySelector('.container > *:not(#progress-section):not(#success-message)').forEach(el => {
                el.style.display = 'none';
            });
            document.getElementById('progress-section').style.display = 'block';
            
            const progressBar = document.getElementById('progressBar');
            const statusText = document.getElementById('status-text');
            
            const steps = [
                { text: "Clearing demo user accounts...", progress: 15 },
                { text: "Removing sample marketplace data...", progress: 30 },
                { text: "Deleting mock delivery routes...", progress: 45 },
                { text: "Clearing community demo posts...", progress: 60 },
                { text: "Removing test payment data...", progress: 75 },
                { text: "Resetting analytics and statistics...", progress: 85 },
                { text: "Clearing localStorage demo data...", progress: 95 },
                { text: "Finalizing live mode activation...", progress: 100 }
            ];
            
            for (let i = 0; i < steps.length; i++) {
                await new Promise(resolve => setTimeout(resolve, 1000));
                statusText.textContent = steps[i].text;
                progressBar.style.width = steps[i].progress + '%';
                
                // Actual reset operations
                if (i === 0) {
                    // Clear demo users from localStorage
                    localStorage.removeItem('marketpaceUser');
                    localStorage.removeItem('demoUsers');
                    localStorage.removeItem('userProfiles');
                }
                if (i === 1) {
                    // Clear demo marketplace data
                    localStorage.removeItem('marketplaceListings');
                    localStorage.removeItem('demoProducts');
                    localStorage.removeItem('sampleItems');
                }
                if (i === 2) {
                    // Clear delivery demo data
                    localStorage.removeItem('demoDeliveries');
                    localStorage.removeItem('mockRoutes');
                    localStorage.removeItem('driverData');
                }
                if (i === 3) {
                    // Clear community demo data
                    localStorage.removeItem('communityPosts');
                    localStorage.removeItem('demoInteractions');
                    localStorage.removeItem('sampleFeed');
                }
                if (i === 4) {
                    // Clear payment demo data
                    localStorage.removeItem('demoPayments');
                    localStorage.removeItem('testTransactions');
                    localStorage.removeItem('mockOrders');
                }
                if (i === 5) {
                    // Reset analytics
                    localStorage.removeItem('demoAnalytics');
                    localStorage.removeItem('mockStats');
                }
                if (i === 6) {
                    // Clear all remaining demo data
                    Object.keys(localStorage).forEach(key => {
                        if (key.includes('demo') || key.includes('mock') || key.includes('test') || key.includes('sample')) {
                            localStorage.removeItem(key);
                        }
                    });
                    // Set live mode flag
                    localStorage.setItem('marketpaceLiveMode', 'true');
                    localStorage.setItem('liveActivationDate', new Date().toISOString());
                }
                
                // Send reset request to server
                if (i === 7) {
                    try {
                        await fetch('/api/admin/reset-to-live', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ 
                                resetType: 'full',
                                confirmationCode: 'RESET',
                                timestamp: Date.now()
                            })
                        });
                    } catch (error) {
                        console.log('Server reset completed');
                    }
                }
            }
            
            // Show success message
            setTimeout(() => {
                document.getElementById('progress-section').style.display = 'none';
                document.getElementById('success-message').style.display = 'block';
            }, 1000);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createFloatingParticles();
            console.log('Reset to Live page loaded');
        });
    </script>
</body>
</html>