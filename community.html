<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketPace Community</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a0b3d 0%, #2d1b69 30%, #4c2885 60%, #6b46c1 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding-top: 120px;
            padding-bottom: 80px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Account Switcher Styles */
        .account-switcher-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%);
            color: #1a1a2e;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .account-switcher-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .account-switcher-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .account-switcher-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            color: white;
            position: relative;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .switcher-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .switcher-header h3 {
            color: #ffd700;
            margin: 0;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            opacity: 0.7;
        }
        
        .close-btn:hover {
            opacity: 1;
        }
        
        .account-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            border: 2px solid transparent;
        }
        
        .account-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #ffd700;
        }
        
        .account-option.active {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
        }
        
        .account-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .account-option h4 {
            margin: 0;
            font-size: 16px;
            color: white;
        }
        
        .account-option p {
            margin: 2px 0 0 0;
            font-size: 14px;
            opacity: 0.7;
        }
        
        .pro-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%);
            color: #1a1a2e;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .create-business-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #00ffff 0%, #0099cc 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .create-business-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }
        
        /* Business Mode Styles */
        .business-mode .status-composer {
            border: 2px solid #ffd700;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 237, 74, 0.1) 100%);
            position: relative;
        }
        
        .business-mode .status-composer::before {
            content: 'üè¢ POSTING AS BUSINESS - MARKETPACE PRO';
            position: absolute;
            top: -15px;
            left: 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%);
            color: #1a1a2e;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(147, 197, 253, 0.8);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
                opacity: 0.4; 
            }
            25% { 
                transform: translateY(-30px) translateX(10px) rotate(90deg); 
                opacity: 0.8; 
            }
            50% { 
                transform: translateY(-15px) translateX(-10px) rotate(180deg); 
                opacity: 1; 
            }
            75% { 
                transform: translateY(-25px) translateX(5px) rotate(270deg); 
                opacity: 0.6; 
            }
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
        }

        @keyframes logoFloat {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
                opacity: 0.6; 
            }
            25% { 
                transform: translateY(-15px) translateX(8px) rotate(90deg); 
                opacity: 1; 
            }
            50% { 
                transform: translateY(-8px) translateX(-8px) rotate(180deg); 
                opacity: 0.8; 
            }
            75% { 
                transform: translateY(-12px) translateX(5px) rotate(270deg); 
                opacity: 0.9; 
            }
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 15px 8px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            min-height: 100px;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 500px;
            margin: 0 auto;
            gap: 15px;
            padding: 0 10px;
            min-height: 90px;
        }

        .logo {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .header-right {
            display: flex;
            flex-direction: column;
            flex: 1;
            gap: 8px;
        }

        .top-section {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .search-section {
            width: 100%;
            margin-top: 10px;
        }

        .profile-main-button {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ffff;
            border-radius: 6px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .profile-main-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.2) 0%, transparent 70%);
            animation: rotate 3s linear infinite;
            pointer-events: none;
        }

        .profile-main-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }

        .profile-main-picture {
            width: 100%;
            height: 100%;
            border-radius: 6px;
            object-fit: cover;
            z-index: 1;
            position: relative;
        }

        .profile-main-initials {
            color: #00ffff;
            font-weight: bold;
            font-size: 18px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            z-index: 1;
            position: relative;
        }

        .search-categories {
            display: flex;
            justify-content: space-between;
            gap: 4px;
            margin-top: 4px;
        }

        .search-cat-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 2px 6px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 9px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            text-align: center;
        }

        .search-cat-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #00ffff;
        }

        .profile-categories {
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-top: 4px;
            width: 60px;
        }

        .profile-cat-row {
            display: flex;
            gap: 2px;
        }

        .profile-cat-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            padding: 1px 2px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            text-align: center;
            min-height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-cat-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #00ffff;
        }

        /* BL Style Button (Smaller header size) */
        .bl-style-button {
            width: 120px;
            height: 120px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .bl-style-button:hover {
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .bl-profile-picture {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            object-fit: cover;
        }

        .bl-profile-initials {
            color: #00ffff;
            font-weight: bold;
            font-size: 32px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }


        
        .logo-container {
            position: relative;
            display: inline-block;
        }
        
        .logo-image {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
            filter: drop-shadow(0 0 15px rgba(138, 43, 226, 0.5));
            transition: transform 0.3s ease;
            position: relative;
            z-index: 5;
        }
        
        .logo-particles {
            position: absolute;
            top: -15px;
            left: -15px;
            width: calc(100% + 30px);
            height: calc(100% + 30px);
            pointer-events: none;
            z-index: 3;
        }
        
        .logo-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(0, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 12px rgba(0, 255, 255, 0.9);
            animation: logoFloat 4s infinite linear;
        }
        
        .logo-particle:nth-child(odd) {
            background: rgba(138, 43, 226, 0.8);
            box-shadow: 0 0 6px rgba(138, 43, 226, 0.9);
            animation-duration: 6s;
        }
        
        .logo-particle:nth-child(3n) {
            background: rgba(0, 191, 255, 0.7);
            box-shadow: 0 0 4px rgba(0, 191, 255, 0.8);
            animation-duration: 3s;
        }
        
        @keyframes logoFloat {
            0% { 
                transform: rotate(0deg) translateX(75px) rotate(0deg);
                opacity: 0.8; 
            }
            25% { 
                transform: rotate(90deg) translateX(75px) rotate(-90deg);
                opacity: 1; 
            }
            50% { 
                transform: rotate(180deg) translateX(75px) rotate(-180deg);
                opacity: 0.9; 
            }
            75% { 
                transform: rotate(270deg) translateX(75px) rotate(-270deg);
                opacity: 1; 
            }
            100% { 
                transform: rotate(360deg) translateX(75px) rotate(-360deg);
                opacity: 0.8; 
            }
        }

        .search-container {
            position: relative;
            width: 100%;
            z-index: 100;
        }

        .search-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2px 8px;
            backdrop-filter: blur(5px);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02);
            height: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.4;
            transform: scale(0.9);
        }
        
        .search-wrapper:hover {
            opacity: 0.8;
            transform: scale(1);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .search-wrapper.hidden {
            opacity: 0;
            transform: scale(0.8) translateY(-10px);
            pointer-events: none;
        }

        .search-input {
            flex: 1;
            background: none;
            border: none;
            color: white;
            font-size: 9px;
            outline: none;
            padding: 0;
            height: 12px;
            cursor: pointer;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .filter-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            margin-left: 8px;
            font-size: 16px;
        }

        .radius-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            margin-left: 8px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .radius-btn:hover {
            color: #00ffff;
        }
        
        .reset-live-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 8px;
            animation: pulse-red 2s infinite;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }
        
        .reset-live-btn:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: scale(1.05);
        }
        
        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 0 30px rgba(239, 68, 68, 0.6); }
        }
            position: relative;
        }

        .filter-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 150px;
            z-index: 1000;
            display: none;
        }

        .filter-dropdown.show {
            display: block;
        }

        .filter-option {
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .filter-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .menu-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 180px;
            z-index: 1000;
            display: none;
        }

        .menu-dropdown.show {
            display: block;
        }

        .menu-option {
            padding: 12px 16px;
            color: white;
            cursor: pointer;
            transition: background 0.2s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .menu-option:last-child {
            border-bottom: none;
        }

        .menu-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .cart-badge {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            min-width: 16px;
            text-align: center;
            display: inline-block;
        }

        /* Main Content */
        .main-content {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px 16px;
        }

        /* Status Composer */
        .status-composer {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .composer-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .profile-pic {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #00ffff, #9d4edd);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .header .profile-pic {
            width: 32px;
            height: 32px;
            font-size: 12px;
        }

        .status-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 12px 16px;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }

        .status-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .composer-actions {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 12px;
        }

        .action-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }



        /* Feed Posts */
        .feed-post {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .post-header {
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .author-info h4 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .author-info p {
            margin: 0;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }

        .post-content {
            padding: 0 16px 16px;
        }

        .post-text {
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .post-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        /* Commerce Features */
        .commerce-info {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .price-tag {
            font-size: 20px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 8px;
        }

        .commerce-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .commerce-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .commerce-btn.primary {
            background: linear-gradient(135deg, #00ffff, #9d4edd);
            border: none;
        }

        .commerce-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Post Interactions */
        .post-interactions {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 16px;
        }

        .interaction-buttons {
            display: flex;
            justify-content: space-around;
        }

        .interaction-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .interaction-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Profile Button */
        .profile-button {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 90px;
            height: 90px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(0, 255, 255, 0.4);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(15px);
            transition: all 0.2s ease;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .profile-button:hover {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .profile-avatar {
            width: 82px;
            height: 82px;
            border-radius: 12px;
            object-fit: cover;
        }

        .profile-initials {
            color: #00ffff;
            font-weight: bold;
            font-size: 28px;
        }

        /* Search Popup Gadget */
        .search-popup {
            position: absolute;
            top: 50px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1a0b3d, #2d1b69);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: none;
            animation: slideDown 0.3s ease;
        }

        .search-popup.show {
            display: block;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInDown {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .search-popup h3 {
            color: #00ffff;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .search-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
        }

        .search-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            color: white;
            font-size: 10px;
        }

        .search-option:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
        }

        /* Profile Modal */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .profile-modal-content {
            background: linear-gradient(135deg, #1a0b3d, #2d1b69);
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
            border: 2px solid rgba(0, 255, 255, 0.3);
            padding: 30px;
            text-align: center;
        }

        .profile-pic-preview {
            width: 100px;
            height: 100px;
            border-radius: 12px;
            margin: 0 auto 20px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            overflow: hidden;
        }

        .profile-pic-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-pic-placeholder {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00ffff;
            font-size: 24px;
            font-weight: bold;
        }

        .upload-btn {
            background: linear-gradient(135deg, #00ffff, #6b46c1);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
        }

        /* Advanced Post Modal */
        .post-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .post-modal-content {
            background: linear-gradient(135deg, #1a0b3d, #2d1b69);
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid rgba(0, 255, 255, 0.3);
        }

        .post-modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .post-modal-title {
            font-size: 20px;
            font-weight: bold;
            color: #00ffff;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .post-modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #93c5fd;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }

        .form-textarea {
            height: 100px;
            resize: vertical;
        }

        .category-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }

        .category-btn.selected {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
            color: #00ffff;
        }

        .action-buttons-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
        }

        .action-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .image-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .image-upload-area:hover {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }

        .post-submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #00ffff, #6b46c1);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .post-submit-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        .poll-options {
            display: none;
        }

        .poll-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .poll-option input {
            flex: 1;
        }

        .remove-option {
            background: #ef4444;
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 6px;
            cursor: pointer;
        }

        .add-option-btn {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #00ffff;
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 0;
            z-index: 1000;
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .bottom-nav.hidden {
            transform: translateY(100%);
        }

        .nav-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .nav-item.active {
            color: #00ffff;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 2px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(0, 255, 255, 0.4);
            border-radius: 6px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            padding: 4px;
        }

        .nav-icon svg {
            width: 100%;
            height: 100%;
            fill: #93c5fd;
            transition: all 0.3s ease;
        }

        .nav-item.active .nav-icon svg {
            fill: #00ffff;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-container bl-style-button" onclick="toggleLogoDropdown()" style="cursor: pointer;">
                    <img src="marketpace-logo-optimized.jpeg" alt="MarketPace" class="logo-image" style="max-height: 120px; width: auto;">
                    <div class="logo-particles" id="logoParticles"></div>
                </div>
            </div>
            <div class="header-right">
                <div class="top-section">
                    <div class="bl-style-button" onclick="goToProfile()" style="position: relative;">
                        <img id="profileMainPicture" class="bl-profile-picture" style="display: none;" alt="Profile">
                        <div id="profileMainInitials" class="bl-profile-initials">MP</div>
                        <div class="menu-dropdown" id="mainMenuDropdown">
                            <div class="menu-option" onclick="goToResetLive()" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; font-weight: bold; text-align: center; animation: pulse-red 2s infinite;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/>
                                    <path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.3)"/>
                                </svg>
                                RESET TO LIVE MODE
                            </div>
                            <div class="menu-option" onclick="inviteFriends()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; font-weight: bold; text-align: center;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/>
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 7a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Invite Friends
                            </div>
                            <div class="menu-option" onclick="openFacebookShare()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; font-weight: bold; text-align: center;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/>
                                    <rect x="5" y="3" width="14" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.1)"/>
                                    <path d="M9 9h6M9 13h6M9 17h4" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Facebook Share
                            </div>
                            <div class="menu-option" onclick="goToMyProfile()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="4" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                    <circle cx="12" cy="9" r="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.3)"/>
                                    <path d="M7 19c0-3 2.5-5 5-5s5 2 5 5" stroke="currentColor" stroke-width="1.5" fill="none"/>
                                </svg>
                                My Profile
                            </div>
                            <div class="menu-option" onclick="goToCart()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                    <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Cart <span id="cartBadge" class="cart-badge">0</span>
                            </div>
                            <div class="menu-option" onclick="goToSettings()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Settings
                            </div>
                            <div class="menu-option" onclick="goToDeliveries()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(59, 130, 246, 0.2)"/>
                                    <path d="M16 3h5v4h-5z" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/>
                                    <path d="M2 21h20v-7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z" stroke="currentColor" stroke-width="1.5"/>
                                    <circle cx="7" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/>
                                    <circle cx="17" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Deliveries
                            </div>
                            <div class="menu-option" onclick="goToSponsor()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(236, 72, 153, 0.2)"/>
                                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/>
                                </svg>
                                Sponsor/Support
                            </div>
                            <div class="menu-option" onclick="goToSecurity()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                    <rect x="9" y="9" width="6" height="6" rx="2" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.3)"/>
                                    <path d="m21 2-3 3M12 7v3M7 12h3" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Security
                            </div>
                            <div class="menu-option" onclick="showDriverLogin()" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; font-weight: bold; text-align: center;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/>
                                    <path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M5 17h-2v-6l2-5h9l4 5h1a2 2 0 0 1 2 2v4h-2" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Driver Login
                            </div>
                            <div class="menu-option" onclick="logout()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(239, 68, 68, 0.2)"/>
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Logout
                            </div>
                        </div>
                    </div>
                    
                    <!-- Futuristic Interactive Map Button -->
                    <div class="futuristic-map-button" onclick="showInteractiveMap('all')" style="
                        width: 120px; 
                        height: 120px; 
                        background: rgba(0, 0, 0, 0.6); 
                        backdrop-filter: blur(15px); 
                        border: 2px solid rgba(0, 255, 255, 0.5); 
                        border-radius: 12px; 
                        display: flex; 
                        align-items: center; 
                        justify-content: center; 
                        cursor: pointer; 
                        position: relative; 
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
                    " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 0 30px rgba(0, 255, 255, 0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 0 20px rgba(0, 255, 255, 0.3)'">
                        <!-- Advanced Map Icon SVG -->
                        <svg width="90" height="90" viewBox="0 0 120 120" fill="none">
                            <!-- Futuristic grid background -->
                            <defs>
                                <pattern id="mapGrid" width="12" height="12" patternUnits="userSpaceOnUse">
                                    <path d="M 12 0 L 0 0 0 12" fill="none" stroke="#00ffff" stroke-width="0.5" opacity="0.3"/>
                                </pattern>
                                <radialGradient id="radarGlow" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" style="stop-color:#00ffff;stop-opacity:0.8"/>
                                    <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:0.2"/>
                                </radialGradient>
                            </defs>
                            <rect width="120" height="120" fill="url(#mapGrid)" rx="12"/>
                            <!-- Radar sweep circle -->
                            <circle cx="60" cy="60" r="50" fill="url(#radarGlow)" opacity="0.3"/>
                            <!-- Location pins with glow effects -->
                            <circle cx="35" cy="30" r="8" fill="#00ff88" opacity="0.9"/>
                            <circle cx="35" cy="30" r="4" fill="#ffffff"/>
                            <circle cx="85" cy="45" r="8" fill="#8b5cf6" opacity="0.9"/>
                            <circle cx="85" cy="45" r="4" fill="#ffffff"/>
                            <circle cx="60" cy="85" r="8" fill="#f59e0b" opacity="0.9"/>
                            <circle cx="60" cy="85" r="4" fill="#ffffff"/>
                            <circle cx="20" cy="75" r="6" fill="#ef4444" opacity="0.9"/>
                            <circle cx="20" cy="75" r="3" fill="#ffffff"/>
                            <circle cx="95" cy="85" r="6" fill="#06b6d4" opacity="0.9"/>
                            <circle cx="95" cy="85" r="3" fill="#ffffff"/>
                            <!-- Connection network lines -->
                            <path d="M35 30 L60 85 L85 45 L35 30" stroke="#00ffff" stroke-width="2" opacity="0.6" stroke-dasharray="3,3"/>
                            <path d="M20 75 L95 85" stroke="#00ffff" stroke-width="1" opacity="0.4" stroke-dasharray="2,2"/>
                            <!-- Radar sweep rings -->
                            <circle cx="60" cy="60" r="35" fill="none" stroke="#00ffff" stroke-width="1" opacity="0.4"/>
                            <circle cx="60" cy="60" r="25" fill="none" stroke="#00ffff" stroke-width="1" opacity="0.6"/>
                            <circle cx="60" cy="60" r="15" fill="none" stroke="#00ffff" stroke-width="1" opacity="0.8"/>
                            <!-- Distance markers -->
                            <text x="60" y="35" text-anchor="middle" fill="#00ffff" font-size="6" opacity="0.8">10mi</text>
                            <text x="60" y="45" text-anchor="middle" fill="#00ffff" font-size="6" opacity="0.6">25mi</text>
                            <text x="60" y="55" text-anchor="middle" fill="#00ffff" font-size="6" opacity="0.4">50mi</text>
                        </svg>
                        <!-- Floating particles inside button -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                            <div style="position: absolute; top: 20%; left: 30%; width: 3px; height: 3px; background: #00ffff; border-radius: 50%; animation: logoFloat 3s infinite ease-in-out;"></div>
                            <div style="position: absolute; top: 70%; left: 80%; width: 3px; height: 3px; background: #8b5cf6; border-radius: 50%; animation: logoFloat 4s infinite ease-in-out 1s;"></div>
                            <div style="position: absolute; top: 50%; left: 15%; width: 2px; height: 2px; background: #00ff88; border-radius: 50%; animation: logoFloat 5s infinite ease-in-out 2s;"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Main Content -->
    <!-- Floating Particles -->
    <div class="particles"></div>
    
    <!-- Account Switcher Button -->
    <button class="account-switcher-btn" onclick="toggleAccountSwitcher()" id="accountSwitcherBtn">
        üë§
    </button>
    
    <!-- Account Switcher Modal -->
    <div id="accountSwitcherModal" class="account-switcher-modal" style="display: none;">
        <div class="account-switcher-content">
            <div class="switcher-header">
                <h3>Switch Account</h3>
                <button onclick="closeAccountSwitcher()" class="close-btn">&times;</button>
            </div>
            
            <div class="account-option active" onclick="switchToPersonal()" id="personalAccount">
                <img src="marketpace-logo-1.jpeg" alt="Personal Avatar" class="account-avatar">
                <div>
                    <h4>Personal Account</h4>
                    <p>Individual profile</p>
                </div>
            </div>
            
            <div class="account-option" onclick="switchToBusiness()" id="businessAccount" style="display: none;">
                <img src="marketpace-logo-1.jpeg" alt="Business Avatar" class="account-avatar">
                <div>
                    <h4 id="businessAccountName">Business Account</h4>
                    <p>Professional profile <span class="pro-badge">PRO</span></p>
                </div>
            </div>
            
            <button class="create-business-btn" onclick="createBusinessAccount()" id="createBusinessBtn">
                üè¢ Create Business Account
            </button>
        </div>
    </div>

    <div class="main-content" style="position: relative; z-index: 2;">


        <!-- Status Composer - More Discrete -->
        <div class="status-composer" style="opacity: 0.8; padding: 10px 15px; margin-bottom: 10px;">
            <div class="composer-header">
                <div class="profile-pic" style="width: 35px; height: 35px; border-radius: 6px;">
                    <span id="userInitials2" style="font-size: 14px;">DU</span>
                </div>
                <input type="text" id="statusInput" name="status" class="status-input" placeholder="Share with your community!" onclick="openAdvancedPostModal()" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); font-size: 14px; padding: 8px 12px;">
            </div>
            <div class="composer-actions">
                <button class="action-btn" onclick="showSellerPostingModal('sale')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M21 12a9 9 0 1 1-6.219-8.56" stroke="currentColor" stroke-width="1.5"/><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="1.5"/></svg> Sell
                </button>
                <button class="action-btn" onclick="showSellerPostingModal('rental')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg> Rent
                </button>
                <button class="action-btn" onclick="showSellerPostingModal('service')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="1.5"/></svg> Service
                </button>
                <button class="action-btn" onclick="openAdvancedPostModal('event')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(236, 72, 153, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.3)"/></svg> Event
                </button>
            </div>
        </div>



        <!-- Feed Posts -->
        <div class="feed">
            <!-- Post 1 - Sale Item -->
            <div class="feed-post post-sale" data-category="fashion" data-type="sale">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #8b5cf6, #ec4899); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">SB</span>
                        </div>
                        <div class="author-info">
                            <h4>Sarah's Boutique</h4>
                            <p>2 hours ago ‚Ä¢ Orange Beach, AL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">Beautiful vintage leather jacket, perfect condition! Size Medium.</div>
                    <img src="https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400" alt="Leather jacket" class="post-image">
                    
                    <div class="commerce-info">
                        <div class="price-tag">$85.00</div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="addToCart('Vintage Leather Jacket', 85.00, 'Sarah\'s Boutique', 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400')">Add to Cart</button>
                            <button class="commerce-btn" onclick="deliverNow('Vintage Leather Jacket', 85.00, 'Sarah\'s Boutique', 'https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400')">Deliver Now</button>

                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>

            <!-- Post 2 - Rental Item -->
            <div class="feed-post post-rental" data-category="tools" data-type="rental">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #10b981, #06b6d4); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">TM</span>
                        </div>
                        <div class="author-info">
                            <h4>Tom's Tool Rentals</h4>
                            <p>2 hours ago ‚Ä¢ Orange Beach, AL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">Power washer for rent - perfect for driveways and decks! Flat daily rate recommended.</div>
                    <div class="post-image">
                        <img src="https://images.unsplash.com/photo-1581092580497-e0d23cbdf1dc?w=400" alt="Power Washer" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                    </div>
                    
                    <div class="commerce-info">
                        <div class="price-tag">$45.00/day (Recommended flat rate)</div>
                        <div class="rental-schedule">
                            <small style="color: #00ffff;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/><path d="M9 9h6v6h-6z" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.3)"/><path d="m9 1 0 4M15 1l0 4M1 9l22 0" stroke="currentColor" stroke-width="1.5"/></svg>Pickup: 9am-12pm ‚Ä¢ Dropoff: 6pm-9pm</small><br>
                            <small style="color: #ffd700;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" stroke="currentColor" stroke-width="1.5"/><path d="M12 15.75h.007v.008H12v-.008z" stroke="currentColor" stroke-width="2"/></svg>Custom timing: +$4 route break fee</small>
                        </div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="window.location.href='/rentals'" style="position: relative;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="position: absolute; top: -8px; right: -8px; background: #ffd700; border-radius: 50%; padding: 2px;">
                                    <path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="#1a0b3d" stroke-width="1.5" fill="#ffd700"/>
                                </svg>
                                Rent Now
                            </button>
                            <button class="commerce-btn" onclick="messageOwner('Power Washer', 'Tom\'s Tool Rentals', 45.00, 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                    <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Message
                            </button>
                            <button class="commerce-btn" onclick="selfPickup('power washer')">Self Pickup</button>
                            <button class="commerce-btn" onclick="openVerificationPage('Power Washer', 'Tom\'s Tool Rentals', 'rental', 45.00)" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/>
                                    <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Verify Condition
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>

            <!-- Post 3 - Service Post -->
            <div class="feed-post post-service" data-category="home-garden" data-type="service">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #f59e0b, #d97706); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">MH</span>
                        </div>
                        <div class="author-info">
                            <h4>Mike's Handyman Service</h4>
                            <p>4 hours ago ‚Ä¢ Gulf Shores, AL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">Professional home repairs - plumbing, electrical, painting. Licensed and insured!</div>
                    
                    <div class="commerce-info">
                        <div class="price-tag">Starting at $50.00</div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="window.location.href='/services'" style="position: relative;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="position: absolute; top: -8px; right: -8px; background: #ffd700; border-radius: 50%; padding: 2px;">
                                    <path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="#1a0b3d" stroke-width="1.5" fill="#ffd700"/>
                                </svg>
                                Book Now
                            </button>
                            <button class="commerce-btn" onclick="callService('handyman')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(16, 185, 129, 0.2)"/><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="1.5"/></svg> Call Now</button>
                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>

            <!-- Post 3 - Rental Item -->
            <div class="feed-post post-rental">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #ef4444, #dc2626); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">JM</span>
                        </div>
                        <div class="author-info">
                            <h4>Jessica Martinez</h4>
                            <p>6 hours ago ‚Ä¢ Orange Beach, AL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">Beach umbrella and chairs set available for weekend rental. Perfect for beach days!</div>
                    <div class="post-image">
                        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400" alt="Beach setup" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                    </div>
                    
                    <div class="commerce-info">
                        <div class="price-tag">$25.00/day (Flat daily rate)</div>
                        <div class="rental-schedule">
                            <small style="color: #00ffff;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/><path d="M9 9h6v6h-6z" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.3)"/><path d="m9 1 0 4M15 1l0 4M1 9l22 0" stroke="currentColor" stroke-width="1.5"/></svg>Pickup: 9am-12pm ‚Ä¢ Dropoff: 6pm-9pm</small><br>
                            <small style="color: #ffd700;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" stroke="currentColor" stroke-width="1.5"/><path d="M12 15.75h.007v.008H12v-.008z" stroke="currentColor" stroke-width="2"/></svg>Custom timing: +$4 route break fee</small>
                        </div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="window.location.href='/rentals'" style="position: relative;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="position: absolute; top: -8px; right: -8px; background: #ffd700; border-radius: 50%; padding: 2px;">
                                    <path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="#1a0b3d" stroke-width="1.5" fill="#ffd700"/>
                                </svg>
                                Rent Now
                            </button>
                            <button class="commerce-btn" onclick="messageOwner('beach chairs rental')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                    <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Message
                            </button>
                            <button class="commerce-btn" onclick="selfPickup('beach chairs')">Self Pickup</button>
                            <button class="commerce-btn" onclick="openVerificationPage('Beach Chairs Set', 'Jessica Martinez', 'rental', 25.00)" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"/><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="1.5"/></svg>Verify Condition</button>
                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>

            <!-- Additional Test Posts for Category Filtering -->
            
            <!-- Electronics Post -->
            <div class="feed-post post-sale" data-category="electronics" data-type="sale">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">TE</span>
                        </div>
                        <div class="author-info">
                            <h4>TechElectronics Store</h4>
                            <p>1 hour ago ‚Ä¢ Mobile, AL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">iPhone 13 Pro Max - Excellent condition, includes charger and case!</div>
                    <img src="https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400" alt="iPhone" class="post-image">
                    
                    <div class="commerce-info">
                        <div class="price-tag">$699.00</div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="addToCart('iPhone 13 Pro Max', 699.00, 'TechElectronics Store', 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400')">Add to Cart</button>
                            <button class="commerce-btn" onclick="deliverNow('iPhone 13 Pro Max', 699.00, 'TechElectronics Store', 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400')">Deliver Now</button>
                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>

            <!-- Vehicles Post -->
            <div class="feed-post post-sale" data-category="vehicles" data-type="sale">
                <div class="post-header">
                    <div class="post-author">
                        <div class="profile-pic" style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #dc2626, #991b1b); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <span style="color: white; font-weight: bold; font-size: 18px;">AC</span>
                        </div>
                        <div class="author-info">
                            <h4>AutoCars Dealership</h4>
                            <p>3 hours ago ‚Ä¢ Pensacola, FL</p>
                        </div>
                    </div>
                </div>
                
                <div class="post-content">
                    <div class="post-text">2019 Honda Civic - Low miles, excellent condition, one owner!</div>
                    <img src="https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?w=400" alt="Honda Civic" class="post-image">
                    
                    <div class="commerce-info">
                        <div class="price-tag">$18,500.00</div>
                        <div class="commerce-actions">
                            <button class="commerce-btn primary" onclick="addToCart('2019 Honda Civic', 18500.00, 'AutoCars Dealership', 'https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?w=400')">Add to Cart</button>
                            <button class="commerce-btn" onclick="deliverNow('Honda Civic')">Arrange Viewing</button>
                        </div>
                    </div>
                </div>
                
                <div class="post-interactions">
                    <div class="interaction-buttons">
                        <button class="interaction-btn" onclick="likePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like
                        </button>
                        <button class="interaction-btn" onclick="commentPost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg>Comment
                        </button>
                        <button class="interaction-btn" onclick="favoritePost(this)">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite
                        </button>
                        <button class="interaction-btn" onclick="sharePost()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share
                        </button>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="profile-modal" style="display: none;">
        <div class="profile-modal-content">
            <div class="post-modal-header">
                <h3 class="post-modal-title">Edit Profile</h3>
                <button class="close-modal" onclick="closeProfileModal()">&times;</button>
            </div>
            <div class="profile-pic-preview" id="profilePicPreview">
                <div class="profile-pic-placeholder" id="profilePlaceholder">MP</div>
            </div>
            <h4 style="color: #00ffff; margin-bottom: 20px;">Change Profile Picture</h4>
            <input type="file" id="profilePicInput" accept="image/*" style="display: none;" onchange="previewProfilePic()">
            <button class="upload-btn" onclick="document.getElementById('profilePicInput').click()">Choose Photo</button>
            <button class="upload-btn" onclick="useFacebookProfilePic()">Use Facebook Photo</button>
            <button class="upload-btn" onclick="saveProfilePic()">Save Changes</button>
            <br>
            <h4 style="color: #00ffff; margin: 20px 0;">Invite Friends</h4>
            <button class="upload-btn" onclick="inviteFacebookFriends()">Invite Facebook Friends</button>
            <button class="upload-btn" onclick="inviteContacts()">Invite Contacts</button>
            <button class="upload-btn" style="background: #ef4444;" onclick="closeProfileModal()">Close</button>
        </div>
    </div>

    <!-- Advanced Post Modal -->
    <div id="postModal" class="post-modal" style="display: none;">
        <div class="post-modal-content">
            <div class="post-modal-header">
                <h3 class="post-modal-title" id="modalTitle">Create Post</h3>
                <button class="close-modal" onclick="closePostModal()">&times;</button>
            </div>
            <div class="post-modal-body">
                <form id="advancedPostForm">
                    <!-- Category Selection -->
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <div class="category-buttons" id="categoryButtons">
                            <div class="category-btn" data-category="general">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                    <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                General
                            </div>
                            <div class="category-btn" data-category="sale">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/>
                                    <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" stroke="currentColor" stroke-width="1.5"/>
                                    <circle cx="7" cy="7" r="1" fill="currentColor"/>
                                </svg>
                                For Sale
                            </div>
                            <div class="category-btn" data-category="rent">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(16, 185, 129, 0.2)"/>
                                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/>
                                    <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                For Rent
                            </div>
                            <div class="category-btn" data-category="service">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/>
                                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Service
                            </div>
                            <div class="category-btn" data-category="event">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/>
                                    <path d="M9 9h6v6h-6z" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.3)"/>
                                    <path d="m9 1 0 4M15 1l0 4M1 9l22 0" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Event
                            </div>
                            <div class="category-btn" data-category="job">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/>
                                    <rect x="2" y="7" width="20" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Job/Hiring
                            </div>
                            <div class="category-btn" data-category="iso">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                    <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                ISO
                            </div>
                            <div class="category-btn" data-category="poll">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(16, 185, 129, 0.2)"/>
                                    <rect x="3" y="8" width="3" height="8" fill="currentColor"/>
                                    <rect x="8" y="5" width="3" height="11" fill="currentColor"/>
                                    <rect x="13" y="10" width="3" height="6" fill="currentColor"/>
                                    <rect x="18" y="3" width="3" height="13" fill="currentColor"/>
                                </svg>
                                Poll
                            </div>
                            <div class="category-btn" data-category="announcement">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(168, 85, 247, 0.2)"/>
                                    <path d="M3 11l18-5v12L3 14v-3z" stroke="currentColor" stroke-width="1.5" fill="rgba(168, 85, 247, 0.1)"/>
                                    <path d="M11.85 17.56a1.28 1.28 0 0 1-1.43-.25 1.37 1.37 0 0 1-.41-1A1.35 1.35 0 0 1 10.59 15h2.73A1.35 1.35 0 0 1 14.9 16.31a1.37 1.37 0 0 1-.41 1 1.28 1.28 0 0 1-1.43.25" stroke="currentColor" stroke-width="1"/>
                                </svg>
                                Announcement
                            </div>
                        </div>
                    </div>

                    <!-- Title -->
                    <div class="form-group">
                        <label class="form-label" for="postTitle">Title</label>
                        <input type="text" id="postTitle" class="form-input" placeholder="What are you sharing?">
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label class="form-label" for="postDescription">Description</label>
                        <textarea id="postDescription" class="form-textarea" placeholder="Tell the community more details..."></textarea>
                    </div>

                    <!-- Price (for sale/rent/service) -->
                    <div class="form-group" id="priceGroup" style="display: none;">
                        <label class="form-label" for="postPrice">Price</label>
                        <input type="text" id="postPrice" class="form-input" placeholder="$0 or price range">
                    </div>

                    <!-- Job-specific fields -->
                    <div class="form-group" id="jobCompanyGroup" style="display: none;">
                        <label class="form-label" for="jobCompany">Company/Business Name</label>
                        <input type="text" id="jobCompany" class="form-input" placeholder="Enter company name">
                    </div>

                    <div class="form-group" id="jobTypeGroup" style="display: none;">
                        <label class="form-label" for="jobType">Job Type</label>
                        <select id="jobType" class="form-input">
                            <option value="">Select job type</option>
                            <option value="full-time">Full Time</option>
                            <option value="part-time">Part Time</option>
                            <option value="contract">Contract</option>
                            <option value="temporary">Temporary</option>
                            <option value="internship">Internship</option>
                            <option value="gig">Gig Work</option>
                        </select>
                    </div>

                    <div class="form-group" id="jobSalaryGroup" style="display: none;">
                        <label class="form-label" for="jobSalary">Salary/Pay</label>
                        <input type="text" id="jobSalary" class="form-input" placeholder="e.g., $15/hour, $50k/year, $500/project">
                    </div>

                    <div class="form-group" id="jobRequirementsGroup" style="display: none;">
                        <label class="form-label" for="jobRequirements">Requirements</label>
                        <textarea id="jobRequirements" class="form-textarea" placeholder="List key requirements (experience, skills, certifications, etc.)"></textarea>
                    </div>

                    <div class="form-group" id="jobBenefitsGroup" style="display: none;">
                        <label class="form-label" for="jobBenefits">Benefits (Optional)</label>
                        <textarea id="jobBenefits" class="form-textarea" placeholder="Health insurance, paid time off, flexible hours, etc."></textarea>
                    </div>

                    <!-- Poll Options -->
                    <div class="form-group poll-options" id="pollOptions">
                        <label class="form-label">Poll Options</label>
                        <div id="pollOptionsList">
                            <div class="poll-option">
                                <input type="text" class="form-input" placeholder="Option 1">
                                <button type="button" class="remove-option" onclick="removePollOption(this)">√ó</button>
                            </div>
                            <div class="poll-option">
                                <input type="text" class="form-input" placeholder="Option 2">
                                <button type="button" class="remove-option" onclick="removePollOption(this)">√ó</button>
                            </div>
                        </div>
                        <button type="button" class="add-option-btn" onclick="addPollOption()">+ Add Option</button>
                    </div>

                    <!-- Link -->
                    <div class="form-group">
                        <label class="form-label" for="postLink">Link (optional)</label>
                        <input type="url" id="postLink" class="form-input" placeholder="https://...">
                    </div>

                    <!-- Image Upload -->
                    <div class="form-group">
                        <label class="form-label">Images</label>
                        <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                            <p>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                    <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Click to add photos
                            </p>
                            <input type="file" id="imageInput" multiple accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-group">
                        <label class="form-label">Action Buttons</label>
                        <div class="action-buttons-grid">
                            <label class="action-checkbox">
                                <input type="checkbox" id="deliverNow" value="deliver">
                                <span>
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/>
                                        <path d="M16 3h5v4h-5z" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/>
                                        <path d="M2 21h20v-7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z" stroke="currentColor" stroke-width="1.5"/>
                                        <circle cx="7" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/>
                                        <circle cx="17" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Deliver Now
                                </span>
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" id="bookNow" value="book">
                                <span>
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/>
                                        <path d="M9 9h6v6h-6z" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.3)"/>
                                        <path d="m9 1 0 4M15 1l0 4M1 9l22 0" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Book Now
                                </span>
                            </label>

                            <label class="action-checkbox">
                                <input type="checkbox" id="contactSeller" value="contact">
                                <span>
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                                        <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                        <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Contact Seller
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="post-submit-btn">Share with Community</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <!-- Sleek Sponsor Section -->
    <div class="sponsor-community-footer" style="
        margin: 30px 20px 20px 20px;
        padding: 25px;
        text-align: center;
        position: relative;
        z-index: 5;
        border-radius: 20px;
        background: linear-gradient(135deg, 
            rgba(15, 23, 77, 0.9) 0%, 
            rgba(45, 32, 95, 0.8) 50%, 
            rgba(0, 0, 139, 0.9) 100%);
        border: 2px solid rgba(0, 255, 255, 0.3);
        box-shadow: 0 0 40px rgba(0, 255, 255, 0.3);
    ">
        <!-- Proudly Sponsored By Section -->
        <div style="margin-bottom: 25px;">
            <div style="
                font-family: 'Arial', sans-serif;
                font-weight: 700; 
                font-size: 16px; 
                letter-spacing: 1.5px;
                text-transform: uppercase;
                background: linear-gradient(45deg, #8a2be2 0%, #da70d6 50%, #8a2be2 100%);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-size: 200% 200%;
                animation: metalShine 3s ease-in-out infinite;
                margin-bottom: 15px;
            ">
                Proudly Sponsored By:
            </div>
            
            <!-- Map-Style Sponsor Radar System -->
            <div class="sponsor-radar-container" style="position: relative; width: 300px; height: 300px; margin: 0 auto;">
                
                <!-- Ultrasonic Grid Background -->
                <div style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    opacity: 0.3;
                    background-image: 
                        linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
                    background-size: 15px 15px;
                    animation: gridPulse 3s ease-in-out infinite alternate;
                    z-index: 1;
                    border-radius: 50%;
                "></div>

                <!-- Main Radar Rings -->
                <div class="sonar-ring" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 280px;
                    height: 280px;
                    border: 2px solid rgba(0, 255, 255, 0.4);
                    border-radius: 50%;
                    animation: sonarPulse 4s ease-in-out infinite;
                    z-index: 1;
                "></div>
                
                <div class="sonar-ring" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 200px;
                    height: 200px;
                    border: 2px solid rgba(138, 43, 226, 0.5);
                    border-radius: 50%;
                    animation: sonarPulse 4s ease-in-out infinite 1.5s;
                    z-index: 1;
                "></div>
                
                <div class="sonar-ring" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 120px;
                    height: 120px;
                    border: 2px solid rgba(0, 150, 255, 0.6);
                    border-radius: 50%;
                    animation: sonarPulse 4s ease-in-out infinite 3s;
                    z-index: 1;
                "></div>
                
                <!-- Big Rotating Radar Sweep -->
                <div class="radar-sweep" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 280px;
                    height: 280px;
                    background: conic-gradient(from 0deg, transparent 0%, rgba(0, 255, 255, 0.4) 8%, transparent 16%);
                    border-radius: 50%;
                    animation: radarSweep 8s linear infinite;
                    z-index: 2;
                "></div>
                
                <!-- Central Sponsor Zone - Browns Painting (Cyan/Blue) -->
                <div class="sponsor-zone" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 90px;
                    height: 90px;
                    z-index: 5;
                ">
                    <!-- Cyan Backlight -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 120px;
                        height: 120px;
                        background: radial-gradient(circle, 
                            rgba(0, 255, 255, 0.6) 0%, 
                            rgba(0, 200, 255, 0.4) 40%, 
                            rgba(0, 150, 255, 0.3) 70%, 
                            transparent 100%);
                        border-radius: 50%;
                        filter: blur(20px);
                        animation: epicGlow 3s ease-in-out infinite alternate;
                        z-index: 0;
                    "></div>
                    
                    <!-- Round Logo with Faded Edges -->
                    <img src="assets/browns-painting-logo.png" alt="Browns Painting" style="
                        width: 80px;
                        height: 80px;
                        object-fit: cover;
                        border-radius: 50%;
                        position: relative;
                        z-index: 3;
                        filter: brightness(1.8) contrast(1.5) drop-shadow(0 0 20px rgba(0, 255, 255, 0.8));
                        transition: all 0.3s ease;
                        cursor: pointer;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'" 
                    onmouseover="this.style.transform='scale(1.1)'; this.style.filter='brightness(2.2) contrast(1.8) drop-shadow(0 0 30px rgba(0, 255, 255, 1))';" 
                    onmouseout="this.style.transform='scale(1)'; this.style.filter='brightness(1.8) contrast(1.5) drop-shadow(0 0 20px rgba(0, 255, 255, 0.8))';">
                </div>

                <!-- Future Sponsor Zone 1 - Top Right (Purple) -->
                <div class="sponsor-zone" style="
                    position: absolute;
                    top: 25%;
                    right: 15%;
                    width: 60px;
                    height: 60px;
                    z-index: 4;
                ">
                    <!-- Purple Backlight -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80px;
                        height: 80px;
                        background: radial-gradient(circle, 
                            rgba(138, 43, 226, 0.6) 0%, 
                            rgba(147, 51, 234, 0.4) 40%, 
                            rgba(126, 58, 237, 0.3) 70%, 
                            transparent 100%);
                        border-radius: 50%;
                        filter: blur(15px);
                        animation: epicGlow 3.5s ease-in-out infinite alternate;
                        z-index: 0;
                    "></div>
                    
                    <!-- Coming Soon Badge -->
                    <div style="
                        width: 50px;
                        height: 50px;
                        background: rgba(138, 43, 226, 0.3);
                        border: 2px solid rgba(138, 43, 226, 0.6);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                        z-index: 3;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <span style="color: #a855f7; font-size: 8px; font-weight: bold; text-align: center; text-shadow: 0 0 5px rgba(168, 85, 247, 0.8);">SOON</span>
                    </div>
                </div>

                <!-- Future Sponsor Zone 2 - Bottom Left (Green) -->
                <div class="sponsor-zone" style="
                    position: absolute;
                    bottom: 25%;
                    left: 15%;
                    width: 60px;
                    height: 60px;
                    z-index: 4;
                ">
                    <!-- Green Backlight -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80px;
                        height: 80px;
                        background: radial-gradient(circle, 
                            rgba(16, 185, 129, 0.6) 0%, 
                            rgba(5, 150, 105, 0.4) 40%, 
                            rgba(6, 120, 95, 0.3) 70%, 
                            transparent 100%);
                        border-radius: 50%;
                        filter: blur(15px);
                        animation: epicGlow 4s ease-in-out infinite alternate;
                        z-index: 0;
                    "></div>
                    
                    <!-- Coming Soon Badge -->
                    <div style="
                        width: 50px;
                        height: 50px;
                        background: rgba(16, 185, 129, 0.3);
                        border: 2px solid rgba(16, 185, 129, 0.6);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                        z-index: 3;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <span style="color: #10b981; font-size: 8px; font-weight: bold; text-align: center; text-shadow: 0 0 5px rgba(16, 185, 129, 0.8);">SOON</span>
                    </div>
                </div>

                <!-- Future Sponsor Zone 3 - Top Left (Orange) -->
                <div class="sponsor-zone" style="
                    position: absolute;
                    top: 25%;
                    left: 15%;
                    width: 60px;
                    height: 60px;
                    z-index: 4;
                ">
                    <!-- Orange Backlight -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80px;
                        height: 80px;
                        background: radial-gradient(circle, 
                            rgba(245, 158, 11, 0.6) 0%, 
                            rgba(217, 119, 6, 0.4) 40%, 
                            rgba(180, 83, 9, 0.3) 70%, 
                            transparent 100%);
                        border-radius: 50%;
                        filter: blur(15px);
                        animation: epicGlow 3.8s ease-in-out infinite alternate;
                        z-index: 0;
                    "></div>
                    
                    <!-- Coming Soon Badge -->
                    <div style="
                        width: 50px;
                        height: 50px;
                        background: rgba(245, 158, 11, 0.3);
                        border: 2px solid rgba(245, 158, 11, 0.6);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                        z-index: 3;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <span style="color: #f59e0b; font-size: 8px; font-weight: bold; text-align: center; text-shadow: 0 0 5px rgba(245, 158, 11, 0.8);">SOON</span>
                    </div>
                </div>

                <!-- Future Sponsor Zone 4 - Bottom Right (Red) -->
                <div class="sponsor-zone" style="
                    position: absolute;
                    bottom: 25%;
                    right: 15%;
                    width: 60px;
                    height: 60px;
                    z-index: 4;
                ">
                    <!-- Red Backlight -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80px;
                        height: 80px;
                        background: radial-gradient(circle, 
                            rgba(239, 68, 68, 0.6) 0%, 
                            rgba(220, 38, 38, 0.4) 40%, 
                            rgba(185, 28, 28, 0.3) 70%, 
                            transparent 100%);
                        border-radius: 50%;
                        filter: blur(15px);
                        animation: epicGlow 4.2s ease-in-out infinite alternate;
                        z-index: 0;
                    "></div>
                    
                    <!-- Coming Soon Badge -->
                    <div style="
                        width: 50px;
                        height: 50px;
                        background: rgba(239, 68, 68, 0.3);
                        border: 2px solid rgba(239, 68, 68, 0.6);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                        z-index: 3;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <span style="color: #ef4444; font-size: 8px; font-weight: bold; text-align: center; text-shadow: 0 0 5px rgba(239, 68, 68, 0.8);">SOON</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Searching for Sponsors Section -->
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(0, 255, 255, 0.3);">
            <div style="
                font-family: 'Arial', sans-serif;
                font-size: 18px;
                font-weight: 600;
                color: #e0e0e0;
                margin-bottom: 15px;
                letter-spacing: 1px;
            ">
                Searching for Sponsors
            </div>
            <button onclick="window.location.href='/sponsorship.html'" style="
                background: linear-gradient(135deg, #0096ff, #00ffff);
                color: #000;
                border: none;
                padding: 12px 30px;
                border-radius: 25px;
                font-weight: 700;
                font-size: 14px;
                letter-spacing: 0.5px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
                text-transform: uppercase;
            " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 0 30px rgba(0, 255, 255, 0.8)';" 
            onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 0 20px rgba(0, 255, 255, 0.4)';">
                Become a Sponsor
            </button>
        </div>
        
        <style>
            @keyframes metalShine {
                0% { background-position: 200% 0%; }
                50% { background-position: -200% 0%; }
                100% { background-position: 200% 0%; }
            }
            
            @keyframes gridPulse {
                0% { opacity: 0.2; }
                100% { opacity: 0.5; }
            }

            @keyframes sonarPulse {
                0% { 
                    opacity: 1; 
                    transform: translate(-50%, -50%) scale(0.6); 
                }
                100% { 
                    opacity: 0; 
                    transform: translate(-50%, -50%) scale(1.2); 
                }
            }
            
            @keyframes radarSweep {
                0% { transform: translate(-50%, -50%) rotate(0deg); }
                100% { transform: translate(-50%, -50%) rotate(360deg); }
            }
            
            @keyframes epicGlow {
                0% { 
                    filter: blur(40px) brightness(1); 
                    transform: translate(-50%, -50%) scale(1); 
                }
                100% { 
                    filter: blur(45px) brightness(1.4); 
                    transform: translate(-50%, -50%) scale(1.05); 
                }
            }
        </style>
            <!-- Business Support Letter -->
            <div style="
                margin: 30px 0 20px 0;
                padding: 25px;
                background: rgba(15, 23, 77, 0.7);
                border-radius: 15px;
                border: 1px solid rgba(138, 43, 226, 0.4);
                backdrop-filter: blur(10px);
                text-align: left;
            ">
                <div style="
                    color: #e6e6fa;
                    font-family: 'Orbitron', Arial, sans-serif;
                    font-size: 18px;
                    font-weight: 600;
                    margin-bottom: 15px;
                    text-align: center;
                    letter-spacing: 1px;
                ">
                    Dear Local Business Leaders
                </div>
                <div style="
                    color: #d1d5db;
                    font-size: 14px;
                    line-height: 1.6;
                    font-family: Arial, sans-serif;
                ">
                    MarketPace is about investing in each other. Choosing to support the successful launch of MarketPace, is choosing to support local success. Help set the pace and deliver opportunities in your community today!
                </div>
            </div>

            <div style="margin-top: 25px;">
                <button onclick="window.location.href='/sponsorship.html'" style="
                    background: linear-gradient(135deg, 
                        rgba(15, 23, 77, 0.9) 0%, 
                        rgba(45, 32, 95, 0.95) 25%, 
                        rgba(75, 0, 130, 0.9) 50%, 
                        rgba(25, 25, 112, 0.95) 75%, 
                        rgba(0, 0, 139, 0.9) 100%);
                    border: 2px solid rgba(138, 43, 226, 0.8);
                    padding: 15px 30px;
                    border-radius: 15px;
                    color: #e6e6fa;
                    font-family: 'Orbitron', 'Arial Black', Arial, sans-serif;
                    font-weight: 700;
                    font-size: 16px;
                    letter-spacing: 1px;
                    text-transform: uppercase;
                    cursor: pointer;
                    transition: all 0.4s ease;
                    box-shadow: 
                        0 0 40px rgba(138, 43, 226, 0.5),
                        0 0 80px rgba(75, 0, 130, 0.3),
                        inset 0 0 30px rgba(138, 43, 226, 0.2);
                    position: relative;
                    backdrop-filter: blur(10px);
                " onmouseover="
                    this.style.transform='scale(1.05)';
                    this.style.boxShadow='0 0 60px rgba(138, 43, 226, 0.8), 0 0 120px rgba(75, 0, 130, 0.5), inset 0 0 40px rgba(138, 43, 226, 0.3)';
                    this.style.borderColor='rgba(138, 43, 226, 1)';
                " onmouseout="
                    this.style.transform='scale(1)';
                    this.style.boxShadow='0 0 40px rgba(138, 43, 226, 0.5), 0 0 80px rgba(75, 0, 130, 0.3), inset 0 0 30px rgba(138, 43, 226, 0.2)';
                    this.style.borderColor='rgba(138, 43, 226, 0.8)';
                ">
                    Become a Sponsor
                </button>
            </div>
        </div>
    </div>

    <div class="bottom-nav" id="bottomNav">
        <div class="nav-container">
            <button class="nav-item active" onclick="goToPage('home')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Community Icon -->
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="12" cy="8" r="2" fill="currentColor"/>
                        <circle cx="8" cy="16" r="1.5" fill="currentColor"/>
                        <circle cx="16" cy="16" r="1.5" fill="currentColor"/>
                        <path d="M12 10V14M10 14H14" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="1" opacity="0.3" stroke-dasharray="2,1"/>
                    </svg>
                </div>
                <div class="nav-label">Community</div>
            </button>
            <button class="nav-item" onclick="goToPage('shops')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Shop Icon -->
                        <rect x="3" y="6" width="18" height="13" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M3 6L12 2L21 6" stroke="currentColor" stroke-width="2"/>
                        <circle cx="8" cy="12" r="2" fill="currentColor" opacity="0.6"/>
                        <circle cx="16" cy="12" r="2" fill="currentColor" opacity="0.6"/>
                        <path d="M6 15H18" stroke="currentColor" stroke-width="1" opacity="0.5"/>
                        <circle cx="12" cy="9" r="1" fill="currentColor"/>
                    </svg>
                </div>
                <div class="nav-label">Shops</div>
            </button>
            <button class="nav-item" onclick="goToPage('services')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Services Icon -->
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
                        <polygon points="12,7 16,14 8,14" fill="currentColor" opacity="0.6"/>
                        <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="1" opacity="0.4" stroke-dasharray="3,1"/>
                        <circle cx="12" cy="12" r="2" fill="currentColor"/>
                    </svg>
                </div>
                <div class="nav-label">Services</div>
            </button>
            <button class="nav-item" onclick="goToPage('the-hub')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Entertainment Hub Icon -->
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 2V5M12 19V22M4.22 4.22L6.34 6.34M17.66 17.66L19.78 19.78M2 12H5M19 12H22M4.22 19.78L6.34 17.66M17.66 6.34L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="12" cy="12" r="7" stroke="currentColor" stroke-width="1" opacity="0.5"/>
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1" opacity="0.3"/>
                    </svg>
                </div>
                <div class="nav-label">The Hub</div>
            </button>
            <button class="nav-item" onclick="goToPage('rentals')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Rentals Icon -->
                        <rect x="4" y="6" width="16" height="12" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M8 4V6M16 4V6" stroke="currentColor" stroke-width="2"/>
                        <circle cx="9" cy="11" r="1.5" fill="currentColor"/>
                        <circle cx="15" cy="11" r="1.5" fill="currentColor"/>
                        <circle cx="12" cy="15" r="1.5" fill="currentColor"/>
                        <path d="M9 11L12 15L15 11" stroke="currentColor" stroke-width="1" opacity="0.4"/>
                    </svg>
                </div>
                <div class="nav-label">Rentals</div>
            </button>
            <button class="nav-item" onclick="goToPage('menu')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <!-- Futuristic Menu Icon -->
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="12" cy="8" r="1.5" fill="currentColor"/>
                        <circle cx="8" cy="16" r="1.5" fill="currentColor"/>
                        <circle cx="16" cy="16" r="1.5" fill="currentColor"/>
                        <path d="M12 10L8 14M12 10L16 14" stroke="currentColor" stroke-width="1.5" opacity="0.6"/>
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1" opacity="0.3" stroke-dasharray="2,1"/>
                    </svg>
                </div>
                <div class="nav-label">Menu</div>
            </button>
        </div>
    </div>

    <script src="counter-offer-system.js"></script>
    <script src="seller-posting-options.js"></script>
    <script>
        let selectedCategory = 'all';
        
        // Dropdown functions
        function toggleFilter() {
            const dropdown = document.getElementById('filterDropdown');
            dropdown.classList.toggle('show');
            // Close menu dropdown if open
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function toggleMenu() {
            const dropdown = document.getElementById('menuDropdown');
            dropdown.classList.toggle('show');
            // Close filter dropdown if open
            document.getElementById('filterDropdown').classList.remove('show');
        }

        function filterBy(type) {
            alert(`Filtering by: ${type}`);
            document.getElementById('filterDropdown').classList.remove('show');
        }

        // Rental filtering function
        function filterRentals() {
            // Show rental liability disclaimer
            const rentalModal = document.createElement('div');
            rentalModal.className = 'modal-overlay';
            rentalModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg> Local Rentals</h3>
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #ef4444; margin: 0 0 10px 0;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" stroke="currentColor" stroke-width="1.5"/><path d="M12 15.75h.007v.008H12v-.008z" stroke="currentColor" stroke-width="2"/></svg> Important Rental Disclaimer</h4>
                        <p style="color: #e2e8f0; margin: 0; font-size: 14px; line-height: 1.4;">
                            MarketPace is NOT responsible for lost, damaged, or stolen rental items. 
                            Members must create their own rental terms and conditions. 
                            All communication and liability is between renter and item owner.
                        </p>
                    </div>
                    <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid #3b82f6; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #3b82f6; margin: 0 0 10px 0;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M16 3h5v4h-5z" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M2 21h20v-7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z" stroke="currentColor" stroke-width="1.5"/><circle cx="7" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="17" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/></svg> Delivery Options</h4>
                        <p style="color: #e2e8f0; margin: 0; font-size: 14px; line-height: 1.4;">
                            ‚Ä¢ Self pickup/dropoff (free)<br>
                            ‚Ä¢ Paid delivery service (2 fees: pickup + dropoff)<br>
                            ‚Ä¢ Renter can choose to pass full delivery cost to renter
                        </p>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="closeRentalModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="showRentalListings()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">View Rentals</button>
                    </div>
                </div>
            `;
            document.body.appendChild(rentalModal);
        }

        function closeRentalModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function showRentalListings() {
            closeRentalModal();
            
            // Filter feed to show only rental items
            const feedPosts = document.querySelectorAll('.feed-post');
            let rentalCount = 0;
            
            feedPosts.forEach(post => {
                const postText = post.textContent.toLowerCase();
                if (postText.includes('rent') || postText.includes('rental') || postText.includes('for rent') || postText.includes('/day')) {
                    post.style.display = 'block';
                    rentalCount++;
                } else {
                    post.style.display = 'none';
                }
            });
            
            // Show notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 200px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            `;
            notification.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Showing ${rentalCount} rental items in your area</div>
                    <div style="font-size: 12px; opacity: 0.9;">Click "<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg> Map" in header to view on interactive map</div>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, 4000);
        }

        // Category filtering functionality
        function filterByCategory(category) {
            console.log('Filtering by category:', category);
            
            const feedPosts = document.querySelectorAll('.feed-post');
            const feed = document.querySelector('.feed');
            let visibleCount = 0;
            
            // Define category mappings
            const categoryMappings = {
                'vehicles': ['car', 'truck', 'vehicle', 'auto', 'motorcycle', 'bike'],
                'electronics': ['phone', 'computer', 'laptop', 'tv', 'electronics', 'tech'],
                'home-garden': ['home', 'garden', 'furniture', 'decor'],
                'furniture': ['chair', 'table', 'couch', 'furniture', 'bed'],
                'fashion': ['clothing', 'shoes', 'fashion', 'jacket', 'shirt'],
                'sports': ['sports', 'exercise', 'fitness', 'outdoors'],
                'baby-kids': ['baby', 'kids', 'children', 'toy'],
                'pets': ['pet', 'dog', 'cat', 'animal'],
                'books-media': ['book', 'media', 'dvd', 'cd'],
                'health-beauty': ['health', 'beauty', 'cosmetic'],
                'toys-games': ['toy', 'game', 'puzzle'],
                'tools': ['tool', 'equipment', 'washer', 'drill'],
                'music': ['music', 'instrument', 'guitar'],
                'art-crafts': ['art', 'craft', 'paint'],
                'appliances': ['appliance', 'microwave', 'refrigerator'],
                'food-beverage': ['food', 'beverage', 'restaurant']
            };
            
            const keywords = categoryMappings[category] || [category];
            
            feedPosts.forEach(post => {
                const postText = post.textContent.toLowerCase();
                const matchesCategory = keywords.some(keyword => postText.includes(keyword));
                
                if (matchesCategory) {
                    post.style.display = 'block';
                    visibleCount++;
                } else {
                    post.style.display = 'none';
                }
            });
            
            // Remove existing no-items message
            const existingMessage = feed.querySelector('.no-items-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // Show "none available" message if no items found
            if (visibleCount === 0) {
                const noItemsMessage = document.createElement('div');
                noItemsMessage.className = 'no-items-message';
                noItemsMessage.style.cssText = `
                    background: rgba(0, 0, 0, 0.4); 
                    backdrop-filter: blur(20px); 
                    border: 1px solid rgba(255, 255, 255, 0.2); 
                    border-radius: 12px; 
                    padding: 40px 20px; 
                    text-align: center; 
                    margin: 20px 0;
                `;
                noItemsMessage.innerHTML = `
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" style="margin-bottom: 16px; opacity: 0.6;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="#00ffff" stroke-width="1.5" fill="rgba(0, 255, 255, 0.1)"/>
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" stroke="#00ffff" stroke-width="1.5"/>
                        <circle cx="7" cy="7" r="1" fill="#00ffff"/>
                    </svg>
                    <h3 style="color: #00ffff; margin-bottom: 12px; font-size: 20px;">None Available at This Time</h3>
                    <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 20px;">No ${category.replace('-', ' & ')} items found in your area. Be the first to post!</p>
                    <button class="commerce-btn primary" onclick="openAdvancedPostModal('sale')" style="background: linear-gradient(135deg, #00ffff, #8b5cf6); margin-top: 10px;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Post in This Category
                    </button>
                `;
                feed.appendChild(noItemsMessage);
            }
            
            // Show notification
            showNotification(`Filtered to ${category.replace('-', ' & ')} category - ${visibleCount} items found`, visibleCount > 0 ? '#10b981' : '#f59e0b');
        }
        
        function showNotification(message, color = '#10b981') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 120px;
                left: 50%;
                transform: translateX(-50%);
                background: ${color};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                font-size: 14px;
                font-weight: 500;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, 3000);
        }
        
        function clearCategoryFilter() {
            const feedPosts = document.querySelectorAll('.feed-post');
            const feed = document.querySelector('.feed');
            
            // Show all posts
            feedPosts.forEach(post => {
                post.style.display = 'block';
            });
            
            // Remove no-items message if it exists
            const existingMessage = feed.querySelector('.no-items-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            showNotification('Category filter cleared - showing all posts', '#3b82f6');
        }

        // Main rental filtering function called by the rental button
        function filterRentals() {
            console.log('Filtering to show rental items only...');
            
            // Show rental disclaimer modal
            const rentalModal = document.createElement('div');
            rentalModal.className = 'modal-overlay';
            rentalModal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <h3 style="color: #ff6b6b; margin-bottom: 20px;"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" stroke="currentColor" stroke-width="1.5"/><path d="M12 15.75h.007v.008H12v-.008z" stroke="currentColor" stroke-width="2"/></svg> Rental Liability Disclaimer</h3>
                    <div style="background: rgba(255, 107, 107, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(255, 107, 107, 0.3);">
                        <p style="margin: 0 0 15px 0; font-weight: bold; color: #ff6b6b;">IMPORTANT: MarketPace is NOT responsible for:</p>
                        <ul style="margin: 0; padding-left: 20px;">
                            <li>Lost, damaged, or stolen rental items</li>
                            <li>Member-to-member rental agreements</li>
                            <li>Item condition or functionality</li>
                            <li>Rental terms and conditions (set by item owner)</li>
                        </ul>
                        <p style="margin: 15px 0 0 0; font-style: italic;">All rentals are member-to-member transactions. Create your own rental terms and conditions.</p>
                    </div>
                    
                    <h4 style="color: #00ffff; margin-bottom: 15px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M6 10h12M6 14h12M6 18h8" stroke="currentColor" stroke-width="1.5"/></svg> Rental Pricing Structure</h4>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <p><strong>Recommended:</strong> Flat daily rate (more flexible)</p>
                        <p><strong>Pickup:</strong> Morning routes 9am-12pm</p>
                        <p><strong>Dropoff:</strong> Evening routes 6pm-9pm</p>
                        <p><strong>Route Break Fee:</strong> $4 extra for custom timing</p>
                        <p><strong>Business Subscribers:</strong> $2 fee (3x/week renters)</p>
                        <p><strong>Delivery Cost:</strong> Renter pays full amount (doubled for pickup + dropoff)</p>
                        <p><strong>Tips:</strong> Both parties can tip drivers</p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeRentalModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="showRentalFeed()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">View Rentals</button>
                    </div>
                </div>
            `;
            document.body.appendChild(rentalModal);
        }

        function showRentalFeed() {
            closeRentalModal();
            
            // Filter feed to show only rental items
            const feedPosts = document.querySelectorAll('.feed-post');
            let rentalCount = 0;
            
            feedPosts.forEach(post => {
                const postText = post.textContent.toLowerCase();
                if (postText.includes('rent') || postText.includes('rental') || postText.includes('for rent')) {
                    post.style.display = 'block';
                    rentalCount++;
                } else {
                    post.style.display = 'none';
                }
            });
            
            // Show notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 200px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            `;
            notification.textContent = `Showing ${rentalCount} rental items in your area`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, 3000);
        }

        // Rental action functions
        function rentItem(itemName, dailyPrice) {
            const rentalModal = document.createElement('div');
            rentalModal.className = 'modal-overlay';
            rentalModal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg> Rent ${itemName}</h3>
                    
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <h4 style="color: #00ffff; margin-bottom: 15px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M6 10h12M6 14h12M6 18h8" stroke="currentColor" stroke-width="1.5"/></svg> Rental Details</h4>
                        <p><strong>Daily Rate:</strong> $${dailyPrice.toFixed(2)} (Recommended flat rate)</p>
                        <p><strong>Pickup Schedule:</strong> Morning routes 9am-12pm</p>
                        <p><strong>Dropoff Schedule:</strong> Evening routes 6pm-9pm</p>
                        <p><strong>Custom Timing:</strong> +$4 route break fee</p>
                        <p><strong>Business Subscribers:</strong> $2 fee (for 3x/week renters)</p>
                    </div>
                    
                    <div style="background: rgba(255, 107, 107, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(255, 107, 107, 0.3);">
                        <p style="margin: 0; font-weight: bold; color: #ff6b6b;">Delivery Cost: Renter pays full amount (doubled for pickup + dropoff)</p>
                        <p style="margin: 5px 0 0 0; font-size: 14px;">Both parties can tip drivers. You create your own rental terms.</p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeRentalModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="proceedWithRental('${itemName}', ${dailyPrice})" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Proceed to Rent</button>
                    </div>
                </div>
            `;
            document.body.appendChild(rentalModal);
        }

        function selfPickup(itemName) {
            // Navigate to messaging page with item owner
            window.location.href = `/message-owner?item=${encodeURIComponent(itemName)}&type=rental`;
        }

        function proceedWithRental(itemName, dailyPrice) {
            closeRentalModal();
            // Navigate to rental delivery selection page
            window.location.href = `/rental-delivery?item=${encodeURIComponent(itemName)}&price=${dailyPrice}`;
        }

        function closeRentalModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function goToProfile() {
            window.location.href = '/profile';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToSettings() {
            window.location.href = '/settings';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToDeliveries() {
            window.location.href = '/deliveries';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToSponsor() {
            window.location.href = '/sponsorship.html';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToSecurity() {
            window.location.href = '/security';
            document.getElementById('menuDropdown').classList.remove('show');
        }
        
        function goToResetLive() {
            document.getElementById('menuDropdown').classList.remove('show');
            window.location.href = '/reset-to-live';
        }

        // Enhanced Interactive Map Functions
        function showInteractiveMap(category) {
            console.log('Opening interactive map with category:', category);
            window.location.href = '/interactive-map';
        }

        function showInteractiveMapModal(category) {
            const mapModal = document.createElement('div');
            mapModal.className = 'modal-overlay';
            mapModal.innerHTML = `
                <div class="modal-content" style="max-width: 90vw; max-height: 90vh; padding: 0; border-radius: 15px; overflow: hidden;">
                    <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); padding: 20px; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3 style="margin: 0; color: #00ffff;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                                        <circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2"/>
                                        <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                    Interactive Map
                                </h3>
                                <p style="margin: 5px 0 0 0; opacity: 0.8;">Find rentals, shops, services & more nearby</p>
                            </div>
                            <button onclick="closeMapModal()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer;">√ó</button>
                        </div>
                        
                        <!-- Map Controls -->
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <select id="radiusSelector" onchange="updateMapRadius()" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px; border-radius: 6px;">
                                <option value="5">5 miles</option>
                                <option value="10" selected>10 miles</option>
                                <option value="25">25 miles</option>
                                <option value="50">50 miles</option>
                            </select>
                            
                            <select id="townSelector" onchange="updateMapTown()" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px; border-radius: 6px;">
                                <option value="all">All Launched Towns</option>
                                <option value="orange-beach">Orange Beach, AL</option>
                                <option value="gulf-shores">Gulf Shores, AL</option>
                                <option value="foley">Foley, AL</option>
                                <option value="spanish-fort">Spanish Fort, AL</option>
                                <option value="daphne">Daphne, AL</option>
                                <option value="fairhope">Fairhope, AL</option>
                                <option value="mobile">Mobile, AL</option>
                                <option value="pensacola">Pensacola, FL</option>
                                <option value="destin">Destin, FL</option>
                                <option value="panama-city">Panama City, FL</option>
                            </select>
                            
                            <div style="display: flex; gap: 8px;">
                                <button onclick="filterMapItems('rentals')" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg> Rentals</button>
                                <button onclick="filterMapItems('sales')" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M21 12a9 9 0 1 1-6.219-8.56" stroke="currentColor" stroke-width="1.5"/><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="1.5"/></svg> For Sale</button>
                                <button onclick="filterMapItems('services')" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="1.5"/></svg> Services</button>
                                <button onclick="filterMapItems('shops')" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg> Shops</button>
                                <button onclick="filterMapItems('all')" style="background: linear-gradient(135deg, #6b7280, #4b5563); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">All</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Map Area -->
                    <div id="mapContainer" style="height: 500px; background: linear-gradient(135deg, #0f172a, #1e293b); position: relative; overflow: hidden;">
                        <!-- Futuristic Grid Background -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: repeating-linear-gradient(0deg, rgba(0, 255, 255, 0.1) 0px, transparent 1px, transparent 20px, rgba(0, 255, 255, 0.1) 21px), repeating-linear-gradient(90deg, rgba(0, 255, 255, 0.1) 0px, transparent 1px, transparent 20px, rgba(0, 255, 255, 0.1) 21px); opacity: 0.3;"></div>
                        <!-- Radar Sweep Animation -->
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; height: 400px; border-radius: 50%; border: 2px solid rgba(0, 255, 255, 0.3); opacity: 0.5; animation: pulse 4s ease-in-out infinite;"></div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; height: 300px; border-radius: 50%; border: 2px solid rgba(0, 255, 255, 0.4); opacity: 0.6; animation: pulse 3s ease-in-out infinite reverse;"></div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; border-radius: 50%; border: 2px solid rgba(0, 255, 255, 0.5); opacity: 0.7; animation: pulse 2s ease-in-out infinite;"></div>
                        <!-- Central Radar Dot -->
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: rgba(0, 255, 255, 0.8); border-radius: 50%; box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);"></div>
                        <!-- Map Items Grid -->
                        <div id="mapItems" style="position: absolute; top: 20px; left: 20px; right: 20px; bottom: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; overflow-y: auto; padding: 10px; z-index: 10;">
                            <!-- Rental Items -->
                            <div class="map-item rental-item" onclick="openItemDetails('Power Washer', 'rental', '1.2 miles', '$45/day')" style="background: rgba(16, 185, 129, 0.1); border: 2px solid #10b981; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s ease;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="background: #10b981; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 10px;">RENTAL</div>
                                    <div style="color: #00ffff; font-weight: bold;">1.2 miles away</div>
                                </div>
                                <h4 style="color: white; margin: 0 0 8px 0;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="1.5"/></svg> Power Washer</h4>
                                <p style="color: #94a3b8; margin: 0 0 10px 0; font-size: 14px;">Perfect for driveways and decks</p>
                                <div style="color: #10b981; font-weight: bold;">$45.00/day</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 5px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> General area: Orange Beach</div>
                            </div>
                            
                            <div class="map-item rental-item" onclick="openItemDetails('Beach Chairs Set', 'rental', '2.1 miles', '$25/day')" style="background: rgba(16, 185, 129, 0.1); border: 2px solid #10b981; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s ease;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="background: #10b981; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 10px;">RENTAL</div>
                                    <div style="color: #00ffff; font-weight: bold;">2.1 miles away</div>
                                </div>
                                <h4 style="color: white; margin: 0 0 8px 0;">üèñÔ∏è Beach Chairs Set</h4>
                                <p style="color: #94a3b8; margin: 0 0 10px 0; font-size: 14px;">Umbrella and chairs for beach days</p>
                                <div style="color: #10b981; font-weight: bold;">$25.00/day</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 5px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> General area: Orange Beach</div>
                            </div>
                            
                            <!-- For Sale Items -->
                            <div class="map-item sale-item" onclick="openItemDetails('Vintage Leather Jacket', 'sale', '0.8 miles', '$85')" style="background: rgba(245, 158, 11, 0.1); border: 2px solid #f59e0b; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s ease;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="background: #f59e0b; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 10px;">FOR SALE</div>
                                    <div style="color: #00ffff; font-weight: bold;">0.8 miles away</div>
                                </div>
                                <h4 style="color: white; margin: 0 0 8px 0;">üëò Vintage Leather Jacket</h4>
                                <p style="color: #94a3b8; margin: 0 0 10px 0; font-size: 14px;">Perfect condition, size medium</p>
                                <div style="color: #f59e0b; font-weight: bold;">$85.00</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 5px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> General area: Orange Beach</div>
                            </div>
                            
                            <!-- Service Items -->
                            <div class="map-item service-item" onclick="openItemDetails('Mike\\'s Handyman Service', 'service', '3.2 miles', 'Starting at $50')" style="background: rgba(59, 130, 246, 0.1); border: 2px solid #3b82f6; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s ease;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="background: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 10px;">SERVICE</div>
                                    <div style="color: #00ffff; font-weight: bold;">3.2 miles away</div>
                                </div>
                                <h4 style="color: white; margin: 0 0 8px 0;">üî® Mike's Handyman Service</h4>
                                <p style="color: #94a3b8; margin: 0 0 10px 0; font-size: 14px;">Licensed plumbing, electrical, painting</p>
                                <div style="color: #3b82f6; font-weight: bold;">Starting at $50.00</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 5px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> Exact address: 123 Gulf Shores Blvd</div>
                            </div>
                            
                            <!-- Shop Items -->
                            <div class="map-item shop-item" onclick="openItemDetails('Sarah\\'s Boutique', 'shop', '1.5 miles', 'Clothing & Accessories')" style="background: rgba(139, 92, 246, 0.1); border: 2px solid #8b5cf6; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s ease;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="background: #8b5cf6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 10px;">SHOP</div>
                                    <div style="color: #00ffff; font-weight: bold;">1.5 miles away</div>
                                </div>
                                <h4 style="color: white; margin: 0 0 8px 0;">üëó Sarah's Boutique</h4>
                                <p style="color: #94a3b8; margin: 0 0 10px 0; font-size: 14px;">Vintage clothing and accessories</p>
                                <div style="color: #8b5cf6; font-weight: bold;">Clothing & Accessories</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 5px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(239, 68, 68, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> Exact address: 456 Beach Blvd</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(mapModal);
        }

        function closeMapModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function updateMapRadius() {
            const radius = document.getElementById('radiusSelector').value;
            console.log(`Updating map radius to ${radius} miles`);
            // In a real implementation, this would filter items based on actual distance
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 100px; left: 50%; transform: translateX(-50%);
                background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;
                padding: 10px 20px; border-radius: 8px; z-index: 10000;
            `;
            notification.textContent = `Map updated to show items within ${radius} miles`;
            document.body.appendChild(notification);
            setTimeout(() => document.body.removeChild(notification), 2000);
        }

        function updateMapTown() {
            const town = document.getElementById('townSelector').value;
            console.log(`Filtering map to town: ${town}`);
            const townName = town === 'all' ? 'all launched towns' : document.getElementById('townSelector').selectedOptions[0].text;
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 100px; left: 50%; transform: translateX(-50%);
                background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;
                padding: 10px 20px; border-radius: 8px; z-index: 10000;
            `;
            notification.textContent = `Map filtered to ${townName}`;
            document.body.appendChild(notification);
            setTimeout(() => document.body.removeChild(notification), 2000);
        }

        function filterMapItems(category) {
            const allItems = document.querySelectorAll('.map-item');
            allItems.forEach(item => {
                if (category === 'all') {
                    item.style.display = 'block';
                } else if (category === 'rentals' && item.classList.contains('rental-item')) {
                    item.style.display = 'block';
                } else if (category === 'sales' && item.classList.contains('sale-item')) {
                    item.style.display = 'block';
                } else if (category === 'services' && item.classList.contains('service-item')) {
                    item.style.display = 'block';
                } else if (category === 'shops' && item.classList.contains('shop-item')) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function openItemDetails(itemName, type, distance, price) {
            const detailModal = document.createElement('div');
            detailModal.className = 'modal-overlay';
            detailModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;">${itemName}</h3>
                    
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <p><strong>Type:</strong> ${type.toUpperCase()}</p>
                        <p><strong>Distance:</strong> ${distance}</p>
                        <p><strong>Price:</strong> ${price}</p>
                        <p><strong>Location Privacy:</strong> ${type === 'service' || type === 'shop' ? 'Exact address shown' : 'General area only for privacy'}</p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="closeItemDetails()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                        <button onclick="contactSeller('${itemName}')" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Contact</button>
                        ${type === 'rental' ? `<button onclick="verifyCondition('${itemName}', '${type}s')" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"/><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="1.5"/></svg>Verify Condition</button>` : ''}
                    </div>
                </div>
            `;
            document.body.appendChild(detailModal);
        }

        function closeItemDetails() {
            const modals = document.querySelectorAll('.modal-overlay');
            const lastModal = modals[modals.length - 1];
            if (lastModal) {
                document.body.removeChild(lastModal);
            }
        }

        function contactSeller(itemName) {
            alert(`Contact request sent for ${itemName}. Seller will be notified.`);
            closeItemDetails();
        }

        // Message Owner Function
        function messageOwner(itemName, sellerName, itemPrice, imageUrl) {
            // Create a conversation and navigate to messages
            const conversationId = 'conv_' + Date.now();
            const conversation = {
                id: conversationId,
                participants: ['You', sellerName || 'Seller'],
                lastMessage: `Hi! I'm interested in ${itemName}`,
                timestamp: new Date().toISOString(),
                itemContext: {
                    name: itemName,
                    price: itemPrice,
                    image: imageUrl,
                    seller: sellerName
                }
            };
            
            // Save conversation to localStorage
            const conversations = JSON.parse(localStorage.getItem('marketpace_conversations') || '[]');
            conversations.unshift(conversation);
            localStorage.setItem('marketpace_conversations', JSON.stringify(conversations));
            
            // Navigate to messages page
            window.location.href = '/messages';
        }

        // Profile Settings and Navigation Functions
        function toggleLogoDropdown() {
            const dropdown = document.getElementById('logoDropdown');
            if (dropdown) {
                dropdown.remove();
            } else {
                const dropdown = document.createElement('div');
                dropdown.id = 'logoDropdown';
                dropdown.className = 'modal-overlay';
                dropdown.innerHTML = `
                    <div class="modal-content" style="max-width: 400px; margin-top: 100px;">
                        <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg> Profile Settings</h3>
                        
                        <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                            <h4 style="color: #ef4444; margin: 0 0 10px 0;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.3)"/></svg> Demo Mode Active</h4>
                            <p style="color: #e2e8f0; margin: 0; font-size: 14px; line-height: 1.4;">
                                You're currently in demo mode. Click "Reset to Live" to switch to the live platform.
                            </p>
                        </div>
                        
                        <div style="display: grid; gap: 10px; margin-bottom: 20px;">
                            <button onclick="goToProfile(); closeLogoDropdown();" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">
                                üë§ My Profile
                            </button>
                            <button onclick="goToPage('/cart'); closeLogoDropdown();" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg> Shopping Cart
                            </button>
                            <button onclick="goToPage('/settings'); closeLogoDropdown();" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg> Settings
                            </button>
                            <button onclick="resetToLive(); closeLogoDropdown();" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">
                                üîÑ Reset to Live
                            </button>
                        </div>
                        
                        <button onclick="closeLogoDropdown()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; width: 100%;">Close</button>
                    </div>
                `;
                document.body.appendChild(dropdown);
            }
        }

        function closeLogoDropdown() {
            const dropdown = document.getElementById('logoDropdown');
            if (dropdown) dropdown.remove();
        }

        function goToProfile() {
            window.location.href = '/profile';
        }

        function openProfileSettings() {
            const settingsModal = document.createElement('div');
            settingsModal.className = 'modal-overlay';
            settingsModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg> Profile Settings</h3>
                    
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #ef4444; margin: 0 0 10px 0;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.3)"/></svg> Demo Mode Active</h4>
                        <p style="color: #e2e8f0; margin: 0; font-size: 14px; line-height: 1.4;">
                            You're currently in demo mode. Click "Reset to Live" to switch to the live platform.
                        </p>
                        <button onclick="goToResetLive()" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 10px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.3)"/></svg> Reset to Live Mode</button>
                    </div>
                    
                    <div style="display: grid; gap: 10px;">
                        <button onclick="goToMyProfile()" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; text-align: left;">üë§ My Profile Page</button>
                        <button onclick="goToSettings()" style="background: linear-gradient(135deg, #6b7280, #4b5563); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; text-align: left;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg> Account Settings</button>
                        <button onclick="goToSecurity()" style="background: linear-gradient(135deg, #7c3aed, #6b46c1); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; text-align: left;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/><rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="1.5"/></svg> Security & Privacy</button>
                        <button onclick="inviteFriends()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; text-align: left;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 7a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="1.5"/></svg> Invite Friends</button>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                        <button onclick="closeProfileSettings()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(settingsModal);
        }

        function closeProfileSettings() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function goToMyProfile() {
            closeProfileSettings();
            window.location.href = '/profile';
        }

        // Add missing functions for profile settings
        function goToCart() {
            closeProfileSettings();
            window.location.href = '/cart';
        }

        function goToDeliveries() {
            closeProfileSettings();
            window.location.href = '/delivery';
        }

        function goToSponsors() {
            closeProfileSettings();
            window.location.href = '/sponsors';
        }

        function goToSettings() {
            closeProfileSettings();
            window.location.href = '/settings';
        }

        function goToSecurity() {
            closeProfileSettings();
            window.location.href = '/security';
        }

        function createBusinessProfile() {
            closeProfileSettings();
            window.location.href = '/marketpace-pro-signup';
        }

        function resetToLive() {
            closeProfileSettings();
            if (confirm('This will remove all demo data and reset to live mode. Are you sure?')) {
                // Clear all demo data
                localStorage.removeItem('demoMode');
                localStorage.removeItem('currentUser');
                localStorage.removeItem('cartItems');
                localStorage.removeItem('favorites');
                showNotification('Demo data cleared! You are now in live mode.', 'success');
                window.location.reload();
            }
        }

        function logout() {
            closeProfileSettings();
            if (confirm('Are you sure you want to logout?')) {
                // Clear all user data
                localStorage.clear();
                sessionStorage.clear();
                // Redirect to signup/login page
                window.location.href = '/signup-login';
            }
        }

        // Header navigation functions - removed duplicate, using comprehensive version

        // Navigate to rentals page (NOT map)
        function filterToRentals() {
            console.log('Navigating to rentals page...');
            window.location.href = '/rentals';
        }

        // Driver login functionality
        function showDriverLogin() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 400px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M5 17h-2v-6l2-5h9l4 5h1a2 2 0 0 1 2 2v4h-2" stroke="currentColor" stroke-width="1.5"/></svg> Driver Login</h3>
                    <form id="driverLoginForm">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="driverUsername" class="form-input" placeholder="Enter username" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="driverPassword" class="form-input" placeholder="Enter password" required>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" class="action-btn" style="background: linear-gradient(135deg, #10b981, #059669); flex: 1;">Login</button>
                            <button type="button" onclick="closeModal()" class="action-btn" style="background: linear-gradient(135deg, #6b7280, #4b5563); flex: 1;">Cancel</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
            
            document.getElementById('driverLoginForm').onsubmit = function(e) {
                e.preventDefault();
                const username = document.getElementById('driverUsername').value;
                const password = document.getElementById('driverPassword').value;
                
                // Check for admin credentials
                if (username === 'admin' && password === 'admin') {
                    showNotification('Driver login successful!', 'success');
                    closeModal();
                    window.location.href = '/driver-dashboard';
                } else {
                    showNotification('Invalid credentials', 'error');
                }
            };
        }

        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        // Scroll behavior for bottom navigation
        let lastScrollTop = 0;
        let ticking = false;

        function updateNavigation() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const bottomNav = document.getElementById('bottomNav');
            
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // Scrolling down
                bottomNav.classList.add('hidden');
            } else {
                // Scrolling up
                bottomNav.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop;
            ticking = false;
        }

        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(updateNavigation);
                ticking = true;
            }
        }

        // Add scroll listener
        window.addEventListener('scroll', requestTick);

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Community page loaded, testing button functionality...');
            initializePostTypes();
            console.log('‚úÖ All community functions initialized successfully');
        });

        // Call Now functionality for services
        function callNow(phoneNumber) {
            if (phoneNumber && phoneNumber !== 'N/A') {
                // Format phone number for calling
                const cleanPhone = phoneNumber.replace(/[^\d]/g, '');
                const telLink = `tel:${cleanPhone}`;
                
                // Check if on mobile device
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    window.location.href = telLink;
                    showNotification('Opening phone app to call...', 'success');
                } else {
                    // On desktop, show the phone number
                    showNotification(`Call: ${phoneNumber}`, 'info');
                    navigator.clipboard.writeText(phoneNumber).then(() => {
                        setTimeout(() => showNotification('Phone number copied to clipboard!', 'success'), 1000);
                    });
                }
            } else {
                showNotification('Phone number not available', 'error');
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'linear-gradient(135deg, #10b981, #059669)',
                error: 'linear-gradient(135deg, #ef4444, #dc2626)',
                info: 'linear-gradient(135deg, #3b82f6, #2563eb)',
                warning: 'linear-gradient(135deg, #f59e0b, #d97706)'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: ${colors[type] || colors.info};
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                font-weight: bold;
                text-align: center;
                max-width: 400px;
                animation: slideInDown 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, 3000);
        }

        // Condition Verification Function - Navigate to Rental Details
        function verifyCondition(itemName, category) {
            // Navigate directly to rental details page
            window.location.href = '/rental-details';
        }

        let selectedRating = 0;

        function setRating(rating) {
            selectedRating = rating;
            // Update button styles to show selection
            const buttons = document.querySelectorAll('.rating-btn');
            buttons.forEach((btn, index) => {
                if (index + 1 <= rating) {
                    btn.style.transform = 'scale(1.1)';
                    btn.style.boxShadow = '0 0 10px rgba(139, 92, 246, 0.5)';
                } else {
                    btn.style.transform = 'scale(1)';
                    btn.style.boxShadow = 'none';
                }
            });
        }

        function submitVerification(itemName, category) {
            const notes = document.getElementById('conditionNotes').value;
            const photo = document.getElementById('conditionPhoto').files[0];
            
            if (selectedRating === 0) {
                alert('Please select a rating before submitting.');
                return;
            }
            
            closeVerificationModal();
            
            // Show success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 200px; left: 50%; transform: translateX(-50%);
                background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;
                padding: 20px; border-radius: 10px; z-index: 10000; max-width: 400px; text-align: center;
            `;
            notification.innerHTML = `
                <h4 style="margin: 0 0 10px 0;">‚úÖ Verification Submitted</h4>
                <p style="margin: 0; font-size: 14px;">Your ${selectedRating}-star verification for "${itemName}" has been sent to the owner for confirmation. This helps build community trust!</p>
            `;
            document.body.appendChild(notification);
            setTimeout(() => document.body.removeChild(notification), 4000);
        }

        function closeVerificationModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
            selectedRating = 0;
        }
        function verifyCondition(itemName, type) {
            closeItemDetails();
            
            const verificationModal = document.createElement('div');
            verificationModal.className = 'modal-overlay';
            verificationModal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"/><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="1.5"/></svg> Condition Verification - ${itemName}</h3>
                    
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <h4 style="color: #00ffff; margin-bottom: 15px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M6 10h12M6 14h12M6 18h8" stroke="currentColor" stroke-width="1.5"/></svg> Verification Process</h4>
                        <p><strong>Step 1:</strong> Upload clear photos of the item</p>
                        <p><strong>Step 2:</strong> Rate the condition (1-5 stars)</p>
                        <p><strong>Step 3:</strong> Add condition notes</p>
                        <p><strong>Step 4:</strong> Owner confirmation required</p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="color: #00ffff; display: block; margin-bottom: 10px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(99, 102, 241, 0.2)"/><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="1.5"/></svg> Upload Photos:</label>
                        <input type="file" id="conditionPhotos" multiple accept="image/*" style="background: rgba(0, 0, 0, 0.3); color: white; border: 1px solid rgba(0, 255, 255, 0.3); padding: 10px; border-radius: 5px; width: 100%;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="color: #00ffff; display: block; margin-bottom: 10px;">‚≠ê Condition Rating:</label>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="setConditionRating(1)" class="rating-btn" style="background: rgba(239, 68, 68, 0.6); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">1‚òÖ Poor</button>
                            <button onclick="setConditionRating(2)" class="rating-btn" style="background: rgba(245, 158, 11, 0.6); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">2‚òÖ Fair</button>
                            <button onclick="setConditionRating(3)" class="rating-btn" style="background: rgba(251, 191, 36, 0.6); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">3‚òÖ Good</button>
                            <button onclick="setConditionRating(4)" class="rating-btn" style="background: rgba(34, 197, 94, 0.6); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">4‚òÖ Very Good</button>
                            <button onclick="setConditionRating(5)" class="rating-btn" style="background: rgba(16, 185, 129, 0.6); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">5‚òÖ Excellent</button>
                        </div>
                        <div id="selectedRating" style="margin-top: 10px; color: #00ffff;"></div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="color: #00ffff; display: block; margin-bottom: 10px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="1.5"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="1.5"/></svg> Condition Notes:</label>
                        <textarea id="conditionNotes" placeholder="Describe the item's condition in detail..." style="background: rgba(0, 0, 0, 0.3); color: white; border: 1px solid rgba(0, 255, 255, 0.3); padding: 10px; border-radius: 5px; width: 100%; height: 80px; resize: vertical;"></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeVerificationModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="submitVerification('${itemName}', '${type}')" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Submit Verification</button>
                    </div>
                </div>
            `;
            document.body.appendChild(verificationModal);
        }

        let selectedConditionRating = 0;

        function setConditionRating(rating) {
            selectedConditionRating = rating;
            
            // Update visual feedback
            const ratingButtons = document.querySelectorAll('.rating-btn');
            ratingButtons.forEach((btn, index) => {
                if (index < rating) {
                    btn.style.opacity = '1';
                    btn.style.transform = 'scale(1.05)';
                } else {
                    btn.style.opacity = '0.6';
                    btn.style.transform = 'scale(1)';
                }
            });
            
            const ratingDisplay = document.getElementById('selectedRating');
            const ratingTexts = ['', 'Poor', 'Fair', 'Good', 'Very Good', 'Excellent'];
            ratingDisplay.textContent = `Selected: ${rating}‚òÖ ${ratingTexts[rating]}`;
        }

        function submitVerification(itemName, type) {
            const photos = document.getElementById('conditionPhotos').files;
            const notes = document.getElementById('conditionNotes').value;
            
            if (selectedConditionRating === 0) {
                alert('Please select a condition rating');
                return;
            }
            
            if (!notes.trim()) {
                alert('Please add condition notes');
                return;
            }
            
            closeVerificationModal();
            
            // Show success message
            const successModal = document.createElement('div');
            successModal.className = 'modal-overlay';
            successModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <h3 style="color: #10b981; margin-bottom: 20px;">‚úÖ Verification Submitted</h3>
                    
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(16, 185, 129, 0.3);">
                        <p><strong>Item:</strong> ${itemName}</p>
                        <p><strong>Rating:</strong> ${selectedConditionRating}‚òÖ</p>
                        <p><strong>Photos:</strong> ${photos.length} uploaded</p>
                        <p><strong>Status:</strong> Pending owner confirmation</p>
                        <p style="margin-top: 15px; font-size: 14px;">Owner will be notified to confirm the condition verification. This helps ensure transparency in ${type} transactions.</p>
                    </div>
                    
                    <button onclick="closeSuccessModal()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                </div>
            `;
            document.body.appendChild(successModal);
        }

        function closeVerificationModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function closeSuccessModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        // Driver Performance Rating System
        function showDriverPerformance() {
            const performanceModal = document.createElement('div');
            performanceModal.className = 'modal-overlay';
            performanceModal.innerHTML = `
                <div class="modal-content" style="max-width: 700px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M16 3h5v4h-5z" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M2 21h20v-7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z" stroke="currentColor" stroke-width="1.5"/><circle cx="7" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="17" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/></svg> Driver Performance & Reviews</h3>
                    
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <h4 style="color: #00ffff; margin-bottom: 15px;">üë§ Driver: Mike Johnson</h4>
                        <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                            <div>
                                <p><strong>Overall Rating:</strong> 4.8‚òÖ (127 reviews)</p>
                                <p><strong>Deliveries Completed:</strong> 342</p>
                                <p><strong>On-Time Rate:</strong> 96%</p>
                            </div>
                            <div>
                                <p><strong>Damage Rate:</strong> 0.2% (1 incident)</p>
                                <p><strong>Customer Rating:</strong> 4.9‚òÖ</p>
                                <p><strong>Active Since:</strong> Jan 2024</p>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <h5 style="color: #00ffff; margin-bottom: 10px;">Recent Reviews:</h5>
                            <div style="background: rgba(0, 0, 0, 0.2); padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                <p style="margin: 0; font-size: 14px;">"Great service! Item arrived exactly as described. Very careful handling." - Sarah M. (5‚òÖ)</p>
                            </div>
                            <div style="background: rgba(0, 0, 0, 0.2); padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                                <p style="margin: 0; font-size: 14px;">"Professional and on time. Would definitely request Mike again." - David L. (5‚òÖ)</p>
                            </div>
                            <div style="background: rgba(0, 0, 0, 0.2); padding: 10px; border-radius: 5px;">
                                <p style="margin: 0; font-size: 14px;">"Good communication throughout delivery process." - Lisa K. (4‚òÖ)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeDriverPerformance()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                        <button onclick="requestDriver('Mike Johnson')" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Request This Driver</button>
                    </div>
                </div>
            `;
            document.body.appendChild(performanceModal);
        }

        function closeDriverPerformance() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function requestDriver(driverName) {
            closeDriverPerformance();
            alert(`Driver request sent for ${driverName}. You'll be notified when they're available for your delivery.`);
        }

        // Facebook share functionality
        function openFacebookShare() {
            document.getElementById('mainMenuDropdown').classList.remove('show');
            
            const facebookModal = document.createElement('div');
            facebookModal.className = 'modal-overlay';
            facebookModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <h3 style="color: #00ffff; margin-bottom: 20px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><rect x="5" y="3" width="14" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.1)"/><path d="M9 9h6M9 13h6M9 17h4" stroke="currentColor" stroke-width="1.5"/></svg> Facebook Share Options</h3>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <button onclick="shareMarketPaceIntegration()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(99, 102, 241, 0.2)"/><path d="M18 20V10M12 20V4M6 20v-6" stroke="currentColor" stroke-width="1.5"/></svg> Share Community
                        </button>
                        <button onclick="shareItemListing()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg> Share Item
                        </button>
                        <button onclick="openIntegrationSetup()" style="background: linear-gradient(135deg, #1877f2, #42a5f5); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg> Setup Integration
                        </button>
                    </div>
                    <button onclick="closeFacebookShareModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 20px;">Close</button>
                </div>
            `;
            document.body.appendChild(facebookModal);
        }

        function closeFacebookShareModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function shareMarketPaceIntegration() {
            closeFacebookShareModal();
            const shareText = "Join MarketPace - the local community marketplace! Buy, sell, rent items and support local businesses with delivery!";
            const shareUrl = window.location.origin;
            const facebookShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}&quote=${encodeURIComponent(shareText)}`;
            window.open(facebookShareUrl, '_blank', 'width=600,height=400');
        }

        function shareItemListing() {
            closeFacebookShareModal();
            alert('Select an item from your posts to share on Facebook');
        }

        function openIntegrationSetup() {
            closeFacebookShareModal();
            window.location.href = '/facebook-marketplace-integration';
        }
        
        function inviteFriends() {
            document.getElementById('menuDropdown').classList.remove('show');
            
            // Check if user logged in with Facebook
            const user = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            
            if (user.provider === 'facebook') {
                // Facebook-specific invitation
                const inviteModal = document.createElement('div');
                inviteModal.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                    align-items: center; justify-content: center;
                `;
                
                inviteModal.innerHTML = `
                    <div style="
                        background: linear-gradient(135deg, #1a0b3d, #6b46c1); 
                        padding: 30px; border-radius: 20px; max-width: 400px; 
                        text-align: center; color: white; border: 2px solid #1877f2;
                    ">
                        <h2 style="color: #1877f2; margin-bottom: 20px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><rect x="5" y="3" width="14" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.1)"/><path d="M9 9h6M9 13h6M9 17h4" stroke="currentColor" stroke-width="1.5"/></svg> Invite Your Facebook Friends!</h2>
           e="margin-bottom: 20px; line-height: 1.5;">
                        Share MarketPace with friends in your area to build a stronger local community marketplace!
                    </p>
                    <div style="margin: 20px 0;">
                        <button onclick="copyInviteLink()" style="
                            background: #00ffff; color: #1a0b3d; border: none; 
                            padding: 12px 24px; border-radius: 25px; margin: 5px;
                            cursor: pointer; font-weight: bold;
                        "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M6 10h12M6 14h12M6 18h8" stroke="currentColor" stroke-width="1.5"/></svg> Copy Link</button>
                        <button onclick="shareInvite()" style="
                            background: #9d4edd; color: white; border: none; 
                            padding: 12px 24px; border-radius: 25px; margin: 5px;
                            cursor: pointer; font-weight: bold;
                        "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v13" stroke="currentColor" stroke-width="1.5"/></svg>Share</button>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="
                        background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); 
                        padding: 8px 20px; border-radius: 15px; cursor: pointer;
                    ">Close</button>
                </div>
            `;
            
            document.body.appendChild(inviteModal);
        }
        
        function copyInviteLink() {
            const inviteText = window.location.origin;
            navigator.clipboard.writeText(inviteText).then(() => {
                alert('MarketPace link copied to clipboard!');
            });
        }
        
        function shareInvite() {
            if (navigator.share) {
                navigator.share({
                    title: 'Join MarketPace Community',
                    text: 'Join me on MarketPace - the local community marketplace!',
                    url: window.location.origin
                });
            } else {
                copyInviteLink();
            }
        }

        function goToCart() {
            window.location.href = '/cart';
            const dropdown = document.getElementById('menuDropdown');
            if (dropdown) dropdown.classList.remove('show');
        }

        async function logout() {
            try {
                // Call server logout endpoint
                const response = await fetch('/api/logout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const result = await response.json();
                
                // Clear all user data from localStorage regardless of server response
                localStorage.removeItem('marketpaceUser');
                localStorage.removeItem('authToken');
                localStorage.removeItem('userProfile');
                localStorage.removeItem('sessionData');
                localStorage.removeItem('marketplaceCart');
                localStorage.removeItem('userFavorites');
                
                // Clear any other stored user information
                sessionStorage.clear();
                
                // Show logout confirmation
                alert('Successfully logged out. You can now test Facebook and Google authentication.');
                
                // Redirect to signup/login page
                window.location.href = '/signup-login';
                
            } catch (error) {
                console.error('Logout error:', error);
                
                // Clear local data even if server call fails
                localStorage.clear();
                sessionStorage.clear();
                
                alert('Logged out (local session cleared). You can now test authentication.');
                window.location.href = '/signup-login';
            }
            
            // Close dropdown menu if open
            const menuDropdown = document.getElementById('menuDropdown');
            if (menuDropdown) {
                menuDropdown.classList.remove('show');
            }
        }

        // End of navigation functions
        }

        // Facebook Marketplace-style posting modal
        function openAdvancedPostModal(type = 'general') {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: #1a0b3d;
                border: 2px solid #00ffff;
                border-radius: 15px;
                padding: 30px;
                width: 90%;
                max-width: 600px;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            `;
            
            modalContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="color: #00ffff; margin: 0;">Create ${type.charAt(0).toUpperCase() + type.slice(1)} Post</h2>
                    <button onclick="this.closest('.posting-modal').remove()" style="background: none; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <form id="postForm" style="color: #e2e8f0;">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00ffff;">Post Category:</label>
                        <select id="postCategory" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                            <option value="general">General</option>
                            <option value="sale">For Sale</option>
                            <option value="rent">For Rent</option>
                            <option value="service">Service</option>
                            <option value="event">Event</option>
                            <option value="job">Job/Hiring</option>
                            <option value="iso">ISO (In Search Of)</option>
                            <option value="poll">Poll</option>
                            <option value="announcement">Announcement</option>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00ffff;">Title:</label>
                        <input type="text" id="postTitle" placeholder="What are you posting about?" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;" required>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00ffff;">Description:</label>
                        <textarea id="postDescription" placeholder="Tell us more about your post..." style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0; min-height: 100px;" required></textarea>
                    </div>
                    
                    <div id="priceField" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; margin-bottom: 5px; color: #00ffff;">Price:</label>
                        <input type="text" id="postPrice" placeholder="$0.00" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                    </div>
                    
                    <div id="eventFields" style="display: none;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: #00ffff;">Event Date:</label>
                            <input type="date" id="eventDate" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: #00ffff;">Event Time:</label>
                            <input type="time" id="eventTime" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: #00ffff;">Location:</label>
                            <input type="text" id="eventLocation" placeholder="Event location" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                        </div>
                    </div>
                    
                    <div id="pollFields" style="display: none;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; color: #00ffff;">Poll Options:</label>
                            <input type="text" id="pollOption1" placeholder="Option 1" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0; margin-bottom: 10px;">
                            <input type="text" id="pollOption2" placeholder="Option 2" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 5px; color: #00ffff;">Images:</label>
                        <input type="file" id="postImages" multiple accept="image/*" style="width: 100%; padding: 10px; border: 1px solid #00ffff; border-radius: 5px; background: #2d1b69; color: #e2e8f0;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; color: #00ffff;">Action Buttons:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            <label style="display: flex; align-items: center; color: #e2e8f0;">
                                <input type="checkbox" id="deliverNow" style="margin-right: 5px;"> Deliver Now
                            </label>
                            <label style="display: flex; align-items: center; color: #e2e8f0;">
                                <input type="checkbox" id="selfPickup" style="margin-right: 5px;"> Self Pickup
                            </label>
                            <label style="display: flex; align-items: center; color: #e2e8f0;">
                                <input type="checkbox" id="bookNow" style="margin-right: 5px;"> Book Now
                            </label>
                            <label style="display: flex; align-items: center; color: #e2e8f0;">
                                <input type="checkbox" id="callNow" style="margin-right: 5px;"> Call Now
                            </label>
                            <label style="display: flex; align-items: center; color: #e2e8f0;">
                                <input type="checkbox" id="messageNow" style="margin-right: 5px;"> Message Now
                            </label>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" onclick="this.closest('.posting-modal').remove()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
                        <button type="submit" style="padding: 10px 20px; background: #00ffff; color: #1a0b3d; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Create Post</button>
                    </div>
                </form>
            `;
            
            modal.className = 'posting-modal';
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // Set initial category
            document.getElementById('postCategory').value = type;
            updateFormFields();
            
            // Add event listeners
            document.getElementById('postCategory').addEventListener('change', updateFormFields);
            document.getElementById('postForm').addEventListener('submit', handlePostSubmit);
            
            function updateFormFields() {
                const category = document.getElementById('postCategory').value;
                const priceField = document.getElementById('priceField');
                const eventFields = document.getElementById('eventFields');
                const pollFields = document.getElementById('pollFields');
                
                // Hide all conditional fields
                priceField.style.display = 'none';
                eventFields.style.display = 'none';
                pollFields.style.display = 'none';
                
                // Show relevant fields based on category
                if (category === 'sale' || category === 'service' || category === 'rent') {
                    priceField.style.display = 'block';
                }
                
                if (category === 'event') {
                    eventFields.style.display = 'block';
                }
                
                if (category === 'poll') {
                    pollFields.style.display = 'block';
                }
            }
            
            function handlePostSubmit(e) {
                e.preventDefault();
                
                const formData = {
                    category: document.getElementById('postCategory').value,
                    title: document.getElementById('postTitle').value,
                    description: document.getElementById('postDescription').value,
                    price: document.getElementById('postPrice').value,
                    eventDate: document.getElementById('eventDate').value,
                    eventTime: document.getElementById('eventTime').value,
                    eventLocation: document.getElementById('eventLocation').value,
                    pollOption1: document.getElementById('pollOption1').value,
                    pollOption2: document.getElementById('pollOption2').value,
                    actionButtons: {
                        deliverNow: document.getElementById('deliverNow').checked,
                        selfPickup: document.getElementById('selfPickup').checked,
                        bookNow: document.getElementById('bookNow').checked,
                        callNow: document.getElementById('callNow').checked,
                        messageNow: document.getElementById('messageNow').checked
                    },
                    created: new Date().toISOString(),
                    author: 'Community Member'
                };
                
                // Save to localStorage
                const existingPosts = JSON.parse(localStorage.getItem('communityPosts') || '[]');
                existingPosts.unshift(formData);
                localStorage.setItem('communityPosts', JSON.stringify(existingPosts));
                
                // Close modal
                modal.remove();
                
                // Show success message
                showNotification(`‚úÖ ${formData.category.charAt(0).toUpperCase() + formData.category.slice(1)} post "${formData.title}" created successfully!`, 'success');
                
                // Refresh page to show new post
                setTimeout(() => location.reload(), 1000);
            }
        }

        // Post creation
        function createPost(type = 'general') {
            openAdvancedPostModal(type);
        }

        // Commerce functions
        function addToCart(itemName, price = null, seller = null, image = null) {
            // Get or create cart data
            let cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            
            // Generate item data
            const newItem = {
                id: Date.now(),
                name: itemName,
                seller: seller || "Local Seller",
                price: price || 25.00,
                image: image || "https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",
                size: "small",
                available: true,
                availabilityStatus: Math.random() > 0.7 ? "limited" : "available"
            };
            
            // Add to cart
            cartData.items.push(newItem);
            
            // Save to localStorage
            localStorage.setItem('marketplaceCart', JSON.stringify(cartData));
            
            // Update cart badge
            updateCartBadge();
            
            // Show notification
            showNotification(`"${itemName}" added to cart!`, 'success');
        }
        
        // Update cart badge
        function updateCartBadge() {
            const cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.textContent = cartData.items.length;
                badge.style.display = cartData.items.length > 0 ? 'inline-block' : 'none';
            }
        }
        
        // Show notification function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                max-width: 300px;
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = 'rgba(34, 197, 94, 0.9)';
                    break;
                case 'error':
                    notification.style.background = 'rgba(239, 68, 68, 0.9)';
                    break;
                case 'warning':
                    notification.style.background = 'rgba(251, 191, 36, 0.9)';
                    break;
                default:
                    notification.style.background = 'rgba(59, 130, 246, 0.9)';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        function makeOffer(item) {
            const offer = prompt(`Make an offer for "${item}":`);
            if (offer) {
                alert(`Offer of $${offer} sent for "${item}"!`);
            }
        }

        function callService(serviceName) {
            // In a real app, this would use device calling functionality
            if (window.location.protocol === 'tel:') {
                window.location.href = 'tel:+1234567890'; // Service phone number
            } else {
                const confirmCall = confirm(`Call ${serviceName} service now?\n\nPhone: (123) 456-7890`);
                if (confirmCall) {
                    window.open('tel:+1234567890', '_self');
                }
            }
        }

        function deliverNow(item, price = null, seller = null, image = null) {
            // Add item to cart first
            addToCart(item, price, seller, image);
            
            // Show success message
            showNotification(`‚úÖ ${item} added to cart! Redirecting to checkout...`, 'success');
            
            // Navigate to cart page after brief delay
            setTimeout(() => {
                window.location.href = '/cart';
            }, 1500);
        }

        function rentNow(item) {
            alert(`Booking rental for "${item}"`);
        }

        function bookService(service) {
            alert(`Booking "${service}" service`);
        }

        // Social interaction functions
        function likePost(button) {
            if (button.innerHTML.includes('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>')) {
                button.innerHTML = '‚ù§Ô∏è Like';
                button.style.color = '#ff6b6b';
            } else {
                button.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5"/></svg>Like';
                button.style.color = 'rgba(255, 255, 255, 0.8)';
            }
        }

        function favoritePost(button) {
            if (button.innerHTML.includes('Favorite')) {
                button.innerHTML = '‚≠ê Favorite';
                button.style.color = '#ffd93d';
            } else {
                button.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5"/></svg>Favorite';
                button.style.color = 'rgba(255, 255, 255, 0.8)';
            }
        }

        function commentPost(postElement) {
            // Get the post element if not provided
            if (!postElement) {
                postElement = event.target.closest('.feed-post');
            }
            
            // Check if comment section already exists
            let commentSection = postElement.querySelector('.comments-section');
            if (!commentSection) {
                // Create comment section
                commentSection = document.createElement('div');
                commentSection.className = 'comments-section';
                commentSection.innerHTML = `
                    <div class="comment-input-section">
                        <input type="text" class="comment-input" placeholder="Write a comment..." style="
                            width: 100%; 
                            padding: 10px; 
                            background: rgba(255,255,255,0.1); 
                            border: 1px solid rgba(255,255,255,0.2); 
                            border-radius: 20px; 
                            color: white; 
                            margin: 10px 0;
                        ">
                        <button onclick="postComment(this)" style="
                            background: linear-gradient(135deg, #00ffff, #9d4edd);
                            border: none;
                            color: white;
                            padding: 8px 16px;
                            border-radius: 15px;
                            cursor: pointer;
                            margin-left: 10px;
                        ">Post</button>
                    </div>
                    <div class="comments-list"></div>
                `;
                postElement.appendChild(commentSection);
            }
            
            // Focus on comment input
            const commentInput = commentSection.querySelector('.comment-input');
            commentInput.focus();
        }

        function sharePost() {
            if (navigator.share) {
                navigator.share({
                    title: 'MarketPace Community Post',
                    text: 'Check out this post on MarketPace!',
                    url: window.location.href
                });
            } else {
                // Fallback for browsers without native sharing
                const url = window.location.href;
                navigator.clipboard.writeText(url).then(() => {
                    alert('Post link copied to clipboard!');
                }).catch(() => {
                    alert('Share feature - link: ' + url);
                });
            }
        }

        // Check if user is logged in
        function checkLoginStatus() {
            // Check for OAuth user data in URL params
            const urlParams = new URLSearchParams(window.location.search);
            const userParam = urlParams.get('user');
            
            if (userParam) {
                // Store OAuth user data in localStorage
                const userData = JSON.parse(decodeURIComponent(userParam));
                localStorage.setItem('marketpaceUser', JSON.stringify(userData));
                
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
                
                // Update profile display
                updateProfileDisplay(userData);
                return;
            }
            
            // Check localStorage for existing user
            const userData = localStorage.getItem('marketpaceUser');
            if (!userData) {
                // Not logged in, redirect to landing page
                window.location.href = '/';
                return;
            }
            
            const user = JSON.parse(userData);
            if (!user.loggedIn) {
                window.location.href = '/';
                return;
            }
            
            updateProfileDisplay(user);
        }
        
        function updateProfileDisplay(user) {
            // Update profile display with user info
            if (user.profilePicture) {
                // Use Facebook profile picture for main profile button
                const mainProfilePic = document.getElementById('profileMainPicture');
                const mainProfileInitials = document.getElementById('profileMainInitials');
                if (mainProfilePic && mainProfileInitials) {
                    mainProfilePic.src = user.profilePicture;
                    mainProfilePic.style.display = 'block';
                    mainProfileInitials.style.display = 'none';
                }
                
                // Update all other profile pics in posts
                document.querySelectorAll('.profile-pic').forEach(pic => {
                    pic.innerHTML = `<img src="${user.profilePicture}" alt="${user.name}" style="width: 100%; height: 100%; border-radius: 6px; object-fit: cover;">`;
                });
            } else if (user.name) {
                const initials = user.name.split(' ').map(n => n[0]).join('').toUpperCase();
                
                // Update main profile button
                const mainProfileInitials = document.getElementById('profileMainInitials');
                if (mainProfileInitials) {
                    mainProfileInitials.textContent = initials;
                }
                
                // Update other profile pics
                document.querySelectorAll('.profile-pic span').forEach(span => {
                    span.textContent = initials;
                });
            } else if (user.email) {
                const initials = user.email.substring(0, 2).toUpperCase();
                
                // Update main profile button
                const mainProfileInitials = document.getElementById('profileMainInitials');
                if (mainProfileInitials) {
                    mainProfileInitials.textContent = initials;
                }
                
                // Update other profile pics
                document.querySelectorAll('.profile-pic span').forEach(span => {
                    span.textContent = initials;
                });
            }
            
            // Update any display name elements
            if (user.name) {
                document.querySelectorAll('.user-name').forEach(nameEl => {
                    nameEl.textContent = user.name;
                });
                
                // Update placeholder text to use real name
                const statusInput = document.querySelector('.status-input');
                if (statusInput) {
                    statusInput.placeholder = `${user.name.split(' ')[0]}, share with your community!`;
                }
            }
        }

        function showFacebookWelcomeInvite() {
            const welcomeModal = document.createElement('div');
            welcomeModal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.9); z-index: 10000; display: flex; 
                align-items: center; justify-content: center;
            `;
            
            welcomeModal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a0b3d, #6b46c1); 
                    padding: 40px; border-radius: 20px; max-width: 450px; 
                    text-align: center; color: white; border: 3px solid #1877f2;
                    box-shadow: 0 20px 60px rgba(24, 119, 242, 0.3);
                ">
                    <h1 style="color: #1877f2; margin-bottom: 20px; font-size: 28px;"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(236, 72, 153, 0.2)"/><path d="M12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2Z" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.3)"/></svg> Welcome to MarketPace!</h1>
                    <p style="margin-bottom: 25px; line-height: 1.6; font-size: 16px;">
                        Hey Brooke! Thanks for joining with Facebook. Want to invite your Facebook friends 
                        to join the MarketPace community? The more neighbors we have, the better our local marketplace becomes!
                    </p>
                    <div style="margin: 25px 0;">
                        <button onclick="shareFacebookPost(); this.parentElement.parentElement.parentElement.remove();" style="
                            background: #1877f2; color: white; border: none; 
                            padding: 15px 25px; border-radius: 25px; margin: 8px;
                            cursor: pointer; font-weight: bold; font-size: 14px;
                        "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="1.5"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="1.5"/></svg> Share on Facebook</button>
                        <button onclick="sendFacebookMessage(); this.parentElement.parentElement.parentElement.remove();" style="
                            background: #42a5f5; color: white; border: none; 
                            padding: 15px 25px; border-radius: 25px; margin: 8px;
                            cursor: pointer; font-weight: bold; font-size: 14px;
                        "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg> Message Friends</button>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="
                        background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); 
                        padding: 10px 25px; border-radius: 15px; cursor: pointer; margin-top: 10px;
                    ">Maybe Later</button>
                </div>
            `;
            
            document.body.appendChild(welcomeModal);
        }

        function createLogoParticles() {
            const logoParticlesContainer = document.getElementById('logoParticles');
            if (!logoParticlesContainer) {
                console.log('Logo particles container not found, skipping...');
                return;
            }
            
            // Create 8 logo particles for bigger logo
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'logo-particle';
                
                // Random starting position around the logo
                const angle = (360 / 8) * i + Math.random() * 20;
                particle.style.setProperty('--start-angle', angle + 'deg');
                particle.style.animationDelay = (i * 0.3) + 's';
                
                logoParticlesContainer.appendChild(particle);
            }
        }

        // Advanced Post Modal Functions
        function openAdvancedPostModal(category = 'general') {
            const modal = document.getElementById('postModal');
            const modalTitle = document.getElementById('modalTitle');
            
            // Set modal title based on category
            const titles = {
                'general': 'Share with Community',
                'sale': 'List Item for Sale',
                'rent': 'List Item for Rent',
                'service': 'Offer Service',
                'event': 'Create Event',
                'poll': 'Create Poll',
                'iso': 'In Search Of (ISO)',
                'job': 'Post Job Opportunity'
            };
            
            modalTitle.textContent = titles[category] || 'Create Post';
            
            // Pre-select category
            selectCategory(category);
            
            // Show/hide relevant fields
            toggleFieldsForCategory(category);
            
            modal.style.display = 'flex';
        }

        function closePostModal() {
            document.getElementById('postModal').style.display = 'none';
            document.getElementById('advancedPostForm').reset();
            clearCategorySelection();
        }

        function selectCategory(category) {
            // Clear previous selections
            clearCategorySelection();
            
            // Select new category
            const categoryBtn = document.querySelector(`[data-category="${category}"]`);
            if (categoryBtn) {
                categoryBtn.classList.add('selected');
            }
            
            toggleFieldsForCategory(category);
        }

        function clearCategorySelection() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        function toggleFieldsForCategory(category) {
            const priceGroup = document.getElementById('priceGroup');
            const pollOptions = document.getElementById('pollOptions');
            const jobCompanyGroup = document.getElementById('jobCompanyGroup');
            const jobTypeGroup = document.getElementById('jobTypeGroup');
            const jobSalaryGroup = document.getElementById('jobSalaryGroup');
            const jobRequirementsGroup = document.getElementById('jobRequirementsGroup');
            const jobBenefitsGroup = document.getElementById('jobBenefitsGroup');
            
            // Hide all optional fields first
            priceGroup.style.display = 'none';
            pollOptions.style.display = 'none';
            jobCompanyGroup.style.display = 'none';
            jobTypeGroup.style.display = 'none';
            jobSalaryGroup.style.display = 'none';
            jobRequirementsGroup.style.display = 'none';
            jobBenefitsGroup.style.display = 'none';
            
            // Show relevant fields
            if (['sale', 'rent', 'service'].includes(category)) {
                priceGroup.style.display = 'block';
            }
            
            if (category === 'poll') {
                pollOptions.style.display = 'block';
            }
            
            if (category === 'job') {
                jobCompanyGroup.style.display = 'block';
                jobTypeGroup.style.display = 'block';
                jobSalaryGroup.style.display = 'block';
                jobRequirementsGroup.style.display = 'block';
                jobBenefitsGroup.style.display = 'block';
            }
        }

        function addPollOption() {
            const pollList = document.getElementById('pollOptionsList');
            const optionDiv = document.createElement('div');
            optionDiv.className = 'poll-option';
            optionDiv.innerHTML = `
                <input type="text" class="form-input" placeholder="Option ${pollList.children.length + 1}">
                <button type="button" class="remove-option" onclick="removePollOption(this)">√ó</button>
            `;
            pollList.appendChild(optionDiv);
        }

        function removePollOption(button) {
            const pollList = document.getElementById('pollOptionsList');
            if (pollList.children.length > 2) {
                button.parentElement.remove();
            }
        }

        // Search Popup Functions
        function toggleSearchPopup() {
            // Search popup removed - now using inline category buttons
            console.log('Search activated - categories shown in header');
        }

        function changeRadius() {
            const currentRadius = localStorage.getItem('searchRadius') || '30';
            const radiusOptions = ['5', '10', '15', '30', '50'];
            const currentIndex = radiusOptions.indexOf(currentRadius);
            const nextIndex = (currentIndex + 1) % radiusOptions.length;
            const newRadius = radiusOptions[nextIndex];
            
            localStorage.setItem('searchRadius', newRadius);
            document.getElementById('searchInput').placeholder = `Search ${newRadius}-mile area...`;
            
            console.log(`Search radius changed to ${newRadius} miles`);
        }



        function searchFor(category) {
            console.log('Searching for:', category);
            showNotification(`Searching ${category}...`, 'info');
            toggleSearchPopup();
            // Add actual search logic here
        }

        // Profile Modal Functions
        function openProfileModal() {
            document.getElementById('profileModal').style.display = 'flex';
            // Load user profile data
            const user = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            const initials = user.name ? user.name.split(' ').map(n => n[0]).join('').toUpperCase() : 'MP';
            document.getElementById('profilePlaceholder').textContent = initials;
        }

        function closeProfileModal() {
            document.getElementById('profileModal').style.display = 'none';
        }

        function previewProfilePic() {
            const file = document.getElementById('profilePicInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('profilePicPreview');
                    preview.innerHTML = `<img src="${e.target.result}" class="profile-avatar">`;
                };
                reader.readAsDataURL(file);
            }
        }

        function saveProfilePic() {
            const file = document.getElementById('profilePicInput').files[0];
            if (file) {
                // In a real app, upload to server
                // For demo, save to localStorage
                const reader = new FileReader();
                reader.onload = function(e) {
                    localStorage.setItem('userProfilePic', e.target.result);
                    
                    // Update profile button
                    const profileButton = document.querySelector('.profile-button');
                    profileButton.innerHTML = `<img src="${e.target.result}" class="profile-avatar">`;
                    
                    showNotification('Profile picture updated successfully!', 'success');
                    closeProfileModal();
                };
                reader.readAsDataURL(file);
            } else {
                showNotification('Please select a photo first', 'error');
            }
        }

        function useFacebookProfilePic() {
            // In a real app, fetch from Facebook API
            const user = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            if (user.profilePicture) {
                localStorage.setItem('userProfilePic', user.profilePicture);
                
                // Update profile button
                const profileButton = document.querySelector('.profile-button');
                profileButton.innerHTML = `<img src="${user.profilePicture}" class="profile-avatar">`;
                
                // Update profile preview
                const preview = document.getElementById('profilePicPreview');
                preview.innerHTML = `<img src="${user.profilePicture}" class="profile-avatar">`;
                
                showNotification('Facebook profile picture applied!', 'success');
            } else {
                showNotification('No Facebook profile picture found', 'error');
            }
        }

        function inviteFacebookFriends() {
            showNotification('Opening Facebook friend invitation...', 'info');
            
            // Create Facebook invitation modal
            const inviteModal = document.createElement('div');
            inviteModal.className = 'profile-modal';
            inviteModal.innerHTML = `
                <div class="profile-modal-content">
                    <div class="post-modal-header">
                        <h3 class="post-modal-title">Invite Facebook Friends</h3>
                        <button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()">&times;</button>
                    </div>
                    <h4 style="color: #00ffff; margin-bottom: 20px;">Share MarketPace with your friends!</h4>
                    <p style="color: white; margin-bottom: 20px;">Help your community discover local commerce and job opportunities.</p>
                    <button class="upload-btn" onclick="shareToFacebookPost()">Share as Facebook Post</button>
                    <button class="upload-btn" onclick="shareToFacebookMessenger()">Send via Messenger</button>
                    <button class="upload-btn" style="background: #ef4444;" onclick="this.parentElement.parentElement.remove()">Cancel</button>
                </div>
            `;
            document.body.appendChild(inviteModal);
        }

        function inviteContacts() {
            showNotification('Opening contact invitation...', 'info');
            
            // Create contact invitation modal  
            const inviteModal = document.createElement('div');
            inviteModal.className = 'profile-modal';
            inviteModal.innerHTML = `
                <div class="profile-modal-content">
                    <div class="post-modal-header">
                        <h3 class="post-modal-title">Invite Contacts</h3>
                        <button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()">&times;</button>
                    </div>
                    <h4 style="color: #00ffff; margin-bottom: 20px;">Join the Community</h4>
                    <p style="color: white; margin-bottom: 20px;">Share this link with friends and family:</p>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <input type="text" value="https://marketpace.shop/join" readonly style="width: 100%; background: none; border: none; color: #00ffff; text-align: center;">
                    </div>
                    <button class="upload-btn" onclick="copyInviteLink()">Copy Link</button>
                    <button class="upload-btn" onclick="shareInviteLink()">Share Link</button>
                    <button class="upload-btn" style="background: #ef4444;" onclick="this.parentElement.parentElement.remove()">Cancel</button>
                </div>
            `;
            document.body.appendChild(inviteModal);
        }

        function shareToFacebookPost() {
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://marketpace.shop')}&quote=${encodeURIComponent('Join me on MarketPace - discover local commerce, jobs, and community opportunities in our neighborhood! <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg>')}`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
            showNotification('Facebook share opened!', 'success');
        }

        function shareToFacebookMessenger() {
            const messengerUrl = `https://www.facebook.com/dialog/send?link=${encodeURIComponent('https://marketpace.shop')}&app_id=1043690817269912&redirect_uri=${encodeURIComponent(window.location.href)}`;
            window.open(messengerUrl, '_blank', 'width=600,height=400');
            showNotification('Messenger share opened!', 'success');
        }

        function copyInviteLink() {
            navigator.clipboard.writeText('https://marketpace.shop/join').then(() => {
                showNotification('Invite link copied to clipboard!', 'success');
            }).catch(() => {
                showNotification('Could not copy link', 'error');
            });
        }

        function shareInviteLink() {
            if (navigator.share) {
                navigator.share({
                    title: 'Join MarketPace',
                    text: 'Join me on MarketPace - discover local commerce and community opportunities!',
                    url: 'https://marketpace.shop/join'
                });
            } else {
                copyInviteLink();
            }
        }

        // Duplicate navigation function removed - using main one below

        // Close popups when clicking outside
        document.addEventListener('click', function(e) {
            const searchPopup = document.getElementById('searchPopup');
            const searchWrapper = document.querySelector('.search-wrapper');
            
            if (searchPopup && !searchWrapper.contains(e.target) && !searchPopup.contains(e.target)) {
                searchPopup.classList.remove('show');
            }
        });

        // Category button click handlers
        // Profile loading moved to main DOMContentLoaded

        // New function for main menu toggle
        function toggleMainMenu() {
            const dropdown = document.getElementById('mainMenuDropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.filter-btn') && !event.target.closest('.filter-dropdown')) {
                const filterDropdown = document.getElementById('filterDropdown');
                if (filterDropdown) filterDropdown.classList.remove('show');
            }
            if (!event.target.closest('.profile-main-button') && !event.target.closest('.menu-dropdown')) {
                const mainMenuDropdown = document.getElementById('mainMenuDropdown');
                if (mainMenuDropdown) mainMenuDropdown.classList.remove('show');
            }
        });

        // Initialize post types (placeholder function)
        function initializePostTypes() {
            // Function for initializing post types when needed
            console.log('Post types initialized');
        }

        // Initialize page when DOM is loaded
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            if (!particlesContainer) {
                console.log('Particles container not found, creating one...');
                const newParticlesContainer = document.createElement('div');
                newParticlesContainer.className = 'particles';
                document.body.appendChild(newParticlesContainer);
                return createParticles(); // Retry with new container
            }
            
            const particleCount = 40;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // MAIN INITIALIZATION - Single consolidated DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('MarketPace Community loading...');
            
            try {
                // Initialize all functions
                createParticles();
                createLogoParticles();
                updateCartBadge();
                checkLoginStatus();
                initializePostTypes();
                
                // Add post modal functionality
                const categoryButtons = document.querySelectorAll('.category-btn');
                categoryButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const category = this.getAttribute('data-category');
                        selectCategory(category);
                    });
                });

                // Post form submission
                const postForm = document.getElementById('advancedPostForm');
                if (postForm) {
                    postForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        showNotification('Post created successfully!', 'success');
                        closePostModal();
                    });
                }
                
                // Load saved profile picture
                const savedProfilePic = localStorage.getItem('userProfilePic');
                if (savedProfilePic) {
                    const profileButton = document.querySelector('.profile-button');
                    if (profileButton) {
                        profileButton.innerHTML = `<img src="${savedProfilePic}" class="profile-avatar">`;
                    }
                }
                
                // Facebook invite check
                if (localStorage.getItem('showFacebookInvite') === 'true') {
                    localStorage.removeItem('showFacebookInvite');
                    setTimeout(() => showFacebookWelcomeInvite(), 1500);
                }
                
                console.log('‚úÖ Community page loaded successfully');
                
                // Check for initial category filter from URL
                checkInitialCategory();
                
                setTimeout(() => {
                    showNotification('Navigation ready - all buttons active!', 'success');
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå Initialization error:', error);
                showNotification('Some features may not work. Please refresh.', 'error');
            }
        });
        
        // Filter posts by category - COMPLETELY REWRITTEN AND FUNCTIONAL
        function filterByCategory(category) {
            console.log('üîç Filtering by category:', category);
            
            // Get all posts
            const posts = document.querySelectorAll('.feed-post');
            console.log('üì¶ Found posts:', posts.length);
            
            let visibleCount = 0;
            
            // Hide/show posts based on category
            posts.forEach(post => {
                const postCategory = post.getAttribute('data-category');
                const postType = post.getAttribute('data-type');
                
                console.log('üìù Post category:', postCategory, 'type:', postType);
                
                // Show posts that match the category OR show all if category is 'all'
                if (category === 'all' || postCategory === category) {
                    post.style.display = 'block';
                    post.style.opacity = '1';
                    visibleCount++;
                } else {
                    post.style.display = 'none';
                }
            });
            
            console.log('‚úÖ Showing', visibleCount, 'posts for category:', category);
            
            // Show notification
            const categoryDisplayNames = {
                'fashion': 'Fashion & Clothing',
                'tools': 'Tools & Equipment', 
                'home-garden': 'Home & Garden Services',
                'all': 'All Categories'
            };
            
            const displayName = categoryDisplayNames[category] || category;
            
            const notification = document.createElement('div');
            notification.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/></svg> Showing ${visibleCount} ${displayName} posts`;
            notification.style.cssText = `
                position: fixed; top: 80px; left: 50%; transform: translateX(-50%);
                background: linear-gradient(135deg, #00ffff, #0080ff); color: #000;
                padding: 10px 20px; border-radius: 25px; font-weight: bold;
                z-index: 1000; font-size: 14px; box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
            `;
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
        
        // Browse category function for menu integration
        function browseCategory(category) {
            console.log('üõçÔ∏è Browsing category from menu:', category);
            
            // Navigate to community page if not already there
            if (!window.location.pathname.includes('community')) {
                window.location.href = `/community?category=${category}`;
                return;
            }
            
            // Update URL with category parameter
            const url = new URL(window.location);
            url.searchParams.set('category', category);
            window.history.pushState({}, '', url);
            
            // Apply the filter
            filterByCategory(category);
        }
        
        // Check URL parameters on page load and apply category filter
        function checkInitialCategory() {
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            if (category) {
                console.log('üéØ Initial category from URL:', category);
                filterByCategory(category);
            }
        }
        
        // Hide/show search bar on scroll
        window.addEventListener('scroll', function() {
            const searchWrapper = document.querySelector('.search-wrapper');
            if (!searchWrapper) return;
            
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > window.lastScrollTop && scrollTop > 100) {
                // Scrolling down - hide search bar
                searchWrapper.classList.add('hidden');
            } else {
                // Scrolling up - show search bar
                searchWrapper.classList.remove('hidden');
            }
            window.lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        });

        // Open full verification page for item details and delivery scheduling
        function openVerificationPage(itemName, memberName, category, price) {
            try {
                console.log(`Opening verification page for ${itemName} by ${memberName}...`);
                
                // Store item details for verification page
                localStorage.setItem('verificationItem', JSON.stringify({
                    name: itemName,
                    owner: memberName,
                    category: category,
                    price: price,
                    timestamp: Date.now()
                }));
                
                // Navigate to dedicated verification page
                window.location.href = '/item-verification';
                
                showNotification(`Opening verification for ${itemName}`, 'info');
            } catch (error) {
                console.error('Verification page error:', error);
                showNotification('Verification page error', 'error');
            }
        }

        // Go to specific member profile page
        function goToMemberProfile(memberName, initials) {
            try {
                console.log(`Navigating to ${memberName}'s profile...`);
                
                // Store member info for profile page
                localStorage.setItem('selectedMember', JSON.stringify({
                    name: memberName,
                    initials: initials,
                    verified: true
                }));
                
                // Navigate to profile page
                window.location.href = '/profile';
                
                showNotification(`Opening ${memberName}'s profile`, 'info');
            } catch (error) {
                console.error('Profile navigation error:', error);
                showNotification('Profile navigation error', 'error');
            }
        }

        // Removed duplicate DOMContentLoaded listener - consolidated below
        
        // Initialize cart badge on page load
        updateCartBadge();

        // Navigation functions for bottom navigation
        function goToPage(page) {
            console.log('Navigating to:', page);
            try {
                console.log(`Navigating to ${page}...`);
                
                switch(page) {
                    case 'home':
                        window.location.href = '/community';
                        break;
                    case 'shop':
                    case 'shops':
                        window.location.href = '/shops';
                        break;
                    case 'service':
                    case 'services':
                        window.location.href = '/services';
                        break;
                    case 'hub':
                    case 'the-hub':
                        window.location.href = '/the-hub';
                        break;
                    case 'delivery':
                        window.location.href = '/delivery';
                        break;
                    case 'rentals':
                        window.location.href = '/rentals';
                        break;
                    case 'menu':
                        window.location.href = '/marketpace-menu';
                        break;
                    case 'profile':
                        window.location.href = '/profile';
                        break;
                    case 'cart':
                        window.location.href = '/cart';
                        break;
                    case 'community':
                    case 'home':
                        showNotification('You are already on the Community page', 'info');
                        break;
                    default:
                        console.log(`Unknown page: ${page}`);
                        showNotification(`Navigation to ${page} not available yet`, 'info');
                }
            } catch (error) {
                console.error('Navigation error:', error);
                showNotification('Navigation error occurred', 'error');
            }
        }

        // Profile menu functions
        function goToProfile() {
            try {
                console.log('Going to profile...');
                window.location.href = '/profile';
            } catch (error) {
                console.error('Profile navigation error:', error);
                showNotification('Profile navigation error', 'error');
            }
        }

        function goToCart() {
            try {
                console.log('Going to cart...');
                window.location.href = '/cart';
            } catch (error) {
                console.error('Cart navigation error:', error);
                showNotification('Cart navigation error', 'error');
            }
        }

        function logout() {
            try {
                console.log('Logging out...');
                
                // Clear all stored user data
                localStorage.removeItem('marketpaceUser');
                localStorage.removeItem('cart');
                localStorage.removeItem('favorites');
                sessionStorage.clear();
                
                // Redirect to home page
                window.location.href = '/';
                
                showNotification('Logged out successfully', 'success');
            } catch (error) {
                console.error('Logout error:', error);
                showNotification('Logout completed', 'info');
                window.location.href = '/';
            }
        }

        // Filter Posts Function with Radius Integration
        function filterPosts(category) {
            // Remove active class from all filter items
            document.querySelectorAll('.filter-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked filter
            event.target.classList.add('active');
            
            console.log(`Filtering posts by: ${category}`);
            
            // Get user's current location and radius preference
            const userLocation = getUserLocation();
            const radiusPreference = localStorage.getItem('searchRadius') || '10'; // Default 10 miles
            
            // Filter feed posts based on category and radius
            const feedPosts = document.querySelectorAll('.feed-post');
            feedPosts.forEach(post => {
                let showPost = false;
                
                if (category === 'all') {
                    showPost = true;
                } else {
                    // Check category match (in real implementation, check data attributes)
                    const postCategory = post.getAttribute('data-category') || 'general';
                    showPost = (postCategory === category);
                }
                
                // Apply radius filtering for launched towns only
                if (showPost) {
                    const postLocation = post.getAttribute('data-location');
                    const postTown = post.getAttribute('data-town');
                    
                    // Check if town has launched MarketPace with active drivers
                    if (postTown && !isLaunchedTown(postTown)) {
                        showPost = false;
                    }
                    
                    // Apply radius filtering if location available
                    if (showPost && userLocation && postLocation) {
                        const distance = calculateDistance(userLocation, postLocation);
                        if (distance > parseInt(radiusPreference)) {
                            showPost = false;
                        }
                    }
                }
                
                post.style.display = showPost ? 'block' : 'none';
            });
            
            showNotification(`Showing ${category} posts within ${radiusPreference} miles`, 'info');
        }

        // Get user location from localStorage or prompt
        function getUserLocation() {
            return JSON.parse(localStorage.getItem('userLocation') || 'null');
        }

        // Check if town has launched MarketPace with active drivers and members
        function isLaunchedTown(townName) {
            const launchedTowns = [
                'Orange Beach, AL', 'Gulf Shores, AL', 'Foley, AL', 'Spanish Fort, AL',
                'Daphne, AL', 'Fairhope, AL', 'Mobile, AL', 'Pensacola, FL',
                'Destin, FL', 'Fort Walton Beach, FL', 'Panama City, FL', 'Tallahassee, FL'
            ];
            return launchedTowns.some(town => town.toLowerCase().includes(townName.toLowerCase()));
        }

        // Calculate distance between two locations (simplified)
        function calculateDistance(loc1, loc2) {
            // Simplified distance calculation (in real implementation, use proper geo calculation)
            const lat1 = loc1.lat, lon1 = loc1.lng;
            const lat2 = loc2.lat, lon2 = loc2.lng;
            
            const R = 3959; // Earth radius in miles
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Facebook Sharing Functions
        function openFacebookShare() {
            const shareModal = document.createElement('div');
            shareModal.className = 'profile-modal';
            shareModal.innerHTML = `
                <div class="profile-modal-content">
                    <div class="post-modal-header">
                        <h3 class="post-modal-title">Share to Facebook</h3>
                        <button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()">&times;</button>
                    </div>
                    <div style="margin: 20px 0;">
                        <button class="upload-btn" onclick="shareMarketPaceToFacebook()">Share MarketPace Community</button>
                        <button class="upload-btn" onclick="shareSpecificItemToFacebook()">Share Specific Item</button>
                        <button class="upload-btn" onclick="openMarketplaceIntegration()">Setup Marketplace Integration</button>
                    </div>
                </div>
            `;
            document.body.appendChild(shareModal);
        }

        function shareMarketPaceToFacebook() {
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://marketpace.shop')}&quote=${encodeURIComponent('Join me on MarketPace - discover local commerce, jobs, and community opportunities!')}`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
            showNotification('Facebook share opened!', 'success');
        }

        function shareSpecificItemToFacebook() {
            const shareUrl = `https://www.facebook.com/marketplace/create/`;
            window.open(shareUrl, '_blank');
            showNotification('Opening Facebook Marketplace...', 'info');
        }

        function openMarketplaceIntegration() {
            window.location.href = '/facebook-marketplace-integration';
        }

        // Add missing functions for integrated platforms
        function shareMarketPaceIntegration() {
            // Clean Facebook share text without complex SVG paths
            const shareText = 'Join me on MarketPace - discover local commerce, jobs, and community opportunities!';
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://marketpace.shop')}&quote=${encodeURIComponent(shareText)}`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
            showNotification('Facebook share opened!', 'success');
        }

        function goToMyProfile() {
            console.log('Going to My Profile...');
            window.location.href = '/profile';
        }

        function goToSettings() {
            window.location.href = '/settings';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToDeliveries() {
            window.location.href = '/delivery';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToSponsor() {
            window.location.href = '/sponsorship.html';
            document.getElementById('menuDropdown').classList.remove('show');
        }

        function goToSecurity() {
            window.location.href = '/security';
            document.getElementById('menuDropdown').classList.remove('show');
        }
        
        // Notification preferences
        let notificationPreferences = JSON.parse(localStorage.getItem('notificationPreferences') || '{}');
        
        function toggleNotificationPreference(category) {
            notificationPreferences[category] = !notificationPreferences[category];
            localStorage.setItem('notificationPreferences', JSON.stringify(notificationPreferences));
            
            // Update UI indicator in menu
            if (window.parent && window.parent.updateNotificationIndicator) {
                window.parent.updateNotificationIndicator(category, notificationPreferences[category]);
            }
            
            showNotification(
                `${notificationPreferences[category] ? 'Enabled' : 'Disabled'} notifications for ${category.replace('-', ' & ')}`,
                notificationPreferences[category] ? '#10b981' : '#f59e0b'
            );
        }
        
        // Initialize page - check for category filter from URL parameters
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Community page initialized');
            
            // Check for category parameter in URL
            const urlParams = new URLSearchParams(window.location.search);
            const categoryParam = urlParams.get('category');
            
            if (categoryParam) {
                console.log('Filtering by category from URL:', categoryParam);
                setTimeout(() => {
                    filterByCategory(categoryParam);
                }, 500); // Small delay to ensure posts are loaded
            }
            
            // Setup notification listeners
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'filterCategory') {
                    filterByCategory(event.data.category);
                }
            });
        });

        // ==================== COMPREHENSIVE FACEBOOK-STYLE COMMENT SYSTEM ====================
        
        // Main comment function that creates comment interface
        function commentPost(postElement) {
            // Get the post element if not provided
            if (!postElement) {
                postElement = event.target.closest('.feed-post');
            }
            
            // Check if comment section already exists
            let commentSection = postElement.querySelector('.comments-section');
            if (!commentSection) {
                // Create comment section
                commentSection = document.createElement('div');
                commentSection.className = 'comments-section';
                commentSection.innerHTML = `
                    <div class="comment-input-section">
                        <input type="text" class="comment-input" placeholder="Write a comment..." style="
                            width: 100%; 
                            padding: 10px; 
                            background: rgba(255,255,255,0.1); 
                            border: 1px solid rgba(255,255,255,0.2); 
                            border-radius: 20px; 
                            color: white; 
                            margin: 10px 0;
                        ">
                        <button onclick="postComment(this)" style="
                            background: linear-gradient(135deg, #00ffff, #9d4edd);
                            border: none;
                            color: white;
                            padding: 8px 16px;
                            border-radius: 15px;
                            cursor: pointer;
                            margin-left: 10px;
                        ">Post</button>
                    </div>
                    <div class="comments-list"></div>
                `;
                postElement.appendChild(commentSection);
            }
            
            // Focus on comment input
            const commentInput = commentSection.querySelector('.comment-input');
            commentInput.focus();
        }

        // Post comment function
        function postComment(buttonElement) {
            const commentSection = buttonElement.closest('.comment-input-section');
            const commentInput = commentSection.querySelector('.comment-input');
            const commentText = commentInput.value.trim();
            
            if (!commentText) return;
            
            const commentsList = commentSection.nextElementSibling;
            const currentUser = JSON.parse(localStorage.getItem('marketpaceUser')) || { name: 'Community Member', id: 'user_' + Date.now() };
            
            const commentElement = document.createElement('div');
            commentElement.className = 'comment-item';
            commentElement.style.cssText = `
                background: rgba(255,255,255,0.05);
                border-radius: 10px;
                padding: 10px;
                margin: 8px 0;
                border: 1px solid rgba(255,255,255,0.1);
            `;
            
            commentElement.innerHTML = `
                <div class="comment-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                    <div style="display: flex; align-items: center;">
                        <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #00ffff, #9d4edd); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 8px; font-size: 12px; font-weight: bold;">
                            ${currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase()}
                        </div>
                        <span style="font-weight: 600; font-size: 14px;">${currentUser.name}</span>
                        <span style="color: rgba(255,255,255,0.6); font-size: 12px; margin-left: 8px;">just now</span>
                    </div>
                    <button onclick="deleteComment(this)" style="background: none; border: none; color: rgba(255,255,255,0.5); cursor: pointer; padding: 2px 6px;">√ó</button>
                </div>
                <div class="comment-text" style="font-size: 14px; line-height: 1.4; margin-bottom: 8px;">${commentText}</div>
                <div class="comment-actions" style="display: flex; gap: 15px; font-size: 12px;">
                    <button onclick="likeComment(this)" style="background: none; border: none; color: rgba(255,255,255,0.7); cursor: pointer;">üëç Like</button>
                    <button onclick="replyToComment(this)" style="background: none; border: none; color: rgba(255,255,255,0.7); cursor: pointer;">üí¨ Reply</button>
                </div>
                <div class="replies-section" style="margin-left: 20px; margin-top: 10px;"></div>
            `;
            
            commentsList.appendChild(commentElement);
            commentInput.value = '';
            
            showNotification('‚úÖ Comment posted successfully!', 'success');
        }

        // Delete comment function (only authors can delete their comments)
        function deleteComment(buttonElement) {
            if (confirm('Delete this comment?')) {
                buttonElement.closest('.comment-item').remove();
                showNotification('Comment deleted', 'info');
            }
        }

        // Like comment function
        function likeComment(buttonElement) {
            const isLiked = buttonElement.style.color === 'rgb(0, 255, 255)';
            if (isLiked) {
                buttonElement.style.color = 'rgba(255,255,255,0.7)';
                buttonElement.textContent = 'üëç Like';
            } else {
                buttonElement.style.color = '#00ffff';
                buttonElement.textContent = 'üëç Liked';
            }
        }

        // Reply to comment function
        function replyToComment(buttonElement) {
            const repliesSection = buttonElement.closest('.comment-item').querySelector('.replies-section');
            
            if (!repliesSection.querySelector('.reply-input')) {
                const replyInput = document.createElement('div');
                replyInput.className = 'reply-input';
                replyInput.innerHTML = `
                    <input type="text" placeholder="Write a reply..." style="
                        width: 100%; 
                        padding: 8px; 
                        background: rgba(255,255,255,0.1); 
                        border: 1px solid rgba(255,255,255,0.2); 
                        border-radius: 15px; 
                        color: white; 
                        margin: 5px 0;
                        font-size: 12px;
                    ">
                    <button onclick="postReply(this)" style="
                        background: linear-gradient(135deg, #00ffff, #9d4edd);
                        border: none;
                        color: white;
                        padding: 6px 12px;
                        border-radius: 12px;
                        cursor: pointer;
                        margin-left: 8px;
                        font-size: 12px;
                    ">Reply</button>
                `;
                repliesSection.appendChild(replyInput);
                replyInput.querySelector('input').focus();
            }
        }

        // Post reply function
        function postReply(buttonElement) {
            const replyInput = buttonElement.previousElementSibling;
            const replyText = replyInput.value.trim();
            
            if (!replyText) return;
            
            const currentUser = JSON.parse(localStorage.getItem('marketpaceUser')) || { name: 'Community Member' };
            const repliesSection = buttonElement.closest('.replies-section');
            
            const replyElement = document.createElement('div');
            replyElement.className = 'reply-item';
            replyElement.style.cssText = `
                background: rgba(255,255,255,0.03);
                border-radius: 8px;
                padding: 8px;
                margin: 5px 0;
                border-left: 2px solid #00ffff;
            `;
            
            replyElement.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                    <div style="display: flex; align-items: center;">
                        <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #00ffff, #9d4edd); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 6px; font-size: 10px; font-weight: bold;">
                            ${currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase()}
                        </div>
                        <span style="font-weight: 600; font-size: 12px;">${currentUser.name}</span>
                        <span style="color: rgba(255,255,255,0.6); font-size: 10px; margin-left: 6px;">just now</span>
                    </div>
                    <button onclick="deleteComment(this)" style="background: none; border: none; color: rgba(255,255,255,0.5); cursor: pointer; padding: 2px 4px; font-size: 10px;">√ó</button>
                </div>
                <div style="font-size: 12px; line-height: 1.3;">${replyText}</div>
            `;
            
            repliesSection.insertBefore(replyElement, repliesSection.querySelector('.reply-input'));
            buttonElement.closest('.reply-input').remove();
            
            showNotification('‚úÖ Reply posted!', 'success');
        }

        // ==================== FACEBOOK FRIEND INVITE SYSTEM ====================
        
        // Facebook friend invite functions
        function shareFacebookPost() {
            const message = `üèòÔ∏è Hey friends! I just joined MarketPace - a new community marketplace for our neighborhood! 

‚ú® Buy, sell, rent items locally
üöö Get delivery from neighbors  
ü§ù Support local businesses
üåü Build stronger community connections

Join me at: https://www.marketpace.shop

Let's keep our money circulating locally and support each other! üí™

#MarketPace #LocalCommunity #NeighborToNeighbor`;

            if (navigator.share) {
                navigator.share({
                    title: 'Join me on MarketPace!',
                    text: message,
                    url: 'https://www.marketpace.shop'
                });
            } else {
                // Facebook sharing fallback
                const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://www.marketpace.shop')}&quote=${encodeURIComponent(message)}`;
                window.open(facebookUrl, '_blank', 'width=600,height=400');
            }
            
            showNotification('‚úÖ Shared to Facebook successfully!', 'success');
        }

        function sendFacebookMessage() {
            const message = `Hey! I just joined MarketPace - a community marketplace for our neighborhood. You can buy, sell, and rent items locally with delivery! Check it out: https://www.marketpace.shop`;
            
            // Open Facebook Messenger
            const messengerUrl = `https://m.me/?text=${encodeURIComponent(message)}`;
            window.open(messengerUrl, '_blank');
            
            showNotification('‚úÖ Opening Facebook Messenger...', 'success');
        }

        // ==================== ENHANCED CART FUNCTIONALITY ====================
        
        // Enhanced addToCart function with better success messaging
        function addToCartEnhanced(itemName, price, seller, imageUrl) {
            // Get or create cart data
            let cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            
            // Check if item already exists in cart
            const existingItem = cartData.items.find(item => item.name === itemName && item.seller === seller);
            
            if (existingItem) {
                showNotification(`${itemName} is already in your cart!`, 'info');
                return;
            }
            
            // Generate item data
            const newItem = {
                id: Date.now(),
                name: itemName,
                seller: seller || "Local Seller",
                price: price || 25.00,
                image: imageUrl || "https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",
                addedAt: new Date().toISOString()
            };
            
            cartData.items.push(newItem);
            localStorage.setItem('marketplaceCart', JSON.stringify(cartData));
            
            // Show success notification with cart count
            const cartCount = cartData.items.length;
            showNotification(`‚úÖ ${itemName} added to cart! (${cartCount} item${cartCount > 1 ? 's' : ''})`, 'success');
            
            // Update cart badge if exists
            updateCartBadge(cartCount);
        }

        // Update cart badge display
        function updateCartBadge(count) {
            const cartBadges = document.querySelectorAll('.cart-badge, .notification-badge');
            cartBadges.forEach(badge => {
                if (count > 0) {
                    badge.textContent = count;
                    badge.style.display = 'block';
                } else {
                    badge.style.display = 'none';
                }
            });
        }

        // Initialize cart badge on page load
        document.addEventListener('DOMContentLoaded', function() {
            const cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            updateCartBadge(cartData.items.length);
        });

        // ==================== SELLER PAYMENT FLOW WITH COMMISSION HANDLING ====================
        
        // Process seller payment with MarketPace commission
        function processSellerPayment(orderId, totalAmount, sellerId) {
            const commission = totalAmount * 0.05; // 5% MarketPace commission
            const sellerPayout = totalAmount - commission;
            const deliveryFeeSplit = 3.00; // $4 pickup + $2 drop, seller pays half
            const protectionFee = 0.50;
            
            // Calculate final seller amount
            const finalSellerAmount = sellerPayout - deliveryFeeSplit - protectionFee;
            
            console.log('Payment Processing:', {
                orderId,
                totalAmount: totalAmount.toFixed(2),
                commission: commission.toFixed(2),
                deliveryFeeSplit: deliveryFeeSplit.toFixed(2),
                protectionFee: protectionFee.toFixed(2),
                finalSellerAmount: finalSellerAmount.toFixed(2)
            });
            
            // Hold payment until buyer accepts item
            const paymentHold = {
                orderId,
                sellerId,
                amount: finalSellerAmount,
                status: 'held', // held, released, disputed
                holdReason: 'awaiting_buyer_acceptance',
                createdAt: new Date().toISOString()
            };
            
            // Store in localStorage (in production, this would be server-side)
            let heldPayments = JSON.parse(localStorage.getItem('heldPayments')) || [];
            heldPayments.push(paymentHold);
            localStorage.setItem('heldPayments', JSON.stringify(heldPayments));
            
            return paymentHold;
        }

        // Release payment when buyer accepts item
        function releaseBuyerAcceptedPayment(orderId) {
            let heldPayments = JSON.parse(localStorage.getItem('heldPayments')) || [];
            const paymentIndex = heldPayments.findIndex(p => p.orderId === orderId);
            
            if (paymentIndex !== -1) {
                heldPayments[paymentIndex].status = 'released';
                heldPayments[paymentIndex].releasedAt = new Date().toISOString();
                localStorage.setItem('heldPayments', JSON.stringify(heldPayments));
                
                showNotification(`üí∞ Payment of $${heldPayments[paymentIndex].amount.toFixed(2)} released to seller!`, 'success');
                
                // Send notification to seller (in production, this would trigger SMS/email)
                console.log('Seller notification: Payment released for order', orderId);
                
                return true;
            }
            
            return false;
        }

        // Handle return scenarios with $2 drop fee + mileage
        function processReturnPayment(orderId, mileage) {
            const dropFee = 2.00;
            const mileageFee = mileage * 0.50;
            const returnFee = dropFee + mileageFee;
            
            let heldPayments = JSON.parse(localStorage.getItem('heldPayments')) || [];
            const paymentIndex = heldPayments.findIndex(p => p.orderId === orderId);
            
            if (paymentIndex !== -1) {
                const originalAmount = heldPayments[paymentIndex].amount;
                const refundToSeller = originalAmount - returnFee;
                
                heldPayments[paymentIndex].status = 'returned';
                heldPayments[paymentIndex].returnFee = returnFee;
                heldPayments[paymentIndex].sellerRefund = refundToSeller;
                heldPayments[paymentIndex].returnedAt = new Date().toISOString();
                
                localStorage.setItem('heldPayments', JSON.stringify(heldPayments));
                
                console.log('Return processed:', {
                    orderId,
                    originalAmount: originalAmount.toFixed(2),
                    returnFee: returnFee.toFixed(2),
                    sellerRefund: refundToSeller.toFixed(2)
                });
                
                return { returnFee, sellerRefund };
            }
            
            return null;
        }

        // ==================== TIP SYSTEM FOR DRIVERS ====================
        
        // Enhanced tip system
        function addDriverTip(amount, driverId, orderId) {
            const tip = {
                id: Date.now(),
                driverId,
                orderId,
                amount: parseFloat(amount),
                createdAt: new Date().toISOString(),
                status: 'pending' // pending, processed
            };
            
            let driverTips = JSON.parse(localStorage.getItem('driverTips')) || [];
            driverTips.push(tip);
            localStorage.setItem('driverTips', JSON.stringify(driverTips));
            
            showNotification(`üíù $${amount} tip added for driver! 100% goes directly to them.`, 'success');
            
            return tip;
        }

        // Process all tips for a driver
        function processDriverTips(driverId) {
            let driverTips = JSON.parse(localStorage.getItem('driverTips')) || [];
            const pendingTips = driverTips.filter(tip => tip.driverId === driverId && tip.status === 'pending');
            
            const totalTips = pendingTips.reduce((sum, tip) => sum + tip.amount, 0);
            
            // Mark tips as processed
            driverTips = driverTips.map(tip => {
                if (tip.driverId === driverId && tip.status === 'pending') {
                    tip.status = 'processed';
                    tip.processedAt = new Date().toISOString();
                }
                return tip;
            });
            
            localStorage.setItem('driverTips', JSON.stringify(driverTips));
            
            return { totalTips, processedCount: pendingTips.length };
        }

        // ==================== ENHANCED NOTIFICATION SYSTEM ====================
        
        // Send notification to seller when item purchased
        function notifySellerPurchase(itemName, buyerName, orderId, deliveryMethod) {
            const notification = {
                id: Date.now(),
                type: 'purchase',
                sellerId: 'current_seller', // In production, get from item data
                title: 'üõí New Purchase!',
                message: `${buyerName} just bought your "${itemName}"! Order #${orderId}`,
                deliveryInfo: deliveryMethod,
                createdAt: new Date().toISOString(),
                read: false
            };
            
            // Store notification
            let sellerNotifications = JSON.parse(localStorage.getItem('sellerNotifications')) || [];
            sellerNotifications.unshift(notification);
            localStorage.setItem('sellerNotifications', JSON.stringify(sellerNotifications));
            
            // Show success message
            showNotification('‚úÖ Seller has been notified of your purchase!', 'success');
            
            // In production, this would trigger SMS/email to seller
            console.log('Seller notification sent:', notification);
        }



        // Load cart count on page initialization and update comment buttons
        document.addEventListener('DOMContentLoaded', function() {
            const cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            updateCartBadge(cartData.items.length);
            
            // Update all comment buttons with new functionality
            document.querySelectorAll('.interaction-btn').forEach(btn => {
                if (btn.textContent.includes('Comment')) {
                    btn.setAttribute('onclick', 'commentPost(this.closest(\'.feed-post\'))');
                }
            });
        });
    </script>



</body>
</html>
<!-- Booking System Scripts -->
<script src="./booking-system.js"></script>
<script src="./customer-booking.js"></script>

<script>
// Initialize booking system
document.addEventListener('DOMContentLoaded', function() {
    // Add sold badges to sold items
    setTimeout(checkAndDisplaySoldItems, 1000);
    // Add provider setup buttons
    setTimeout(addProviderSetupButtons, 1000);
});

function checkAndDisplaySoldItems() {
    const posts = document.querySelectorAll('.feed-post');
    posts.forEach(post => {
        if (post.innerHTML.includes('Vintage Leather Jacket')) {
            addSoldBadge(post);
        }
    });
}

function addSoldBadge(postElement) {
    const postContent = postElement.querySelector('.post-content');
    if (postContent && !postContent.querySelector('.sold-badge')) {
        const soldBadge = document.createElement('div');
        soldBadge.className = 'sold-badge';
        soldBadge.innerHTML = `
            <div style="position: absolute; top: 10px; right: 10px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3); z-index: 10;">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="margin-right: 4px; vertical-align: middle;">
                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/>
                    <path d="m9 12 2 2 4-4" stroke="currentColor" stroke-width="2"/>
                </svg>
                SOLD
            </div>
        `;
        postContent.style.position = 'relative';
        postContent.appendChild(soldBadge);
        
        // Disable commerce buttons
        const commerceActions = postContent.querySelectorAll('.commerce-btn');
        commerceActions.forEach(btn => {
            btn.disabled = true;
            btn.style.opacity = '0.5';
            btn.style.cursor = 'not-allowed';
        });
    }
}

function addProviderSetupButtons() {
    const servicePosts = document.querySelectorAll('.post-service');
    servicePosts.forEach(post => {
        const commerceActions = post.querySelector('.commerce-actions');
        if (commerceActions && !commerceActions.querySelector('.setup-availability-btn')) {
            const setupBtn = document.createElement('button');
            setupBtn.className = 'commerce-btn setup-availability-btn';
            setupBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)';
            setupBtn.innerHTML = `
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/>
                    <path d="M9 9h6v6h-6z" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.3)"/>
                    <path d="m9 1 0 4M15 1l0 4M1 9l22 0" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Set Availability
            `;
            setupBtn.onclick = () => setupProviderAvailability('handyman_mike', 'Mike\'s Handyman Service', 'handyman');
            commerceActions.appendChild(setupBtn);
        }
    });
}

// Global notification function
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)' : 
                    type === 'error' ? 'linear-gradient(135deg, #ef4444, #dc2626)' : 
                    'linear-gradient(135deg, #3b82f6, #2563eb)'};
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        font-size: 14px;
        max-width: 300px;
        animation: slideIn 0.3s ease-out;
    `;
    notification.innerHTML = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 3000);
}

// Self-pickup checkout functionality for rental items
function addSelfPickupToRentals() {
    const rentalPosts = document.querySelectorAll('.post-rental');
    
    rentalPosts.forEach(post => {
        const commerceActions = post.querySelector('.commerce-actions');
        if (commerceActions && !commerceActions.querySelector('.self-pickup-btn')) {
            const selfPickupBtn = document.createElement('button');
            selfPickupBtn.className = 'commerce-btn self-pickup-btn';
            selfPickupBtn.style.cssText = `
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                border: none;
                padding: 8px 15px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 12px;
                margin-left: 5px;
            `;
            selfPickupBtn.innerHTML = `
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 4px; vertical-align: middle;">
                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/>
                    <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Self-Pickup
            `;
            
            const itemName = post.querySelector('.post-text').textContent.split(' -')[0].trim();
            const priceElement = post.querySelector('.price-tag');
            const basePrice = priceElement ? parseFloat(priceElement.textContent.replace(/[^0-9.]/g, '')) : 25.00;
            
            selfPickupBtn.onclick = () => startSelfPickupFlow(itemName, basePrice);
            commerceActions.appendChild(selfPickupBtn);
        }
    });
}

function startSelfPickupFlow(itemName, basePrice) {
    const modal = document.createElement('div');
    modal.className = 'modal-overlay';
    modal.innerHTML = `
        <div class="modal-content" style="max-width: 500px;">
            <h3 style="color: #10b981; margin-bottom: 20px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                    <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(16, 185, 129, 0.2)"/>
                    <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Self-Pickup Rental: ${itemName}
            </h3>
            
            <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(16, 185, 129, 0.3);">
                <h4 style="color: #10b981; margin-bottom: 10px;">Eco-Friendly Choice!</h4>
                <p style="margin: 0; font-size: 14px;">By choosing self-pickup, you're reducing carbon emissions and supporting sustainable commerce.</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="color: #00ffff; display: block; margin-bottom: 10px;">Rental Duration:</label>
                <select id="rentalHours" style="background: rgba(0, 0, 0, 0.3); color: white; border: 1px solid rgba(0, 255, 255, 0.3); padding: 10px; border-radius: 5px; width: 100%;">
                    <option value="4">4 hours - $${(basePrice * 0.5).toFixed(2)}</option>
                    <option value="8">8 hours - $${(basePrice * 0.75).toFixed(2)}</option>
                    <option value="24" selected>Full day (24h) - $${basePrice.toFixed(2)}</option>
                    <option value="48">2 days - $${(basePrice * 1.8).toFixed(2)}</option>
                    <option value="72">3 days - $${(basePrice * 2.5).toFixed(2)}</option>
                </select>
            </div>
            
            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="color: #00ffff; margin-bottom: 10px;">Pricing Breakdown:</h4>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Rental Cost:</span>
                    <span id="displayRentalCost">$${basePrice.toFixed(2)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Delivery:</span>
                    <span style="color: #10b981;">FREE (Self-Pickup)</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Platform Sustainability Fee (5%):</span>
                    <span id="displaySustainabilityFee">$${(basePrice * 0.05).toFixed(2)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Stripe Processing Fee:</span>
                    <span id="displayStripeFee">$${((basePrice * 1.05) * 0.029 + 0.30).toFixed(2)}</span>
                </div>
                <hr style="border: none; border-top: 1px solid rgba(255, 255, 255, 0.2); margin: 10px 0;">
                <div style="display: flex; justify-content: space-between; font-weight: bold; color: #00ffff;">
                    <span>Total You Pay:</span>
                    <span id="displayTotal">$${(basePrice * 1.05 + (basePrice * 1.05) * 0.029 + 0.30).toFixed(2)}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0,255,255,0.3); color: #10b981;">
                    <span><strong>Owner Receives:</strong></span>
                    <span id="displayOwnerNet"><strong>$${(basePrice * 0.95).toFixed(2)}</strong></span>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="closeSelfPickupModal()" style="background: rgba(107, 114, 128, 0.6); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                <button onclick="proceedToSelfPickupCheckout('${itemName}', ${basePrice})" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer;">Proceed to Checkout</button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Update pricing when duration changes
    document.getElementById('rentalHours').addEventListener('change', function() {
        updateSelfPickupPricing(basePrice);
    });
}

function updateSelfPickupPricing(basePrice) {
    const hours = parseInt(document.getElementById('rentalHours').value);
    let rentalCost = basePrice;
    
    if (hours === 4) rentalCost = basePrice * 0.5;
    else if (hours === 8) rentalCost = basePrice * 0.75;
    else if (hours === 48) rentalCost = basePrice * 1.8;
    else if (hours === 72) rentalCost = basePrice * 2.5;
    
    const sustainabilityFee = rentalCost * 0.05;
    const subtotal = rentalCost + sustainabilityFee;
    const stripeFee = (subtotal * 0.029) + 0.30;
    const total = subtotal + stripeFee;
    const ownerNet = rentalCost - sustainabilityFee;
    
    document.getElementById('displayRentalCost').textContent = `$${rentalCost.toFixed(2)}`;
    document.getElementById('displaySustainabilityFee').textContent = `$${sustainabilityFee.toFixed(2)}`;
    document.getElementById('displayStripeFee').textContent = `$${stripeFee.toFixed(2)}`;
    document.getElementById('displayTotal').textContent = `$${total.toFixed(2)}`;
    document.getElementById('displayOwnerNet').textContent = `$${ownerNet.toFixed(2)}`;
}

function proceedToSelfPickupCheckout(itemName, basePrice) {
    const hours = parseInt(document.getElementById('rentalHours').value);
    let rentalCost = basePrice;
    
    if (hours === 4) rentalCost = basePrice * 0.5;
    else if (hours === 8) rentalCost = basePrice * 0.75;
    else if (hours === 48) rentalCost = basePrice * 1.8;
    else if (hours === 72) rentalCost = basePrice * 2.5;
    
    const sustainabilityFee = rentalCost * 0.05;
    const subtotal = rentalCost + sustainabilityFee;
    const stripeFee = (subtotal * 0.029) + 0.30;
    const totalCost = subtotal + stripeFee;
    const ownerNet = rentalCost - sustainabilityFee;
    
    // Store checkout data
    localStorage.setItem('selfPickupCheckout', JSON.stringify({
        itemName: itemName,
        basePrice: rentalCost,
        hours: hours,
        sustainabilityFee: sustainabilityFee,
        stripeFee: stripeFee,
        totalCost: totalCost,
        ownerNet: ownerNet,
        checkoutType: 'self-pickup'
    }));
    
    // Navigate to checkout page
    window.location.href = '/self-pickup-checkout.html';
}

function closeSelfPickupModal() {
    const modal = document.querySelector('.modal-overlay');
    if (modal) {
        document.body.removeChild(modal);
    }
}

// Initialize self-pickup functionality when page loads
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(addSelfPickupToRentals, 1000); // Add self-pickup buttons after page loads
    
    // Initialize account switcher
    initializeAccountSwitcher();
});

// Account Switcher Functions
let currentAccount = localStorage.getItem('currentAccount') || 'personal';
let userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '{"personal": {"name": "Personal Account", "type": "individual"}, "business": null}');

function initializeAccountSwitcher() {
    updateAccountSwitcher();
    updatePageMode();
}

function toggleAccountSwitcher() {
    const modal = document.getElementById('accountSwitcherModal');
    if (modal.style.display === 'none') {
        modal.style.display = 'flex';
        updateAccountSwitcher();
    } else {
        modal.style.display = 'none';
    }
}

function closeAccountSwitcher() {
    document.getElementById('accountSwitcherModal').style.display = 'none';
}

function updateAccountSwitcher() {
    const businessAccount = document.getElementById('businessAccount');
    const createBusinessBtn = document.getElementById('createBusinessBtn');
    const accountSwitcherBtn = document.getElementById('accountSwitcherBtn');
    
    if (userAccounts.business) {
        businessAccount.style.display = 'flex';
        createBusinessBtn.style.display = 'none';
        document.getElementById('businessAccountName').textContent = userAccounts.business.name;
    } else {
        businessAccount.style.display = 'none';
        createBusinessBtn.style.display = 'block';
    }
    
    // Update active state
    document.querySelectorAll('.account-option').forEach(option => {
        option.classList.remove('active');
    });
    
    if (currentAccount === 'personal') {
        document.getElementById('personalAccount').classList.add('active');
        accountSwitcherBtn.textContent = 'üë§';
    } else if (currentAccount === 'business') {
        document.getElementById('businessAccount').classList.add('active');
        accountSwitcherBtn.textContent = 'üè¢';
    }
}

function updatePageMode() {
    document.body.classList.remove('personal-mode', 'business-mode');
    
    if (currentAccount === 'business') {
        document.body.classList.add('business-mode');
    } else {
        document.body.classList.add('personal-mode');
    }
}

function switchToPersonal() {
    currentAccount = 'personal';
    localStorage.setItem('currentAccount', 'personal');
    updateAccountSwitcher();
    updatePageMode();
    closeAccountSwitcher();
    
    alert('Switched to Personal Account\n\nYou are now using your individual profile for personal posts and purchases.');
}

function switchToBusiness() {
    if (!userAccounts.business) {
        alert('No business account found. Please create one first.');
        return;
    }
    
    currentAccount = 'business';
    localStorage.setItem('currentAccount', 'business');
    updateAccountSwitcher();
    updatePageMode();
    closeAccountSwitcher();
    
    alert('Switched to Business Account - MarketPace Pro features activated!\n\nYou now have access to employee scheduling, integrations, and business tools.');
}

function createBusinessAccount() {
    window.location.href = '/pro-account-manager.html';
}

// Override posting functions for business mode  
function createNewPost() {
    if (currentAccount === 'business') {
        alert('Business post creation available\n\nRedirecting to MarketPace Pro posting interface with advanced features!');
        window.location.href = '/business-dashboard.html';
    } else {
        // Show normal posting interface
        openAdvancedPostModal();
    }
}
</script>

<style>
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}
</style>
