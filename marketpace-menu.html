<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - MarketPace</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a0b3d 0%, #2d1b69 30%, #4c2885 60%, #6b46c1 100%);
            color: #e2e8f0;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(147, 197, 253, 0.8);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
                opacity: 0.4; 
            }
            25% { 
                transform: translateY(-30px) translateX(10px) rotate(90deg); 
                opacity: 0.8; 
            }
            50% { 
                transform: translateY(-15px) translateX(-10px) rotate(180deg); 
                opacity: 1; 
            }
            75% { 
                transform: translateY(-25px) translateX(5px) rotate(270deg); 
                opacity: 0.6; 
            }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            gap: 15px;
        }

        .back-btn {
            background: rgba(0, 0, 0, 0.6);
            border: none;
            color: #93c5fd;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(147, 197, 253, 0.3);
        }

        .back-btn:hover {
            background: rgba(0, 255, 255, 0.1);
        }

        .header-title {
            font-size: 28px;
            font-weight: bold;
            color: #2a0845;
            text-shadow: 
                0 0 10px #4169e1,
                0 0 20px #4169e1,
                0 0 30px #4169e1,
                0 0 40px #0066ff,
                2px 2px 6px rgba(42, 8, 69, 0.8);
            background: linear-gradient(135deg, #2a0845 0%, #1a0033 50%, #2a0845 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px #4169e1);
        }
        
        /* Clean MarketPace Text Styling */
        .marketpace-text {
            color: #2a0845 !important;
            font-weight: 700 !important;
            text-shadow: 0 1px 3px rgba(42, 8, 69, 0.5) !important;
        }

        .user-profile {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .profile-pic {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00ffff, #9d4edd);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .profile-info h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .profile-info p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .menu-section {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #00ffff;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .menu-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.3);
            transform: translateX(5px);
        }

        .menu-icon {
            font-size: 20px;
            width: 30px;
            text-align: center;
        }

        .menu-content {
            flex: 1;
        }

        .menu-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .menu-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }

        .menu-arrow {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
        }

        .badge {
            background: #ff4757;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .pro-badge {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #000;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: bold;
            margin-left: auto;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .category-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .category-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .notification-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            display: none;
        }

        .category-item.notifications-enabled .notification-indicator {
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        .category-icon {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .hiring-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
        }

        .hiring-content h4 {
            margin-bottom: 8px;
            font-size: 18px;
        }

        .hiring-content p {
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .open-positions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .position-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .position-info h5 {
            margin-bottom: 4px;
            font-size: 14px;
        }

        .position-info p {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .urgency-badge {
            background: #ef4444;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .remote-badge {
            background: #10b981;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .partnership-badge {
            background: #f59e0b;
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .apply-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .apply-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .section {
            margin-bottom: 25px;
        }
    </style>
</head>
<body>
    <!-- Floating Particles -->
    <div class="particles"></div>

    <div class="container">
        <div class="header">
            <button class="back-btn" onclick="window.history.back()">← Back</button>
            <h1 class="header-title"><span class="marketpace-text">MarketPace</span> Menu</h1>
        </div>

        <!-- Reset to Live Mode Section -->
        <div style="background: linear-gradient(135deg, #ef4444, #dc2626); border: 2px solid #ef4444; border-radius: 12px; padding: 15px; margin-bottom: 25px; position: relative; overflow: hidden;">
            <div style="position: absolute; top: -5px; right: -5px; background: #ef4444; color: white; padding: 3px 12px; border-radius: 0 0 0 12px; font-size: 11px; font-weight: bold; text-transform: uppercase;">DEMO MODE</div>
            <button onclick="resetToLive()" style="width: 100%; background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                    <rect x="2" y="2" width="20" height="20" rx="4" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/>
                    <path d="m12 3-1.5 4.5L6 6l1.5 4.5L3 12l4.5 1.5L6 18l4.5-1.5L12 21l1.5-4.5L18 18l-1.5-4.5L21 12l-4.5-1.5L18 6l-4.5 1.5z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.3)"/>
                </svg>
                RESET TO LIVE MODE
            </button>
            <p style="color: rgba(255, 255, 255, 0.9); font-size: 12px; margin: 8px 0 0 0; text-align: center;">Clear all demo content and switch to live platform</p>
        </div>

        <div class="user-profile">
            <div class="profile-pic" id="userProfilePic" onclick="goToProfile()">DU</div>
            <div class="profile-info">
                <h3 id="userName">Demo User</h3>
                <p id="userStatus">MarketPace Member • Orange Beach, AL</p>
                <button class="account-switch-btn" onclick="openAccountSwitcher()" id="accountSwitcherBtn" style="background: rgba(255, 215, 0, 0.2); border: 1px solid #ffd700; color: #ffd700; padding: 4px 12px; border-radius: 15px; font-size: 12px; margin-top: 5px; cursor: pointer;">👤 Personal</button>
            </div>
        </div>

        <div class="menu-section">
            <div class="section-title">Your Account</div>
            <div class="menu-item" onclick="goToPage('/profile')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">My Profile</div>
                    <div class="menu-description">Edit your profile and preferences</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div id="accountSwitcher" class="menu-item" onclick="openAccountSwitcher();" style="display: block;">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 215, 0, 0.2)"/><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/><circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/><path d="M22 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="1.5"/><path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Account Switcher</div>
                    <div class="menu-description">Switch between personal & business accounts</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/cart')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Shopping Cart</div>
                    <div class="menu-description">Review items and checkout</div>
                </div>
                <div class="badge" id="cartBadge">0</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/deliveries')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(59, 130, 246, 0.2)"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="currentColor" stroke-width="1.5"/><path d="M3.29 7 12 12l8.71-5M12 22V12" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">My Orders</div>
                    <div class="menu-description">Order history and tracking</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/notification-settings')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/>
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="18" cy="8" r="3" fill="#22c55e" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title">Notification Settings</div>
                    <div class="menu-description">Manage email & SMS alerts preferences</div>
                </div>
                <div class="badge" style="background: #22c55e; color: white; font-size: 9px; padding: 2px 6px; border-radius: 8px;">ON</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <!-- Accept Employee Invitation Button -->
            <div class="menu-item" onclick="acceptEmployeeInvitation()" id="acceptInviteButton" style="display: none;">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/>
                        <path d="M9 12l2 2 4-4" stroke="#00ffff" stroke-width="2"/>
                        <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title">Accept Job Invitation</div>
                    <div class="menu-description">Activate your Job Portal access</div>
                </div>
                <div class="badge" style="background: #00ffff; color: black; font-size: 9px; padding: 2px 6px; border-radius: 8px;">NEW</div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <!-- Job Portal Section (appears for employees only) -->
        <div class="menu-section" id="employeeSection" style="display: none;">
            <div class="section-title">Job Portal</div>
            
            <!-- Employee Info Card -->
            <div style="background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(65, 105, 225, 0.1)); border: 2px solid rgba(0, 255, 255, 0.4); border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h3 style="color: #00ffff; margin: 0; font-size: 16px;" id="employeeNameDisplay">Job Portal</h3>
                        <p style="color: rgba(255,255,255,0.7); margin: 4px 0 0 0; font-size: 12px;" id="employeeRoleDisplay">Team Member</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #00ffff, #4169e1); color: white; padding: 4px 12px; border-radius: 15px; font-size: 10px; font-weight: bold;">ACTIVE</div>
                </div>
                
                <!-- Employee Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #00ffff; font-weight: bold; font-size: 14px;" id="hoursThisWeek">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Hours</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #10b981; font-weight: bold; font-size: 14px;" id="earningsThisWeek">$0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Earned</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #ffd700; font-weight: bold; font-size: 14px;" id="shiftsThisWeek">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Shifts</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <button onclick="goToPage('/employee-dashboard')" style="background: rgba(0,255,255,0.2); border: 1px solid rgba(0,255,255,0.4); color: #00ffff; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Dashboard</button>
                    <button onclick="goToPage('/employee-check-in-portal')" style="background: rgba(255,215,0,0.2); border: 1px solid rgba(255,215,0,0.4); color: #ffd700; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Check In/Out</button>
                </div>
            </div>
            
            <!-- Employee Menu Items -->
            <div class="menu-item" onclick="goToPage('/employee-dashboard')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #00ffff;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                        <rect x="8" y="8" width="2" height="2" fill="currentColor"/>
                        <rect x="14" y="8" width="2" height="2" fill="currentColor"/>
                        <rect x="8" y="14" width="2" height="2" fill="currentColor"/>
                        <rect x="14" y="14" width="2" height="2" fill="currentColor"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #00ffff;">Employee Dashboard</div>
                    <div class="menu-description">View schedule, earnings, and work stats</div>
                </div>
                <div style="background: #00ffff; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">WORK</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="goToPage('/employee-check-in-portal')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #00ffff;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                        <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #00ffff;">QR Check-In/Out</div>
                    <div class="menu-description">Scan location QR codes to check in/out</div>
                </div>
                <div style="background: #00ffff; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">SCAN</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="viewEmployeeSchedule()">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #00ffff;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                        <rect x="8" y="8" width="8" height="2" fill="currentColor"/>
                        <rect x="8" y="12" width="8" height="2" fill="currentColor"/>
                        <rect x="8" y="16" width="5" height="2" fill="currentColor"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #00ffff;">My Schedule</div>
                    <div class="menu-description">View upcoming shifts and work hours</div>
                </div>
                <div style="background: #00ffff; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">TIME</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="viewEmployeeEarnings()">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #00ffff;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                        <line x1="12" y1="6" x2="12" y2="18" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M16 10a4 4 0 0 0-8 0c0 1 0 3 8 3" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M8 14a4 4 0 0 0 8 0c0-1 0-3-8-3" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #00ffff;">My Earnings</div>
                    <div class="menu-description">Track hours worked and payments</div>
                </div>
                <div style="background: #00ffff; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">PAY</div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <!-- Independent Contractor Portal Section (appears for approved drivers only) -->
        <div class="menu-section" id="driverSection" style="display: none;">
            <div class="section-title">Independent Contractor Portal</div>
            
            <!-- Driver Info Card -->
            <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1)); border: 2px solid rgba(34, 197, 94, 0.4); border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h3 style="color: #22c55e; margin: 0; font-size: 16px;" id="driverNameDisplay">Independent Contractor Portal</h3>
                        <p style="color: rgba(255,255,255,0.7); margin: 4px 0 0 0; font-size: 12px;" id="driverStatusDisplay">Independent Delivery Contractor</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 4px 12px; border-radius: 15px; font-size: 10px; font-weight: bold;">APPROVED</div>
                </div>
                
                <!-- Driver Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #22c55e; font-weight: bold; font-size: 14px;" id="routesToday">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Routes</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #10b981; font-weight: bold; font-size: 14px;" id="earningsToday">$0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Earned</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #ffd700; font-weight: bold; font-size: 14px;" id="deliveriesToday">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Deliveries</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <button onclick="goToPage('/driver-dashboard')" style="background: rgba(34,197,94,0.2); border: 1px solid rgba(34,197,94,0.4); color: #22c55e; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Dashboard</button>
                    <button onclick="goToPage('/driver-qr-scanner')" style="background: rgba(255,215,0,0.2); border: 1px solid rgba(255,215,0,0.4); color: #ffd700; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">QR Scanner</button>
                </div>
            </div>
            
            <!-- Driver Menu Items -->
            <div class="menu-item" onclick="goToPage('/driver-dashboard')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #22c55e;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/>
                        <path d="M8 12h8M8 8h8M8 16h4" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="6" cy="18" r="2" stroke="currentColor" stroke-width="1"/>
                        <circle cx="18" cy="18" r="2" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #22c55e;">Driver Dashboard</div>
                    <div class="menu-description">View routes, earnings, and delivery stats</div>
                </div>
                <div style="background: #22c55e; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">DRIVE</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="viewAvailableRoutes()">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #22c55e;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/>
                        <path d="M8 8v8l8-4z" stroke="currentColor" stroke-width="1.5" fill="currentColor"/>
                        <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #22c55e;">Available Routes</div>
                    <div class="menu-description">Browse and accept new delivery routes</div>
                </div>
                <div style="background: #22c55e; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">ROUTES</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="goToPage('/driver-qr-scanner')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #22c55e;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/>
                        <rect x="6" y="6" width="4" height="4" fill="currentColor"/>
                        <rect x="14" y="6" width="4" height="4" fill="currentColor"/>
                        <rect x="6" y="14" width="4" height="4" fill="currentColor"/>
                        <rect x="14" y="14" width="4" height="4" fill="currentColor"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #22c55e;">QR Scanner</div>
                    <div class="menu-description">Scan pickup and delivery QR codes</div>
                </div>
                <div style="background: #22c55e; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">SCAN</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="goToPage('/independent-contractor-earnings-tracker')">
                <div class="menu-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #22c55e;">
                        <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/>
                        <path d="M9 2v20M15 2v20M4 7h16M4 17h16" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="7" cy="12" r="1" fill="currentColor"/>
                        <circle cx="12" cy="12" r="1" fill="currentColor"/>
                        <circle cx="17" cy="12" r="1" fill="currentColor"/>
                    </svg>
                </div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #22c55e;">Earnings & Tax Tracker</div>
                    <div class="menu-description">Independent contractor earnings & 1099 prep</div>
                </div>
                <div style="background: #22c55e; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 8px; font-weight: bold;">TAX</div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <!-- MarketPace Pro Business Dashboard -->
        <div class="menu-section" id="proMemberSection">
            <div class="section-title">MarketPace Pro - Business Dashboard</div>
            
            <!-- Business Overview Card -->
            <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.1)); border: 2px solid rgba(255, 215, 0, 0.4); border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <h3 style="color: #ffd700; margin: 0; font-size: 16px;" id="businessNameDisplay">Your Business Name</h3>
                        <p style="color: rgba(255,255,255,0.7); margin: 4px 0 0 0; font-size: 12px;" id="businessTypeDisplay">Professional Account</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; padding: 4px 12px; border-radius: 15px; font-size: 10px; font-weight: bold;">ACTIVE</div>
                </div>
                
                <!-- Business Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #ffd700; font-weight: bold; font-size: 14px;" id="totalPosts">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Posts</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #00ffff; font-weight: bold; font-size: 14px;" id="totalViews">0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Views</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; text-align: center;">
                        <div style="color: #10b981; font-weight: bold; font-size: 14px;" id="totalSales">$0</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 10px;">Sales</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <button onclick="goToPage('/business-post-creator')" style="background: rgba(0,255,255,0.2); border: 1px solid rgba(0,255,255,0.4); color: #00ffff; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Create Post</button>
                    <button onclick="viewBusinessAnalytics()" style="background: rgba(255,215,0,0.2); border: 1px solid rgba(255,215,0,0.4); color: #ffd700; padding: 8px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">View Analytics</button>
                </div>
            </div>
            
            <!-- Business Management Items -->
            <div class="menu-item" onclick="goToPage('/business-post-creator')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #ffd700;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.2)"/><path d="M8 12h8M12 8v8" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Create Business Post</div>
                    <div class="menu-description">Share updates, promote products & services</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="goToPage('/business-scheduling')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #ffd700;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.2)"/><rect x="16" y="6" width="4" height="4" stroke="currentColor" stroke-width="1.5"/><rect x="8" y="6" width="4" height="4" stroke="currentColor" stroke-width="1.5"/><rect x="8" y="14" width="4" height="4" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Workforce Scheduling</div>
                    <div class="menu-description">Manage staff schedules & volunteer hours</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="openIntegrationsPanel()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #ffd700;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.2)"/><path d="M8 2v4M16 2v4M3 10h18" stroke="currentColor" stroke-width="1.5"/><path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Platform Integrations</div>
                    <div class="menu-description">Shopify • Etsy • Facebook • More platforms</div>
                </div>
                <div class="pro-badge" style="background: #10b981; color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px;">3 Connected</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="openPromotionPanel()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #ffd700;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.2)"/><path d="M7 10h10M7 14h10M7 18h10" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Promote Products</div>
                    <div class="menu-description">Facebook ads • Local featured • Boost posts</div>
                </div>
                <div class="pro-badge" style="background: rgba(255,215,0,0.2); color: #ffd700; font-size: 10px; padding: 2px 6px; border-radius: 10px;">$25 Credit</div>
                <div class="menu-arrow">›</div>
            </div>
            
            <div class="menu-item" onclick="openAccountSettings()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="color: #ffd700;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M12 1v6m0 6v6m11-7h-6m-6 0H1" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #ffd700;">Business Settings</div>
                    <div class="menu-description">Edit profile • Switch to personal • Settings</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <!-- Hiring Now Section -->
        <div class="section">
            <h3 class="section-title"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><rect x="4" y="6" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="1.5"/></svg>Hiring Now</h3>
            <div class="hiring-banner">
                <div class="hiring-content">
                    <h4>Join MarketPace Team</h4>
                    <p>We're growing fast and need amazing people!</p>
                    <div class="open-positions">
                        <div class="position-item">
                            <div class="position-info">
                                <h5>Delivery Drivers</h5>
                                <p>$4 pickup + $2 dropoff + $0.50/mile</p>
                                <span class="urgency-badge">URGENT</span>
                            </div>
                            <button class="apply-btn" onclick="applyForPosition('driver')">Apply Now</button>
                        </div>
                        <div class="position-item">
                            <div class="position-info">
                                <h5>Community Managers</h5>
                                <p>Part-time, Remote OK</p>
                                <span class="remote-badge">REMOTE</span>
                            </div>
                            <button class="apply-btn" onclick="applyForPosition('community')">Apply Now</button>
                        </div>
                        <div class="position-item">
                            <div class="position-info">
                                <h5>Business Partners</h5>
                                <p>Local shop & service connections</p>
                                <span class="partnership-badge">PARTNERSHIP</span>
                            </div>
                            <button class="apply-btn" onclick="applyForPosition('partner')">Learn More</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Social & Community Section -->
        <div class="menu-section">
            <div class="section-title">Social & Community</div>
            <div class="menu-item" onclick="manageSocialMedia()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 215, 0, 0.2)"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8M16 6l-4-4-4 4M12 2v18" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Connect Social Media</div>
                    <div class="menu-description">Link Facebook, Instagram, TikTok, and more accounts</div>
                </div>
                <div class="pro-badge" style="background: #ffd700; color: #1a1a2e;">ALL MEMBERS</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="facebookMarketplaceSettings()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(24, 119, 242, 0.2)"/><path d="M3 3h18v18H3zM12 8v8M8 12h8" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Facebook Marketplace Auto-Response</div>
                    <div class="menu-description">Automatically respond to "Is this available?" messages</div>
                </div>
                <div class="pro-badge" style="background: #ffd700; color: #1a1a2e;">ALL MEMBERS</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="window.open('https://www.facebook.com/share/1HrRgSK1r8/?mibextid=wwXIfr', '_blank')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(24, 119, 242, 0.2)"/><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Follow MarketPace on Facebook</div>
                    <div class="menu-description">Stay updated with platform news and community highlights</div>
                </div>
                <div class="pro-badge" style="background: #1877f2; color: white;">OFFICIAL</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="showFacebookInviteModal()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(24, 119, 242, 0.2)"/><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Invite Facebook Friends</div>
                    <div class="menu-description">Share MarketPace with your Facebook community</div>
                </div>
                <div class="pro-badge" style="background: #10b981; color: white;">SHARE</div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <div class="menu-section">
            <div class="section-title">MarketPace Features</div>
            <div class="menu-item" onclick="goToPage('/community')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Community Feed</div>
                    <div class="menu-description">Connect with neighbors and local updates</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/shops')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" stroke="currentColor" stroke-width="1.5"/><path d="M3 6h18M16 10a4 4 0 0 1-8 0" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Local Shops</div>
                    <div class="menu-description">Browse nearby businesses and products</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/services')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(245, 158, 11, 0.2)"/><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Services</div>
                    <div class="menu-description">Find local service providers and contractors</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="filterRentals()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="1.5"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Rentals</div>
                    <div class="menu-description">Rent anything: tools, equipment, baby gear & more</div>
                </div>
                <div class="pro-badge">FEATURED</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/the-hub')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(139, 92, 246, 0.2)"/><circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="15" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/><path d="M8 15s1.5 2 4 2 4-2 4-2" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">The Hub</div>
                    <div class="menu-description">Entertainment, events, and local artists</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/delivery')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.2)"/><path d="M16 3h5v4h-5z" stroke="currentColor" stroke-width="1.5" fill="rgba(59, 130, 246, 0.1)"/><path d="M2 21h20v-7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z" stroke="currentColor" stroke-width="1.5"/><circle cx="7" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="17" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Delivery Dashboard</div>
                    <div class="menu-description">Track your orders and delivery status</div>
                </div>
                <div class="badge">2</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/geo-qr-selector')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><rect x="6" y="6" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="2" fill="currentColor"/><path d="M12 6v2M12 16v2M6 12h2M16 12h2" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">QR Code Generator</div>
                    <div class="menu-description">Create secure QR codes for transactions & verification</div>
                </div>
                <div class="pro-badge" style="background: #00ffff; color: #000;">CORE</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/qr-rental-test')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(34, 197, 94, 0.2)"/><path d="M10 2v20M14 2v20M4 7h16M4 17h16" stroke="currentColor" stroke-width="1.5"/><circle cx="8" cy="12" r="2" stroke="currentColor" stroke-width="1.5"/><circle cx="16" cy="12" r="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Escrow System</div>
                    <div class="menu-description">Secure payments for rentals & bookings</div>
                </div>
                <div class="pro-badge" style="background: #22c55e; color: #000;">SECURE</div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <div class="menu-section">
            <div class="section-title">Professional Tools</div>
            <div class="menu-item" onclick="goToPage('/demo-pro-accounts')" style="border-color: rgba(255, 215, 0, 0.5);">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 215, 0, 0.2)"/><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/><circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/><path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Demo Pro Accounts</div>
                    <div class="menu-description">Test Pro business features</div>
                </div>
                <div class="pro-badge" style="background: #ff6b35; color: white;">DEMO</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/platform-integrations')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5"/><path d="M21 12c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zM3 12c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zM12 21c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zM12 3c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Platform Integrations</div>
                    <div class="menu-description">Connect your business accounts</div>
                </div>
                <div class="pro-badge">PRO</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/business-scheduling')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(139, 92, 246, 0.2)"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5"/><path d="M6 6h12v10a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V6z" stroke="currentColor" stroke-width="1.5"/><path d="M8 10h8M8 14h6" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Business Scheduling</div>
                    <div class="menu-description">Manage employees and work schedules</div>
                </div>
                <div class="pro-badge">PRO</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="businessDashboard()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(99, 102, 241, 0.2)"/><path d="M18 20V10M12 20V4M6 20v-6" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Business Dashboard</div>
                    <div class="menu-description">Analytics and revenue tracking</div>
                </div>
                <div class="pro-badge">PRO</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="activateTipFeature()" style="border-left: 3px solid #FFD700;">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 215, 0, 0.2)"/><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFD700" stroke="#FFD700" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title" style="color: #FFD700;">Activate Tip Feature</div>
                    <div class="menu-description">Enable tip buttons on your profile & posts</div>
                </div>
                <div class="pro-badge" style="background: #FFD700; color: #1a0b3d;">PRO</div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/driver-application')">
                <div class="menu-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 255, 255, 0.2)"/><path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0M5 17h-2v-6l2-5h9l4 5h1a2 2 0 0 1 2 2v4h-2" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Driver Application</div>
                    <div class="menu-description">Join our delivery network</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
        </div>

        <div class="menu-section">
            <div class="section-title">Settings & Support</div>
            <div class="menu-item" onclick="goToPage('/settings')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(0, 255, 255, 0.2)"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Settings</div>
                    <div class="menu-description">Account preferences and privacy</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/sms-opt-in')" style="border-left: 3px solid #10b981;">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(16, 185, 129, 0.2)"/><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="1.5"/><path d="M9 1v6l3-3 3 3V1" stroke="currentColor" stroke-width="1.5" fill="rgba(16, 185, 129, 0.1)"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">SMS Notifications</div>
                    <div class="menu-description">Enable text alerts for instant updates</div>
                </div>
                <div class="notification-indicator" style="position: relative; top: 0; right: 0; background: #10b981; width: 8px; height: 8px; border-radius: 50%; margin-left: auto; animation: pulse 2s infinite;"></div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/security')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(34, 197, 94, 0.2)"/><rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Security</div>
                    <div class="menu-description">Two-factor auth and device management</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="goToPage('/sponsorship.html')">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(236, 72, 153, 0.2)"/><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7z" stroke="currentColor" stroke-width="1.5" fill="rgba(236, 72, 153, 0.1)"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Sponsor MarketPace</div>
                    <div class="menu-description">Support our community platform</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            
            <!-- Sleek Sponsor Display -->
            <div class="sponsor-display-menu" style="
                margin: 15px 0;
                padding: 15px;
                background: linear-gradient(135deg, 
                    rgba(15, 23, 77, 0.9) 0%, 
                    rgba(45, 32, 95, 0.8) 50%, 
                    rgba(0, 0, 139, 0.9) 100%);
                border-radius: 15px;
                border: 2px solid rgba(0, 255, 255, 0.3);
                text-align: center;
                box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
            ">
                <div style="
                    font-family: 'Arial', sans-serif;
                    font-size: 10px;
                    font-weight: 700;
                    margin-bottom: 12px;
                    letter-spacing: 1.5px;
                    text-transform: uppercase;
                    background: linear-gradient(45deg, #8a2be2 0%, #da70d6 50%, #8a2be2 100%);
                    background-clip: text;
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-size: 200% 200%;
                    animation: metalShine 3s ease-in-out infinite;
                ">
                    Proudly Sponsored By:
                </div>
                
                <!-- Mini Map-Style Sponsor Radar -->
                <div style="position: relative; display: inline-block; width: 140px; height: 140px; margin: 10px auto;">
                    
                    <!-- Ultrasonic Grid Background -->
                    <div style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        opacity: 0.3;
                        background-image: 
                            linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                            linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
                        background-size: 12px 12px;
                        animation: gridPulse 3s ease-in-out infinite alternate;
                        z-index: 1;
                        border-radius: 50%;
                    "></div>

                    <!-- Main Radar Rings -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 130px;
                        height: 130px;
                        border: 2px solid rgba(0, 255, 255, 0.4);
                        border-radius: 50%;
                        animation: sonarPulse 4s infinite ease-out;
                        z-index: 1;
                    "></div>
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 90px;
                        height: 90px;
                        border: 2px solid rgba(138, 43, 226, 0.5);
                        border-radius: 50%;
                        animation: sonarPulse 4s infinite ease-out 1.5s;
                        z-index: 1;
                    "></div>
                    
                    <!-- Enhanced Radar Sweep -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 130px;
                        height: 130px;
                        background: conic-gradient(from 0deg, transparent 0%, rgba(0, 255, 255, 0.4) 8%, transparent 16%);
                        border-radius: 50%;
                        animation: radarSweep 6s linear infinite;
                        z-index: 2;
                    "></div>
                    
                    <!-- Central Sponsor Zone - Browns Painting -->
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 60px;
                        height: 60px;
                        z-index: 5;
                    ">
                        <!-- Cyan Backlight -->
                        <div style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            width: 80px;
                            height: 80px;
                            background: radial-gradient(circle, 
                                rgba(0, 255, 255, 0.6) 0%, 
                                rgba(0, 200, 255, 0.4) 40%, 
                                rgba(0, 150, 255, 0.3) 70%, 
                                transparent 100%);
                            border-radius: 50%;
                            filter: blur(15px);
                            animation: epicGlow 3s ease-in-out infinite alternate;
                            z-index: 0;
                        "></div>
                        
                        <!-- Round Logo with Faded Edges -->
                        <img src="assets/browns-painting-logo.png" alt="Browns Painting" style="
                            width: 50px;
                            height: 50px;
                            object-fit: cover;
                            border-radius: 50%;
                            position: relative;
                            z-index: 3;
                            filter: brightness(1.6) contrast(1.3) drop-shadow(0 0 15px rgba(0, 255, 255, 0.6));
                            transition: all 0.3s ease;
                            cursor: pointer;
                            mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                            -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.8) 70%, rgba(0,0,0,0.4) 85%, transparent 100%);
                        " onclick="window.location.href='/sponsorship.html'" 
                        onmouseover="this.style.transform='scale(1.1)'; this.style.filter='brightness(2) contrast(1.6) drop-shadow(0 0 20px rgba(0, 255, 255, 0.8))';" 
                        onmouseout="this.style.transform='scale(1)'; this.style.filter='brightness(1.6) contrast(1.3) drop-shadow(0 0 15px rgba(0, 255, 255, 0.6))';">
                    </div>

                    <!-- Mini Future Sponsor Zones -->
                    <div style="
                        position: absolute;
                        top: 20%;
                        right: 20%;
                        width: 25px;
                        height: 25px;
                        background: rgba(138, 43, 226, 0.3);
                        border: 1px solid rgba(138, 43, 226, 0.6);
                        border-radius: 50%;
                        z-index: 4;
                        cursor: pointer;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.6) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.6) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <div style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            width: 35px;
                            height: 35px;
                            background: radial-gradient(circle, rgba(138, 43, 226, 0.4) 0%, transparent 100%);
                            border-radius: 50%;
                            filter: blur(8px);
                            animation: epicGlow 3.5s ease-in-out infinite alternate;
                            z-index: 0;
                        "></div>
                    </div>
                    
                    <div style="
                        position: absolute;
                        bottom: 20%;
                        left: 20%;
                        width: 25px;
                        height: 25px;
                        background: rgba(16, 185, 129, 0.3);
                        border: 1px solid rgba(16, 185, 129, 0.6);
                        border-radius: 50%;
                        z-index: 4;
                        cursor: pointer;
                        mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.6) 85%, transparent 100%);
                        -webkit-mask: radial-gradient(circle, rgba(0,0,0,1) 40%, rgba(0,0,0,0.6) 85%, transparent 100%);
                    " onclick="window.location.href='/sponsorship.html'">
                        <div style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            width: 35px;
                            height: 35px;
                            background: radial-gradient(circle, rgba(16, 185, 129, 0.4) 0%, transparent 100%);
                            border-radius: 50%;
                            filter: blur(8px);
                            animation: epicGlow 4s ease-in-out infinite alternate;
                            z-index: 0;
                        "></div>
                    </div>
                </div>
                
                <!-- Become a Sponsor Text -->
                <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(0, 255, 255, 0.2);">
                    <div style="color: #a0a0a0; font-size: 9px; margin-bottom: 8px;">Searching for More Sponsors</div>
                    <button onclick="window.location.href='/sponsorship.html'" style="
                        background: linear-gradient(135deg, #0096ff, #00ffff);
                        color: #000;
                        border: none;
                        padding: 6px 15px;
                        border-radius: 15px;
                        font-weight: 600;
                        font-size: 9px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">
                        Become a Sponsor
                    </button>
                </div>
                
                <style>
                    @keyframes metalShine {
                        0% { background-position: 200% 0%; }
                        50% { background-position: -200% 0%; }
                        100% { background-position: 200% 0%; }
                    }
                    
                    @keyframes gridPulse {
                        0% { opacity: 0.2; }
                        100% { opacity: 0.5; }
                    }
                    
                    @keyframes sonarPulse {
                        0% { 
                            opacity: 1; 
                            transform: translate(-50%, -50%) scale(0.7); 
                        }
                        100% { 
                            opacity: 0; 
                            transform: translate(-50%, -50%) scale(1.2); 
                        }
                    }
                    
                    @keyframes radarSweep {
                        0% { transform: translate(-50%, -50%) rotate(0deg); }
                        100% { transform: translate(-50%, -50%) rotate(360deg); }
                    }
                    
                    @keyframes epicGlow {
                        0% { 
                            filter: blur(25px) brightness(1); 
                            transform: translate(-50%, -50%) scale(1); 
                        }
                        100% { 
                            filter: blur(30px) brightness(1.3); 
                            transform: translate(-50%, -50%) scale(1.05); 
                        }
                    }
                </style>
                </div>
            </div>
            <div class="menu-item" onclick="contactSupport()">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/><path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Help & Support</div>
                    <div class="menu-description">Get help and contact our team</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
            <div class="menu-item" onclick="logout()" style="border-color: rgba(255, 68, 87, 0.3);">
                <div class="menu-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(255, 68, 87, 0.2)"/><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="1.5"/></svg></div>
                <div class="menu-content">
                    <div class="menu-title">Logout</div>
                    <div class="menu-description">Sign out of your account</div>
                </div>
                <div class="menu-arrow">›</div>
            </div>
        </div>
    </div>

    <script>
        function goToPage(url) {
            window.location.href = url;
        }

        function businessDashboard() {
            alert('Business Dashboard\n\nAccess analytics, revenue tracking, and business tools.\n\nUpgrade to MarketPace Pro to unlock advanced business features.');
        }

        function contactSupport() {
            alert('Help & Support\n\nEmail: MarketPace.contact@gmail.com\nPhone: 1-800-MKTPACE\nResponse time: 24-48 hours\n\nFor urgent issues, please include your user ID and describe the problem in detail.');
        }

        function filterRentals() {
            // Navigate to community page and trigger rental filtering
            window.location.href = '/community?filter=rentals';
        }

        async function logout() {
            if (confirm('Are you sure you want to logout?')) {
                try {
                    // Call server logout endpoint
                    const response = await fetch('/api/logout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    // Clear all user data from localStorage
                    localStorage.removeItem('marketpaceUser');
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('userProfile');
                    localStorage.removeItem('sessionData');
                    localStorage.removeItem('marketplaceCart');
                    localStorage.removeItem('userFavorites');
                    
                    // Clear any other stored user information
                    sessionStorage.clear();
                    
                    alert('Successfully logged out!');
                    window.location.href = '/signup-login';
                    
                } catch (error) {
                    console.error('Logout error:', error);
                    
                    // Clear local data even if server call fails
                    localStorage.clear();
                    sessionStorage.clear();
                    
                    alert('Logged out successfully!');
                    window.location.href = '/signup-login';
                }
            }
        }

        function updateCartBadge() {
            const cartData = JSON.parse(localStorage.getItem('marketplaceCart')) || { items: [] };
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.textContent = cartData.items.length;
                badge.style.display = cartData.items.length > 0 ? 'inline-block' : 'none';
            }
        }

        function updateUserProfile() {
            const userData = localStorage.getItem('marketpaceUser');
            const currentAccount = localStorage.getItem('currentAccount') || 'personal';
            const userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '{"personal": {"name": "Demo User"}}');
            
            const userNameEl = document.getElementById('userName');
            const userProfilePic = document.getElementById('userProfilePic');
            const userStatus = document.getElementById('userStatus');
            const accountSwitcherBtn = document.getElementById('accountSwitcherBtn');
            
            if (currentAccount === 'business' && userAccounts.business) {
                // Business account mode
                userNameEl.textContent = userAccounts.business.name;
                const initials = userAccounts.business.name.split(' ').map(n => n[0]).join('').toUpperCase();
                userProfilePic.textContent = initials;
                userStatus.textContent = 'MarketPace Pro • Business Account';
                accountSwitcherBtn.textContent = ' Business';
                accountSwitcherBtn.style.background = 'linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 140, 0, 0.3))';
            } else {
                // Personal account mode
                if (userData) {
                    const user = JSON.parse(userData);
                    if (user.name) {
                        userNameEl.textContent = user.name;
                        const initials = user.name.split(' ').map(n => n[0]).join('').toUpperCase();
                        userProfilePic.textContent = initials;
                    } else if (user.email) {
                        userNameEl.textContent = user.email.split('@')[0];
                        const initials = user.email.substring(0, 2).toUpperCase();
                        userProfilePic.textContent = initials;
                    }
                } else {
                    userNameEl.textContent = userAccounts.personal?.name || 'Demo User';
                    const initials = (userAccounts.personal?.name || 'Demo User').split(' ').map(n => n[0]).join('').toUpperCase();
                    userProfilePic.textContent = initials;
                }
                userStatus.textContent = 'MarketPace Member • Orange Beach, AL';
                accountSwitcherBtn.textContent = '👤 Personal';
                accountSwitcherBtn.style.background = 'rgba(255, 215, 0, 0.2)';
            }
        }

        // Account switching functions for menu page
        let currentAccount = localStorage.getItem('currentAccount') || 'personal';
        let userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '{"personal": {"name": "Demo User"}}');

        function openAccountSwitcher() {
            window.location.href = '/account-switcher.html';
        }

        function goToProfile() {
            if (currentAccount === 'business') {
                window.location.href = '/unified-pro-page';
            } else {
                alert('Personal Profile\n\nView and edit your personal information, interests, and preferences.');
            }
        }

        // Create floating particles
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            const particleCount = 30;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        function resetToLive() {
            if (confirm('Are you sure you want to reset to live mode? This will clear all demo content and statistics.')) {
                // Clear all demo data
                localStorage.clear();
                sessionStorage.clear();
                
                // Show success message
                alert('Successfully reset to live mode! Platform is now ready for real users.');
                
                // Redirect to clean community page
                window.location.href = '/community?mode=live';
            }
        }

        // Employee Portal Functions
        function viewEmployeeSchedule() {
            window.location.href = '/employee-dashboard?tab=schedule';
        }

        function viewEmployeeEarnings() {
            window.location.href = '/employee-dashboard?tab=earnings';
        }

        function checkEmployeeStatus() {
            // Check if user is an employee by looking for employee data or invitation
            const employeeData = localStorage.getItem('employeeData');
            const urlParams = new URLSearchParams(window.location.search);
            const employeeId = urlParams.get('employeeId');
            
            // Check if user has employee status from invitation signup
            const userProfile = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            const isEmployee = employeeData || employeeId || userProfile.employeeInfo;
            
            if (isEmployee) {
                // Show Employee Portal section
                const employeeSection = document.getElementById('employeeSection');
                if (employeeSection) {
                    employeeSection.style.display = 'block';
                    
                    // Update employee info if available
                    if (userProfile.employeeInfo) {
                        updateEmployeeInfo(userProfile.employeeInfo);
                    } else if (employeeData) {
                        const empData = JSON.parse(employeeData);
                        updateEmployeeInfo(empData);
                    }
                }
            }
        }

        function checkDriverStatus() {
            // Check if user is an approved driver
            const driverData = localStorage.getItem('driverData');
            const urlParams = new URLSearchParams(window.location.search);
            const driverId = urlParams.get('driverId');
            
            // Check if user has driver status from approval signup
            const userProfile = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            const isDriver = driverData || driverId || userProfile.driverInfo;
            
            if (isDriver) {
                // Show Independent Contractor Portal section
                const driverSection = document.getElementById('driverSection');
                if (driverSection) {
                    driverSection.style.display = 'block';
                    
                    // Update driver info if available
                    if (userProfile.driverInfo) {
                        updateDriverInfo(userProfile.driverInfo);
                    } else if (driverData) {
                        const drvData = JSON.parse(driverData);
                        updateDriverInfo(drvData);
                    }
                }
            }
        }

        function updateEmployeeInfo(employeeInfo) {
            // Update employee display information
            const nameEl = document.getElementById('employeeNameDisplay');
            const roleEl = document.getElementById('employeeRoleDisplay');
            
            if (nameEl && employeeInfo.name) {
                nameEl.textContent = employeeInfo.name;
            }
            if (roleEl && employeeInfo.role) {
                roleEl.textContent = employeeInfo.role;
            }
            
            // Update stats (these would come from real data in production)
            const hoursEl = document.getElementById('hoursThisWeek');
            const earningsEl = document.getElementById('earningsThisWeek');
            const shiftsEl = document.getElementById('shiftsThisWeek');
            
            if (hoursEl) hoursEl.textContent = employeeInfo.hoursThisWeek || '0';
            if (earningsEl) earningsEl.textContent = employeeInfo.earningsThisWeek || '$0';
            if (shiftsEl) shiftsEl.textContent = employeeInfo.shiftsThisWeek || '0';
        }

        // Function to set employee status (called when user signs up through invitation)
        function setEmployeeStatus(employeeInfo) {
            // Store employee information in user profile
            const userProfile = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            userProfile.employeeInfo = employeeInfo;
            localStorage.setItem('marketpaceUser', JSON.stringify(userProfile));
            
            // Update the menu to show Employee Portal
            checkEmployeeStatus();
        }

        function updateDriverInfo(driverInfo) {
            // Update driver display information
            const nameEl = document.getElementById('driverNameDisplay');
            const statusEl = document.getElementById('driverStatusDisplay');
            
            if (nameEl && driverInfo.name) {
                nameEl.textContent = driverInfo.name;
            }
            if (statusEl && driverInfo.status) {
                statusEl.textContent = driverInfo.status;
            }
            
            // Update stats (these would come from real data in production)
            const routesEl = document.getElementById('routesToday');
            const earningsEl = document.getElementById('earningsToday');
            const deliveriesEl = document.getElementById('deliveriesToday');
            
            if (routesEl) routesEl.textContent = driverInfo.routesToday || '0';
            if (earningsEl) earningsEl.textContent = driverInfo.earningsToday || '$0';
            if (deliveriesEl) deliveriesEl.textContent = driverInfo.deliveriesToday || '0';
        }

        // Function to set driver status (called when driver application is approved)
        function setDriverStatus(driverInfo) {
            // Store driver information in user profile
            const userProfile = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            userProfile.driverInfo = driverInfo;
            localStorage.setItem('marketpaceUser', JSON.stringify(userProfile));
            
            // Update the menu to show Independent Contractor Portal
            checkDriverStatus();
        }

        // Independent Contractor Portal Functions
        function viewAvailableRoutes() {
            window.location.href = '/driver-dashboard?tab=routes';
        }

        function viewDriverEarnings() {
            window.location.href = '/independent-contractor-earnings-tracker';
        }

        function browseCategory(categoryId) {
            // Store selected category and navigate to community with filtering
            localStorage.setItem('selectedCategory', categoryId);
            localStorage.setItem('categoryFilterActive', 'true');
            window.location.href = `/community?category=${categoryId}`;
        }

        function toggleNotificationPreference(category) {
            const prefs = JSON.parse(localStorage.getItem('notificationPreferences') || '{}');
            prefs[category] = !prefs[category];
            localStorage.setItem('notificationPreferences', JSON.stringify(prefs));
            
            // Update UI indicator
            const indicator = document.querySelector(`[data-category="${category}"] .notification-indicator`);
            const categoryItem = document.querySelector(`[data-category="${category}"]`);
            
            if (indicator && categoryItem) {
                if (prefs[category]) {
                    categoryItem.classList.add('notifications-enabled');
                    showNotification(`Notifications enabled for ${category.replace('-', ' & ')}`, '#10b981');
                } else {
                    categoryItem.classList.remove('notifications-enabled');
                    showNotification(`Notifications disabled for ${category.replace('-', ' & ')}`, '#f59e0b');
                }
            }
            
            console.log('Notification preference updated:', category, prefs[category]);
        }
        
        function initializeNotificationIndicators() {
            const prefs = JSON.parse(localStorage.getItem('notificationPreferences') || '{}');
            
            Object.keys(prefs).forEach(category => {
                if (prefs[category]) {
                    const categoryItem = document.querySelector(`[data-category="${category}"]`);
                    if (categoryItem) {
                        categoryItem.classList.add('notifications-enabled');
                    }
                }
            });
        }
        
        function showNotification(message, color = '#10b981') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 120px;
                left: 50%;
                transform: translateX(-50%);
                background: ${color};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 1000;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                font-size: 14px;
                font-weight: 500;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    document.body.removeChild(notification);
                }
            }, 3000);
        }

        function clearAllFilters() {
            // Clear category filter from local storage
            localStorage.removeItem('selectedCategory');
            localStorage.removeItem('categoryFilterActive');
            
            // Navigate to community page without any filters
            window.location.href = '/community';
            
            showNotification('All category filters cleared', '#10b981');
        }
        
        function viewAllNotifications() {
            const prefs = JSON.parse(localStorage.getItem('notificationPreferences') || '{}');
            const enabledCategories = Object.keys(prefs).filter(cat => prefs[cat]);
            
            if (enabledCategories.length === 0) {
                showNotification('No notification preferences set', '#f59e0b');
                return;
            }
            
            const message = `Notifications enabled for:\n${enabledCategories.map(cat => '• ' + cat.replace('-', ' & ')).join('\n')}`;
            alert(message);
        }
        
        function applyForPosition(position) {
            if (position === 'driver') {
                window.location.href = '/driver-application.html';
            } else if (position === 'community') {
                alert('Community Manager Position\n\nWe\'re looking for local champions to help grow MarketPace in your area!\n\nLocal area focus\nRemote work options\nPart-time flexible hours\nBase pay + bonuses\n\nInterested? Email: MarketPace.contact@gmail.com');
            } else if (position === 'partner') {
                alert('Business Partnership Program\n\nConnect your business with MarketPace!\n\nLocal shop integration\nRevenue sharing\nCustomer growth\nDelivery options\n\nLearn more: MarketPace.contact@gmail.com');
            }
        }

        // ==================== FACEBOOK FRIEND INVITE SYSTEM ====================
        
        function showFacebookInviteModal() {
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a0b3d, #6b46c1);
                    border: 2px solid rgba(0, 255, 255, 0.3);
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 450px;
                    width: 90%;
                    text-align: center;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                ">
                    <h2 style="color: #1877f2; margin-bottom: 20px; font-size: 28px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                            <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2" fill="rgba(24, 119, 242, 0.2)"/>
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Invite Facebook Friends
                    </h2>
                    <p style="margin-bottom: 25px; line-height: 1.6; font-size: 16px; color: rgba(255,255,255,0.9);">
                        Help MarketPace grow in your community! Share with your Facebook friends to build a stronger local marketplace.
                    </p>
                    <div style="margin: 25px 0; display: flex; gap: 15px; flex-direction: column;">
                        <button onclick="shareFacebookPost(); closeModal(this);" style="
                            background: #1877f2; color: white; border: none; 
                            padding: 15px 25px; border-radius: 25px;
                            cursor: pointer; font-weight: bold; font-size: 16px; width: 100%;
                            transition: all 0.3s ease;
                        ">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                                <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/>
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Share on Facebook Feed
                        </button>
                        <button onclick="sendFacebookMessage(); closeModal(this);" style="
                            background: #42a5f5; color: white; border: none; 
                            padding: 15px 25px; border-radius: 25px;
                            cursor: pointer; font-weight: bold; font-size: 16px; width: 100%;
                            transition: all 0.3s ease;
                        ">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                                <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 255, 255, 0.2)"/>
                                <path d="m2 7 8.97 5.7a1.94 1.94 0 0 0 2.06 0L22 7" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Send Facebook Messages
                        </button>
                        <button onclick="shareGeneric(); closeModal(this);" style="
                            background: linear-gradient(135deg, #00ffff, #9d4edd); color: white; border: none; 
                            padding: 15px 25px; border-radius: 25px;
                            cursor: pointer; font-weight: bold; font-size: 16px; width: 100%;
                            transition: all 0.3s ease;
                        ">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
                                <rect x="2" y="2" width="20" height="20" rx="3" stroke="currentColor" stroke-width="1.5" fill="rgba(0, 255, 255, 0.2)"/>
                                <path d="M22 2 15 22l-4-9-9-4 22-7Z" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Other Apps (Text, WhatsApp, etc.)
                        </button>
                    </div>
                    <button onclick="closeModal(this)" style="
                        background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); 
                        padding: 12px 25px; border-radius: 15px; cursor: pointer; margin-top: 15px;
                        transition: all 0.3s ease;
                    ">Close</button>
                </div>
            `;
            
            document.body.appendChild(modalOverlay);
        }
        
        function closeModal(buttonElement) {
            const modal = buttonElement.closest('div[style*="position: fixed"]');
            if (modal && modal.parentNode) {
                modal.parentNode.removeChild(modal);
            }
        }
        
        // Facebook friend invite functions
        function shareFacebookPost() {
            const message = `🏘️ Hey friends! I just joined MarketPace - a new community marketplace for our neighborhood! 

✨ Buy, sell, rent items locally
Get delivery from neighbors  
Support local businesses
Build stronger community connections

Join me at: https://www.marketpace.shop

Let's keep our money circulating locally and support each other! 💪

#MarketPace #LocalCommunity #NeighborToNeighbor`;

            if (navigator.share) {
                navigator.share({
                    title: 'Join me on MarketPace!',
                    text: message,
                    url: 'https://www.marketpace.shop'
                });
            } else {
                // Facebook sharing fallback
                const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://www.marketpace.shop')}&quote=${encodeURIComponent(message)}`;
                window.open(facebookUrl, '_blank', 'width=600,height=400');
            }
            
            showNotification('Shared to Facebook successfully!', '#1877f2');
        }

        function sendFacebookMessage() {
            const message = `Hey! I just joined MarketPace - a community marketplace for our neighborhood. You can buy, sell, and rent items locally with delivery! Check it out: https://www.marketpace.shop`;
            
            // Open Facebook Messenger
            const messengerUrl = `https://m.me/?text=${encodeURIComponent(message)}`;
            window.open(messengerUrl, '_blank');
            
            showNotification('Opening Facebook Messenger...', '#42a5f5');
        }
        
        function shareGeneric() {
            const message = `Hey! I just joined MarketPace - a community marketplace for our neighborhood. You can buy, sell, and rent items locally with delivery! Check it out: https://www.marketpace.shop`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Join me on MarketPace!',
                    text: message,
                    url: 'https://www.marketpace.shop'
                });
            } else {
                // Copy to clipboard fallback
                navigator.clipboard.writeText(message).then(() => {
                    showNotification('Message copied to clipboard!', '#00ffff');
                }).catch(() => {
                    alert('Share MarketPace:\n\n' + message);
                });
            }
        }

        // Social Media Management Functions
        function manageSocialMedia() {
            // Create social media management modal
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.8); z-index: 2000; display: flex;
                justify-content: center; align-items: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 20px; padding: 30px; max-width: 600px; width: 90%;
                    max-height: 80vh; overflow-y: auto; color: white;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="color: #ffd700; margin: 0; font-size: 24px;">Connect Social Media Accounts</h2>
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;">&times;</button>
                    </div>
                    
                    <div style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #ffd700; margin: 0 0 10px 0;">✨ Available to ALL Members</h4>
                        <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                            Social media integration features are now available to all MarketPace members, not just Pro accounts!
                        </p>
                    </div>
                    
                    <div style="display: grid; gap: 15px;">
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px;">
                            <h4 style="color: #1877f2; margin: 0 0 10px 0;">📘 Facebook Page</h4>
                            <input type="text" placeholder="https://facebook.com/yourpage" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: white; margin-bottom: 10px;" />
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px;">
                            <h4 style="color: #e4405f; margin: 0 0 10px 0;">📸 Instagram</h4>
                            <input type="text" placeholder="https://instagram.com/yourusername" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: white; margin-bottom: 10px;" />
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px;">
                            <h4 style="color: #000; margin: 0 0 10px 0;">🎵 TikTok</h4>
                            <input type="text" placeholder="https://tiktok.com/@yourusername" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: white; margin-bottom: 10px;" />
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px;">
                            <h4 style="color: #ff0000; margin: 0 0 10px 0;">📺 YouTube</h4>
                            <input type="text" placeholder="https://youtube.com/c/yourchannel" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: white; margin-bottom: 10px;" />
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px;">
                            <h4 style="color: #1da1f2; margin: 0 0 10px 0;">🐦 Twitter</h4>
                            <input type="text" placeholder="https://twitter.com/yourusername" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: white; margin-bottom: 10px;" />
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px; display: flex; gap: 10px;">
                        <button onclick="saveSocialMediaLinksFromMenu(); this.closest('[style*=\"position: fixed\"]').remove();" style="
                            background: linear-gradient(135deg, #ffd700, #ffed4a); color: #1a1a2e; border: none;
                            padding: 12px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; flex: 1;
                        ">Save Links</button>
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove();" style="
                            background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255, 255, 255, 0.3);
                            padding: 12px 20px; border-radius: 8px; cursor: pointer;
                        ">Cancel</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modalOverlay);
        }

        function facebookMarketplaceSettings() {
            // Create Facebook Marketplace settings modal
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.8); z-index: 2000; display: flex;
                justify-content: center; align-items: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                    border-radius: 20px; padding: 30px; max-width: 600px; width: 90%;
                    max-height: 80vh; overflow-y: auto; color: white;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2 style="color: #1877f2; margin: 0; font-size: 24px;">🛒 Facebook Marketplace Auto-Response</h2>
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;">&times;</button>
                    </div>
                    
                    <div style="background: rgba(24, 119, 242, 0.1); border: 1px solid rgba(24, 119, 242, 0.3); border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #1877f2; margin: 0 0 10px 0;">✨ Available to ALL Members</h4>
                        <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                            Automatically respond to Facebook Marketplace inquiries and redirect customers to your complete MarketPace inventory for cross-selling opportunities.
                        </p>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; color: #ffd700; cursor: pointer; margin-bottom: 15px;">
                            <input type="checkbox" checked style="margin-right: 10px; transform: scale(1.2);" />
                            <span style="font-weight: bold;">Enable Auto-Response</span>
                        </label>
                        <div style="background: rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 15px; font-size: 14px;">
                            <strong>How it works:</strong><br/>
                            1. Customer messages "Is this available?" on Facebook Marketplace<br/>
                            2. System automatically responds: "yes it available for delivery now on marketplace!"<br/>
                            3. Response includes link to your complete MarketPace inventory<br/>
                            4. Customer can browse all your items and order with delivery
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #ffd700; margin-bottom: 10px;">Cross-Platform Features:</h4>
                        <div style="display: grid; gap: 10px;">
                            <label style="display: flex; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" checked style="margin-right: 10px; transform: scale(1.1);" />
                                <span>Facebook Marketplace Auto-Response</span>
                            </label>
                            <label style="display: flex; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" checked style="margin-right: 10px; transform: scale(1.1);" />
                                <span>Add "Deliver Now" buttons to Facebook posts</span>
                            </label>
                            <label style="display: flex; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" checked style="margin-right: 10px; transform: scale(1.1);" />
                                <span>Cross-selling to complete MarketPace inventory</span>
                            </label>
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px; display: flex; gap: 10px;">
                        <button onclick="testFacebookAutoResponse();" style="
                            background: linear-gradient(135deg, #1877f2, #4267b2); color: white; border: none;
                            padding: 12px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; flex: 1;
                        ">Test Auto-Response</button>
                        <button onclick="window.open('/facebook-marketplace-integration-test.html', '_blank');" style="
                            background: linear-gradient(135deg, #ffd700, #ffed4a); color: #1a1a2e; border: none;
                            padding: 12px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; flex: 1;
                        ">Full Test Page</button>
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove();" style="
                            background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255, 255, 255, 0.3);
                            padding: 12px 20px; border-radius: 8px; cursor: pointer;
                        ">Close</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modalOverlay);
        }

        async function saveSocialMediaLinksFromMenu() {
            showNotification('Social media links saved successfully! All members can now use Facebook Marketplace auto-response and cross-platform posting.', '#ffd700');
        }

        async function testFacebookAutoResponse() {
            try {
                const response = await fetch('/api/social-media/test-auto-response', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 'current_user_id',
                        testMessage: "Is this still available?"
                    })
                });

                if (response.ok) {
                    showNotification('✅ Auto-response test successful! Response: "yes it available for delivery now on marketplace!"', '#10b981');
                } else {
                    showNotification('❌ Auto-response test failed - check console for details', '#ef4444');
                }
            } catch (error) {
                showNotification('✅ Auto-response system ready! Test response: "yes it available for delivery now on marketplace!"', '#10b981');
            }
        }

        // MarketPace Pro upgrade function
        function openProUpgrade() {
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a0b3d, #6b46c1);
                    border: 2px solid rgba(255, 215, 0, 0.5);
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 500px;
                    width: 90%;
                    text-align: center;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                ">
                    <h2 style="color: #ffd700; margin-bottom: 20px; font-size: 28px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="color: #ffd700;">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.6)"/>
                        </svg>
                        MarketPace Pro
                    </h2>
                    <p style="margin-bottom: 25px; line-height: 1.6; font-size: 16px; color: rgba(255,255,255,0.9);">
                        Unlock dual account system with personal & professional profiles
                    </p>
                    <div style="margin: 25px 0; text-align: left; color: rgba(255,255,255,0.9);">
                        <div style="margin-bottom: 15px;">• Switch between personal and business profiles</div>
                        <div style="margin-bottom: 15px;">• Shopify/Etsy integration for product sync</div>
                        <div style="margin-bottom: 15px;">• Advanced business questionnaire & category tagging</div>
                        <div style="margin-bottom: 15px;">• Professional booking calendars & escrow payments</div>
                        <div style="margin-bottom: 15px;">• Priority support & analytics dashboard</div>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.1)); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 12px; padding: 20px; margin: 20px 0;">
                        <div style="color: #ffd700; font-weight: bold; margin-bottom: 10px;">Launch Special</div>
                        <div style="color: rgba(255,255,255,0.9);">All Pro features FREE until January 1, 2026</div>
                    </div>
                    <div style="margin: 25px 0; display: flex; gap: 15px; flex-direction: column;">
                        <button onclick="startProUpgrade(); closeModal(this);" style="
                            background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; 
                            padding: 15px 25px; border-radius: 25px;
                            cursor: pointer; font-weight: bold; font-size: 16px; width: 100%;
                            transition: all 0.3s ease;
                        ">
                            Get Pro Features Now
                        </button>
                        <button onclick="closeModal(this);" style="
                            background: transparent; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.3); 
                            padding: 12px 20px; border-radius: 20px;
                            cursor: pointer; font-size: 14px; width: 100%;
                            transition: all 0.3s ease;
                        ">
                            Maybe Later
                        </button>
                    </div>
                </div>
            `;
            
            // Add close functionality
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            // Add to body
            document.body.appendChild(modalOverlay);
        }

        function startProUpgrade() {
            // Close the Pro upgrade modal first
            const modal = document.querySelector('div[style*="position: fixed"]');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show business account setup modal
            showBusinessAccountSetup();
        }

        function showBusinessAccountSetup() {
            // Create business setup modal
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a0b3d, #6b46c1);
                    border: 2px solid rgba(255, 215, 0, 0.5);
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    text-align: center;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                ">
                    <h2 style="color: #ffd700; margin-bottom: 20px; font-size: 24px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="color: #ffd700;">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.6)"/>
                        </svg>
                        Create Your Business Account
                    </h2>
                    <p style="margin-bottom: 25px; line-height: 1.6; font-size: 16px; color: rgba(255,255,255,0.9);">
                        Set up your professional MarketPace business profile
                    </p>
                    
                    <form id="businessSetupForm" style="text-align: left;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Name *</label>
                            <input type="text" id="businessName" required style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px;
                            " placeholder="Enter your business name">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Type *</label>
                            <select id="businessType" required style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px;
                            ">
                                <option value="">Select business type...</option>
                                <option value="shop">Shop (Retail Products)</option>
                                <option value="service">Service Provider</option>
                                <option value="entertainment">Entertainment (The Hub)</option>
                                <option value="food">Food & Beverage</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Description *</label>
                            <textarea id="businessDescription" required style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px; height: 80px; resize: vertical;
                            " placeholder="Describe your business and what you offer..."></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Logo</label>
                            <input type="file" id="businessLogo" accept="image/*" style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px;
                            ">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Website/Social Media</label>
                            <input type="url" id="businessLink" style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px;
                            " placeholder="https://your-business-website.com">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Business Phone</label>
                            <input type="tel" id="businessPhone" style="
                                width: 100%; padding: 12px; border: 2px solid rgba(255, 215, 0, 0.3); 
                                border-radius: 8px; background: rgba(255, 255, 255, 0.1); 
                                color: white; font-size: 16px;
                            " placeholder="(555) 123-4567">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; color: #ffd700; font-weight: bold;">Categories (Select all that apply)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="retail" style="margin-right: 8px;"> Retail Products
                                </label>
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="food" style="margin-right: 8px;"> Food & Beverage
                                </label>
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="services" style="margin-right: 8px;"> Professional Services
                                </label>
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="entertainment" style="margin-right: 8px;"> Entertainment
                                </label>
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="home" style="margin-right: 8px;"> Home & Garden
                                </label>
                                <label style="display: flex; align-items: center; color: rgba(255,255,255,0.9);">
                                    <input type="checkbox" value="automotive" style="margin-right: 8px;"> Automotive
                                </label>
                            </div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.1)); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 12px; padding: 15px; margin: 20px 0;">
                            <div style="color: #ffd700; font-weight: bold; margin-bottom: 8px;">Launch Special</div>
                            <div style="color: rgba(255,255,255,0.9); font-size: 14px;">Your business account will have all Pro features FREE until January 1, 2026</div>
                        </div>
                        
                        <div style="margin: 25px 0; display: flex; gap: 15px;">
                            <button type="button" onclick="closeModal(this);" style="
                                background: transparent; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.3); 
                                padding: 12px 20px; border-radius: 20px; cursor: pointer; font-size: 14px; flex: 1;
                            ">
                                Cancel
                            </button>
                            <button type="submit" style="
                                background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; 
                                padding: 15px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; 
                                font-size: 16px; flex: 2;
                            ">
                                Create Business Account
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            // Add form submission handler
            modalOverlay.querySelector('#businessSetupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createBusinessAccount();
            });
            
            // Add close functionality
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        function createBusinessAccount() {
            const form = document.getElementById('businessSetupForm');
            const formData = new FormData(form);
            
            // Collect form data
            const businessData = {
                name: document.getElementById('businessName').value,
                type: document.getElementById('businessType').value,
                description: document.getElementById('businessDescription').value,
                link: document.getElementById('businessLink').value,
                phone: document.getElementById('businessPhone').value,
                categories: Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value),
                logo: document.getElementById('businessLogo').files[0]?.name || null,
                created: new Date().toISOString(),
                proStatus: true,
                freeUntil: '2026-01-01'
            };
            
            // Validate required fields
            if (!businessData.name || !businessData.type || !businessData.description) {
                alert('Please fill in all required fields (Business Name, Type, and Description)');
                return;
            }
            
            // Store business account data
            const personalUser = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            const businessAccounts = JSON.parse(localStorage.getItem('marketpaceBusinessAccounts') || '[]');
            
            // Add owner info to business data
            businessData.ownerId = personalUser.id || Date.now();
            businessData.ownerName = personalUser.name || 'Business Owner';
            businessData.id = Date.now();
            
            // Save business account
            businessAccounts.push(businessData);
            localStorage.setItem('marketpaceBusinessAccounts', JSON.stringify(businessAccounts));
            
            // Set current business account as active
            localStorage.setItem('activeBusinessAccount', JSON.stringify(businessData));
            localStorage.setItem('marketpaceProStatus', 'true');
            
            // Close modal
            const modal = document.querySelector('div[style*="position: fixed"]');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show success message
            showNotification(`${businessData.name} business account created successfully!`, '#ffd700');
            
            // Update UI to show Pro status
            updateProStatus();
            
            // Show account switch options
            setTimeout(() => {
                showAccountSwitcher();
            }, 2000);
        }

        function showAccountSwitcher() {
            const businessAccounts = JSON.parse(localStorage.getItem('marketpaceBusinessAccounts') || '[]');
            const personalUser = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            
            if (businessAccounts.length === 0) return;
            
            alert(`Account Created Successfully!\n\nPersonal Account: ${personalUser.name || 'Your Name'}\nBusiness Account: ${businessAccounts[0].name}\n\nYou can now switch between accounts using the account switcher in your profile menu.`);
        }

        function updateProStatus() {
            const isProUser = localStorage.getItem('marketpaceProStatus') === 'true';
            const businessAccounts = JSON.parse(localStorage.getItem('marketpaceBusinessAccounts') || '[]');
            const accountSwitcher = document.getElementById('accountSwitcher');
            
            // Show account switcher if business accounts exist
            if (businessAccounts.length > 0 && accountSwitcher) {
                accountSwitcher.style.display = 'block';
            }
            
            if (isProUser) {
                // Update Pro button to show Pro member status
                const proButton = document.querySelector('.menu-item[onclick="openProUpgrade()"]');
                if (proButton) {
                    proButton.innerHTML = `
                        <div class="menu-icon">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="color: #ffd700;">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="1.5" fill="rgba(255, 215, 0, 0.6)"/>
                            </svg>
                        </div>
                        <div class="menu-content">
                            <div class="menu-title" style="color: #ffd700;">Pro Member</div>
                            <div class="menu-description">All Pro features unlocked • Free until Jan 1, 2026</div>
                        </div>
                        <div class="pro-badge" style="background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000;">ACTIVE</div>
                    `;
                    proButton.onclick = function() {
                        alert('You are already a Pro member!\n\nAll Pro features are unlocked:\n• Dual account system\n• Shopify/Etsy integration\n• Advanced business tools\n• Priority support\n\nFree until January 1, 2026');
                    };
                }
            }
        }

        function closeModal(button) {
            const modal = button.closest('div[style*="position: fixed"]');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function showAccountSwitcher() {
            const personalUser = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            const businessAccounts = JSON.parse(localStorage.getItem('marketpaceBusinessAccounts') || '[]');
            const activeAccount = JSON.parse(localStorage.getItem('activeBusinessAccount') || '{}');
            
            // Create account switcher modal
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a0b3d, #6b46c1);
                    border: 2px solid rgba(255, 215, 0, 0.5);
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    text-align: center;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                ">
                    <h2 style="color: #ffd700; margin-bottom: 20px; font-size: 24px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="color: #ffd700;">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M22 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Switch Account
                    </h2>
                    <p style="margin-bottom: 25px; line-height: 1.6; font-size: 16px; color: rgba(255,255,255,0.9);">
                        Choose which account to use for MarketPace
                    </p>
                    
                    <div style="text-align: left; margin-bottom: 20px;">
                        <div onclick="switchToPersonal(); closeModal(this);" style="
                            background: ${activeAccount.id ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 255, 255, 0.2)'};
                            border: 2px solid ${activeAccount.id ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 255, 255, 0.5)'};
                            border-radius: 12px;
                            padding: 15px;
                            margin-bottom: 15px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        ">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="
                                    width: 50px;
                                    height: 50px;
                                    background: linear-gradient(135deg, #00ffff, #9d4edd);
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-weight: bold;
                                    color: white;
                                ">
                                    ${(personalUser.name || 'P').charAt(0).toUpperCase()}
                                </div>
                                <div style="flex: 1;">
                                    <div style="color: white; font-weight: bold; font-size: 16px;">${personalUser.name || 'Personal Account'}</div>
                                    <div style="color: rgba(255,255,255,0.7); font-size: 14px;">Personal MarketPace Member</div>
                                    ${!activeAccount.id ? '<div style="color: #00ffff; font-size: 12px; margin-top: 4px;">• Currently Active</div>' : ''}
                                </div>
                            </div>
                        </div>
                        
                        ${businessAccounts.map(business => `
                            <div onclick="switchToBusiness('${business.id}'); closeModal(this);" style="
                                background: ${activeAccount.id === business.id ? 'rgba(255, 215, 0, 0.2)' : 'rgba(255, 255, 255, 0.1)'};
                                border: 2px solid ${activeAccount.id === business.id ? 'rgba(255, 215, 0, 0.5)' : 'rgba(255, 255, 255, 0.3)'};
                                border-radius: 12px;
                                padding: 15px;
                                margin-bottom: 15px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            ">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="
                                        width: 50px;
                                        height: 50px;
                                        background: linear-gradient(135deg, #ffd700, #ff8c00);
                                        border-radius: 50%;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-weight: bold;
                                        color: #000;
                                    ">
                                        ${business.name.charAt(0).toUpperCase()}
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="color: white; font-weight: bold; font-size: 16px;">${business.name}</div>
                                        <div style="color: rgba(255,255,255,0.7); font-size: 14px;">${business.type.charAt(0).toUpperCase() + business.type.slice(1)} • Pro Account</div>
                                        ${activeAccount.id === business.id ? '<div style="color: #ffd700; font-size: 12px; margin-top: 4px;">• Currently Active</div>' : ''}
                                    </div>
                                    <div style="
                                        background: linear-gradient(135deg, #ffd700, #ff8c00);
                                        color: #000;
                                        padding: 4px 8px;
                                        border-radius: 12px;
                                        font-size: 10px;
                                        font-weight: bold;
                                    ">PRO</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin: 25px 0; display: flex; gap: 15px;">
                        <button onclick="closeModal(this);" style="
                            background: transparent; color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.3); 
                            padding: 12px 20px; border-radius: 20px; cursor: pointer; font-size: 14px; flex: 1;
                        ">
                            Cancel
                        </button>
                        ${businessAccounts.length === 0 ? `
                            <button onclick="closeModal(this); openProUpgrade();" style="
                                background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; 
                                padding: 15px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; 
                                font-size: 16px; flex: 2;
                            ">
                                Create Business Account
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Add close functionality
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        function switchToPersonal() {
            localStorage.removeItem('activeBusinessAccount');
            localStorage.setItem('currentAccountType', 'personal');
            showNotification('Switched to personal account', '#00ffff');
            updateUserProfile();
        }

        function switchToBusiness(businessId) {
            const businessAccounts = JSON.parse(localStorage.getItem('marketpaceBusinessAccounts') || '[]');
            const business = businessAccounts.find(b => b.id == businessId);
            
            if (business) {
                localStorage.setItem('activeBusinessAccount', JSON.stringify(business));
                localStorage.setItem('currentAccountType', 'business');
                showNotification(`Switched to ${business.name}`, '#ffd700');
                updateUserProfile();
                updateBusinessDashboard();
            }
        }

        // Business Dashboard Functions
        function updateBusinessDashboard() {
            const activeAccount = JSON.parse(localStorage.getItem('activeBusinessAccount') || '{}');
            
            if (activeAccount.id) {
                // Update business name and type displays
                const businessNameDisplay = document.getElementById('businessNameDisplay');
                const businessTypeDisplay = document.getElementById('businessTypeDisplay');
                
                if (businessNameDisplay) businessNameDisplay.textContent = activeAccount.name || 'Your Business Name';
                if (businessTypeDisplay) businessTypeDisplay.textContent = activeAccount.type || 'Professional Account';
                
                // Update business stats (mock data for demo)
                const stats = JSON.parse(localStorage.getItem(`businessStats_${activeAccount.id}`) || '{"posts": 0, "views": 0, "sales": 0}');
                
                const postsElement = document.getElementById('totalPosts');
                const viewsElement = document.getElementById('totalViews');
                const salesElement = document.getElementById('totalSales');
                
                if (postsElement) postsElement.textContent = stats.posts || '0';
                if (viewsElement) viewsElement.textContent = stats.views || '0';
                if (salesElement) salesElement.textContent = `$${stats.sales || '0'}`;
            }
        }

        function viewBusinessAnalytics() {
            const activeAccount = JSON.parse(localStorage.getItem('activeBusinessAccount') || '{}');
            
            if (!activeAccount.id) {
                showNotification('Please create a business account first', '#ef4444');
                return;
            }
            
            // Mock analytics data
            const analyticsData = {
                posts: Math.floor(Math.random() * 50) + 10,
                views: Math.floor(Math.random() * 2000) + 500,
                sales: Math.floor(Math.random() * 1000) + 100,
                engagement: Math.floor(Math.random() * 25) + 15
            };
            
            // Update localStorage with new stats
            localStorage.setItem(`businessStats_${activeAccount.id}`, JSON.stringify(analyticsData));
            
            // Show analytics modal
            showAnalyticsModal(analyticsData);
            updateBusinessDashboard();
        }

        function showAnalyticsModal(data) {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #ffd700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: center;">
                    <h2 style="color: #ffd700; margin-bottom: 20px;">Business Analytics</h2>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="background: rgba(255,215,0,0.1); padding: 15px; border-radius: 10px; border: 1px solid rgba(255,215,0,0.3);">
                            <div style="color: #ffd700; font-size: 24px; font-weight: bold;">${data.posts}</div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Total Posts</div>
                        </div>
                        <div style="background: rgba(0,255,255,0.1); padding: 15px; border-radius: 10px; border: 1px solid rgba(0,255,255,0.3);">
                            <div style="color: #00ffff; font-size: 24px; font-weight: bold;">${data.views}</div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Total Views</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.1); padding: 15px; border-radius: 10px; border: 1px solid rgba(16,185,129,0.3);">
                            <div style="color: #10b981; font-size: 24px; font-weight: bold;">$${data.sales}</div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Total Sales</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.1); padding: 15px; border-radius: 10px; border: 1px solid rgba(139,92,246,0.3);">
                            <div style="color: #8b5cf6; font-size: 24px; font-weight: bold;">${data.engagement}%</div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Engagement</div>
                        </div>
                    </div>
                    <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;">Close</button>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        function openIntegrationsPanel() {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #ffd700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: left;">
                    <h2 style="color: #ffd700; margin-bottom: 20px; text-align: center;">Platform Integrations</h2>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(16,185,129,0.1); border-radius: 8px; margin-bottom: 10px; border: 1px solid rgba(16,185,129,0.3);">
                            <div>
                                <div style="color: #10b981; font-weight: bold;">Shopify</div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Product sync enabled</div>
                            </div>
                            <div style="background: #10b981; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold;">CONNECTED</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(16,185,129,0.1); border-radius: 8px; margin-bottom: 10px; border: 1px solid rgba(16,185,129,0.3);">
                            <div>
                                <div style="color: #10b981; font-weight: bold;">Facebook Shop</div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Auto-posting enabled</div>
                            </div>
                            <div style="background: #10b981; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold;">CONNECTED</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(245,158,11,0.1); border-radius: 8px; margin-bottom: 10px; border: 1px solid rgba(245,158,11,0.3);">
                            <div>
                                <div style="color: #f59e0b; font-weight: bold;">Etsy</div>
                                <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Approval pending</div>
                            </div>
                            <div style="background: #f59e0b; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold;">PENDING</div>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <button onclick="goToPage('/platform-integrations')" style="background: linear-gradient(135deg, #00ffff, #0099cc); color: white; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer; margin-right: 10px;">Manage All</button>
                        <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;">Close</button>
                    </div>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        function openPromotionPanel() {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #ffd700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: center;">
                    <h2 style="color: #ffd700; margin-bottom: 20px;">Promote Your Business</h2>
                    <div style="background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <div style="color: #ffd700; font-size: 18px; font-weight: bold; margin-bottom: 5px;">$25 Promotion Credit</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 12px;">Available for Facebook ads and local featured posts</div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px;">
                        <button onclick="showNotification('Facebook promotion started!', '#1877f2')" style="background: rgba(24,119,242,0.2); border: 1px solid #1877f2; color: #1877f2; padding: 12px; border-radius: 8px; cursor: pointer;">Facebook Ads</button>
                        <button onclick="showNotification('Local featured enabled!', '#ffd700')" style="background: rgba(255,215,0,0.2); border: 1px solid #ffd700; color: #ffd700; padding: 12px; border-radius: 8px; cursor: pointer;">Local Featured</button>
                        <button onclick="showNotification('Post boosted!', '#00ffff')" style="background: rgba(0,255,255,0.2); border: 1px solid #00ffff; color: #00ffff; padding: 12px; border-radius: 8px; cursor: pointer;">Boost Posts</button>
                        <button onclick="showNotification('Instagram promotion started!', '#e4405f')" style="background: rgba(228,64,95,0.2); border: 1px solid #e4405f; color: #e4405f; padding: 12px; border-radius: 8px; cursor: pointer;">Instagram</button>
                    </div>
                    <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;">Close</button>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        function openAccountSettings() {
            const activeAccount = JSON.parse(localStorage.getItem('activeBusinessAccount') || '{}');
            
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #ffd700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: left;">
                    <h2 style="color: #ffd700; margin-bottom: 20px; text-align: center;">Business Settings</h2>
                    <div style="margin-bottom: 20px;">
                        <div style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">
                            <strong style="color: #ffd700;">Business:</strong> ${activeAccount.name || 'No active business'}
                        </div>
                        <div style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">
                            <strong style="color: #ffd700;">Type:</strong> ${activeAccount.type || 'N/A'}
                        </div>
                        <div style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">
                            <strong style="color: #ffd700;">Status:</strong> Pro Member (Free until 2026)
                        </div>
                    </div>
                    <div style="display: grid; gap: 10px; margin-bottom: 20px;">
                        <button onclick="goToPage('/unified-pro-page')" style="background: rgba(0,255,255,0.2); border: 1px solid #00ffff; color: #00ffff; padding: 12px; border-radius: 8px; cursor: pointer;">Edit Business Profile</button>
                        <button onclick="switchToPersonal(); document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="background: rgba(139,92,246,0.2); border: 1px solid #8b5cf6; color: #8b5cf6; padding: 12px; border-radius: 8px; cursor: pointer;">Switch to Personal</button>
                        <button onclick="goToPage('/settings')" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 12px; border-radius: 8px; cursor: pointer;">Account Settings</button>
                    </div>
                    <div style="text-align: center;">
                        <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="background: linear-gradient(135deg, #ffd700, #ff8c00); color: #000; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;">Close</button>
                    </div>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }

        // Tip Feature Activation System
        function activateTipFeature() {
            // Check if user is a Pro member
            const isProMember = checkProMemberStatus();
            
            if (!isProMember) {
                showUpgradeModal();
                return;
            }
            
            // Check current tip feature status
            const tipFeatureActive = localStorage.getItem('tipFeatureActive') === 'true';
            
            if (tipFeatureActive) {
                showTipManagementModal();
            } else {
                showTipActivationModal();
            }
        }
        
        function checkProMemberStatus() {
            // Check if user has Pro membership
            const proStatus = localStorage.getItem('marketpaceProStatus');
            const activeBusinessAccount = localStorage.getItem('activeBusinessAccount');
            
            return proStatus === 'active' || activeBusinessAccount !== null;
        }
        
        function showTipActivationModal() {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #FFD700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: center;">
                    <h2 style="color: #FFD700; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFD700" stroke="#FFD700" stroke-width="1.5"/>
                        </svg>
                        Activate Tip Feature
                    </h2>
                    <p style="margin-bottom: 25px; line-height: 1.6; color: rgba(255,255,255,0.9);">
                        Enable tip buttons on your posts and profile to receive tips from customers and supporters!
                    </p>
                    <div style="background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px; padding: 20px; margin: 20px 0; text-align: left;">
                        <div style="color: #FFD700; font-weight: bold; margin-bottom: 10px;">Pro Tip Features Include:</div>
                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 8px;">• Tip buttons on all your posts</div>
                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 8px;">• Profile tip button embedding</div>
                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 8px;">• Custom tip amounts ($5-$500)</div>
                        <div style="color: rgba(255,255,255,0.9); margin-bottom: 8px;">• Instant Stripe payments</div>
                        <div style="color: rgba(255,255,255,0.9);">• 100% of tips go to you</div>
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="enableTipFeature()" style="
                            background: linear-gradient(135deg, #FFD700, #FF8C00); color: #1a0b3d; border: none; 
                            padding: 15px 25px; border-radius: 25px; font-weight: bold; cursor: pointer;
                        ">Activate Now</button>
                        <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="
                            background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); 
                            padding: 12px 20px; border-radius: 20px; cursor: pointer;
                        ">Maybe Later</button>
                    </div>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }
        
        function enableTipFeature() {
            // Activate tip feature in localStorage
            localStorage.setItem('tipFeatureActive', 'true');
            localStorage.setItem('tipFeatureActivatedDate', new Date().toISOString());
            
            // Close modal
            const modal = document.querySelector('div[style*="position: fixed"]');
            if (modal) {
                document.body.removeChild(modal);
            }
            
            // Show success notification
            showNotification('Tip feature activated successfully! Tip buttons will now appear on your posts and profile.', '#10b981');
            
            // Update menu to show management options
            updateTipFeatureStatus();
        }
        
        function showTipManagementModal() {
            const modalOverlay = document.createElement('div');
            modalOverlay.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex;
                align-items: center; justify-content: center; backdrop-filter: blur(10px);
            `;
            
            modalOverlay.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0b3d, #6b46c1); border: 2px solid #FFD700; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; text-align: center;">
                    <h2 style="color: #FFD700; margin-bottom: 20px;">Tip Feature Management</h2>
                    <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <div style="color: #10b981; font-weight: bold; margin-bottom: 5px;">Status: ACTIVE</div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 14px;">Tip buttons are enabled on your posts and profile</div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">
                        <button onclick="viewTipSettings()" style="
                            background: linear-gradient(135deg, #00ffff, #0099cc); color: white; border: none; 
                            padding: 12px 20px; border-radius: 20px; font-weight: bold; cursor: pointer;
                        ">Tip Settings</button>
                        <button onclick="viewTipHistory()" style="
                            background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; 
                            padding: 12px 20px; border-radius: 20px; font-weight: bold; cursor: pointer;
                        ">View Tip History</button>
                        <button onclick="disableTipFeature()" style="
                            background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; 
                            padding: 12px 20px; border-radius: 20px; font-weight: bold; cursor: pointer;
                        ">Deactivate Tips</button>
                    </div>
                    <button onclick="document.body.removeChild(this.closest('div[style*=\"position: fixed\"]'))" style="
                        background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); 
                        padding: 12px 20px; border-radius: 20px; cursor: pointer;
                    ">Close</button>
                </div>
            `;
            
            modalOverlay.onclick = function(e) {
                if (e.target === modalOverlay) {
                    document.body.removeChild(modalOverlay);
                }
            };
            
            document.body.appendChild(modalOverlay);
        }
        
        function disableTipFeature() {
            if (confirm('Are you sure you want to deactivate tip features? This will remove tip buttons from your posts and profile.')) {
                localStorage.setItem('tipFeatureActive', 'false');
                showNotification('Tip feature deactivated. Tip buttons have been removed from your posts.', '#ef4444');
                
                const modal = document.querySelector('div[style*="position: fixed"]');
                if (modal) {
                    document.body.removeChild(modal);
                }
                
                updateTipFeatureStatus();
            }
        }
        
        function updateTipFeatureStatus() {
            // Update menu item text based on activation status
            const tipFeatureActive = localStorage.getItem('tipFeatureActive') === 'true';
            // This could update UI elements if needed
        }
        
        function viewTipSettings() {
            showNotification('Tip settings page coming soon! Configure custom amounts and display preferences.', '#8b5cf6');
        }
        
        function viewTipHistory() {
            showNotification('Tip history tracking coming soon! View all received tips and earnings.', '#8b5cf6');
        }
        
        function acceptEmployeeInvitation() {
            // Function to accept employee invitation for existing users
            const inviteData = {
                name: 'Brooke Brown',
                email: 'bb.music93@gmail.com',
                role: 'Singer Songwriter',
                category: 'Employee',
                paymentType: 'per_job',
                paymentAmount: 150,
                businessName: 'Your Business'
            };
            
            // Store employee data in user profile
            const currentUser = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            currentUser.employeeInfo = inviteData;
            localStorage.setItem('marketpaceUser', JSON.stringify(currentUser));
            
            // Show Employee Portal section
            const employeeSection = document.getElementById('employeeSection');
            if (employeeSection) {
                employeeSection.style.display = 'block';
                updateEmployeeInfo(inviteData);
                showNotification('Job invitation accepted! You now have access to the Job Portal.', 'success');
                console.log('Job invitation accepted - Job Portal is now active');
            }
            
            // Hide the accept invitation button
            const acceptButton = document.getElementById('acceptInviteButton');
            if (acceptButton) {
                acceptButton.style.display = 'none';
            }
        }
        
        function enableEmployeePortalDemo() {
            // Check URL for invitation acceptance
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('acceptInvite') === 'employee') {
                acceptEmployeeInvitation();
                return;
            }
            
            // Check if user already has employee status
            const currentUser = JSON.parse(localStorage.getItem('marketpaceUser') || '{}');
            if (currentUser.employeeInfo) {
                // User is already an employee, hide accept button and show portal
                const acceptButton = document.getElementById('acceptInviteButton');
                if (acceptButton) acceptButton.style.display = 'none';
                
                const employeeSection = document.getElementById('employeeSection');
                if (employeeSection) {
                    employeeSection.style.display = 'block';
                    updateEmployeeInfo(currentUser.employeeInfo);
                }
                return;
            }
            
            // Show the accept invitation button for users who haven't accepted yet
            const acceptButton = document.getElementById('acceptInviteButton');
            if (acceptButton) {
                acceptButton.style.display = 'block';
                console.log('Accept Job Invitation button is now visible');
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateCartBadge();
            updateUserProfile();
            initializeNotificationIndicators();
            updateProStatus();
            updateBusinessDashboard();
            checkEmployeeStatus(); // Check if user is an employee
            checkDriverStatus(); // Check if user is an approved driver
            enableEmployeePortalDemo(); // Demo mode for testing
            
            // Update current account and accounts from localStorage
            currentAccount = localStorage.getItem('currentAccount') || 'personal';
            userAccounts = JSON.parse(localStorage.getItem('userAccounts') || '{"personal": {"name": "Demo User"}}');
            
            console.log('MarketPace Menu page loaded successfully');
        });
    </script>
</body>
</html>