<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Scheduling - MarketPace</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 16px 0;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .header-title {
            background: linear-gradient(135deg, #2a0845, #1a0033);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 
                0 0 20px rgba(65, 105, 225, 0.6),
                0 0 40px rgba(0, 102, 255, 0.4),
                0 0 60px rgba(65, 105, 225, 0.2);
            filter: drop-shadow(0 0 8px rgba(65, 105, 225, 0.8));
        }

        .header-utils {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .header-utility-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .header-utility-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }

        /* Navigation */
        .nav-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            padding: 16px;
            margin: 24px 0;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .nav-chips {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-chip {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
        }

        .nav-chip:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        .nav-chip.active {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            color: white;
            border-color: #00ffff;
        }

        /* Business Size Selection */
        .business-size-section {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .business-size-title {
            color: #00ffff;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 16px;
            text-align: center;
        }

        .business-size-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .business-size-card {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .business-size-card:hover {
            border-color: rgba(0, 255, 255, 0.5);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 255, 255, 0.2);
        }

        .business-size-card.selected {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
        }

        .business-size-icon {
            font-size: 48px;
            margin-bottom: 16px;
            display: block;
        }

        .business-size-name {
            color: #00ffff;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .business-size-capacity {
            color: #94a3b8;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .business-size-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .business-size-features li {
            color: #64748b;
            font-size: 12px;
            margin-bottom: 4px;
        }

        /* Bulk Actions */
        .bulk-actions-section {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .bulk-actions-title {
            color: #ffc107;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 16px;
            text-align: center;
        }

        .bulk-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .bulk-action-btn {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
            color: #ffc107;
            padding: 16px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
        }

        .bulk-action-btn:hover {
            background: rgba(255, 193, 7, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-title {
            font-size: 24px;
            font-weight: 600;
            color: #00ffff;
            margin-bottom: 24px;
            text-align: center;
        }

        /* View Switcher */
        .view-switcher {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .view-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            color: white;
        }

        /* Calendar View - Sophisticated Vertical Bar Chart Design */
        .calendar-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(0, 255, 255, 0.1);
        }

        .date-header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
        }

        .nav-arrow {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .nav-arrow:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .week-range {
            color: #e2e8f0;
            font-size: 18px;
            font-weight: 600;
            min-width: 200px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: 40px repeat(7, 1fr);
            gap: 1px;
            background: 
                radial-gradient(circle at 50% 0%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 0% 50%, rgba(255, 20, 147, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 100% 50%, rgba(155, 89, 182, 0.05) 0%, transparent 50%),
                rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 0 60px rgba(0, 255, 255, 0.1),
                inset 0 0 60px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 255, 255, 0.2);
            position: relative;
        }
        
        .calendar-grid::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.8) 30%, 
                rgba(255, 20, 147, 0.6) 70%, 
                transparent 100%);
            animation: scanline 4s ease-in-out infinite;
            z-index: 10;
        }
        
        @keyframes scanline {
            0%, 100% { transform: translateY(0); opacity: 0; }
            50% { transform: translateY(100%); opacity: 1; }
        }

        .time-column {
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
        }

        .time-header {
            height: 28px;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .time-slot {
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00ffff;
            font-size: 7px;
            font-weight: 700;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            background: 
                linear-gradient(90deg, 
                    rgba(0, 0, 0, 0.8) 0%, 
                    rgba(0, 255, 255, 0.05) 50%, 
                    rgba(0, 0, 0, 0.8) 100%);
            text-shadow: 
                0 0 8px rgba(0, 255, 255, 0.6),
                0 1px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .time-slot:hover {
            background: 
                linear-gradient(90deg, 
                    rgba(0, 0, 0, 0.7) 0%, 
                    rgba(0, 255, 255, 0.1) 50%, 
                    rgba(0, 0, 0, 0.7) 100%);
            box-shadow: inset 0 0 15px rgba(0, 255, 255, 0.2);
        }

        .day-column {
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .day-header {
            height: 28px;
            background: 
                linear-gradient(135deg, 
                    rgba(0, 0, 0, 0.9) 0%, 
                    rgba(0, 255, 255, 0.1) 50%, 
                    rgba(0, 0, 0, 0.9) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-bottom: 2px solid rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .day-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.2) 50%, 
                transparent 100%);
            animation: headerSweep 8s ease-in-out infinite;
        }
        
        @keyframes headerSweep {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: -100%; }
        }

        .day-name {
            color: #00ffff;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
            z-index: 1;
            position: relative;
        }

        .day-number {
            color: #e2e8f0;
            font-size: 14px;
            font-weight: 800;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            z-index: 1;
            position: relative;
        }

        .day-schedule {
            position: relative;
            height: 425px;
            background: linear-gradient(to bottom, 
                rgba(0, 0, 0, 0.2) 0%, 
                rgba(0, 0, 0, 0.1) 30%,
                rgba(0, 255, 255, 0.02) 50%, 
                rgba(0, 0, 0, 0.1) 70%,
                rgba(0, 0, 0, 0.2) 100%);
            border-left: 1px solid rgba(0, 255, 255, 0.1);
        }

        .hour-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            pointer-events: none;
        }

        .hour-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(0, 255, 255, 0.1);
            z-index: 1;
        }

        /* Shift Blocks - Vertical Bar Chart Style */
        .shift-block {
            position: absolute;
            left: 4px;
            right: 4px;
            border-radius: 6px;
            padding: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(15px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 5;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .shift-block:hover {
            transform: translateX(3px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.4);
            z-index: 10;
        }

        .shift-info {
            color: white;
            font-size: 9px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            margin-bottom: 1px;
            text-align: center;
            line-height: 1.1;
        }

        .shift-time {
            color: rgba(255, 255, 255, 0.9);
            font-size: 8px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
            text-align: center;
            line-height: 1.1;
        }

        .shift-block.manager {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.25) 0%, 
                rgba(255, 165, 0, 0.2) 50%, 
                rgba(218, 165, 32, 0.15) 100%);
            border: 2px solid rgba(255, 215, 0, 0.5);
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.3),
                inset 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .shift-block.cashier {
            background: linear-gradient(135deg, 
                rgba(0, 255, 127, 0.25) 0%, 
                rgba(46, 204, 113, 0.2) 50%, 
                rgba(39, 174, 96, 0.15) 100%);
            border: 2px solid rgba(0, 255, 127, 0.5);
            box-shadow: 
                0 0 20px rgba(0, 255, 127, 0.3),
                inset 0 0 20px rgba(0, 255, 127, 0.1);
        }

        .shift-block.sales {
            background: linear-gradient(135deg, 
                rgba(255, 20, 147, 0.25) 0%, 
                rgba(231, 76, 60, 0.2) 50%, 
                rgba(192, 57, 43, 0.15) 100%);
            border: 2px solid rgba(255, 20, 147, 0.5);
            box-shadow: 
                0 0 20px rgba(255, 20, 147, 0.3),
                inset 0 0 20px rgba(255, 20, 147, 0.1);
        }

        .shift-block.stock {
            background: linear-gradient(135deg, 
                rgba(52, 152, 219, 0.25) 0%, 
                rgba(41, 128, 185, 0.2) 50%, 
                rgba(44, 62, 80, 0.15) 100%);
            border: 2px solid rgba(52, 152, 219, 0.5);
            box-shadow: 
                0 0 20px rgba(52, 152, 219, 0.3),
                inset 0 0 20px rgba(52, 152, 219, 0.1);
        }

        .shift-block.assistant {
            background: linear-gradient(135deg, 
                rgba(155, 89, 182, 0.25) 0%, 
                rgba(142, 68, 173, 0.2) 50%, 
                rgba(125, 60, 152, 0.15) 100%);
            border: 2px solid rgba(155, 89, 182, 0.5);
            box-shadow: 
                0 0 20px rgba(155, 89, 182, 0.3),
                inset 0 0 20px rgba(155, 89, 182, 0.1);
        }

        .shift-block.security {
            background: linear-gradient(135deg, 
                rgba(239, 68, 68, 0.25) 0%, 
                rgba(220, 38, 38, 0.2) 50%, 
                rgba(185, 28, 28, 0.15) 100%);
            border: 2px solid rgba(239, 68, 68, 0.5);
            box-shadow: 
                0 0 20px rgba(239, 68, 68, 0.3),
                inset 0 0 20px rgba(239, 68, 68, 0.1);
        }

        .calendar-day {
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.1);
            padding: 2px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .calendar-day:hover {
            background: rgba(0, 255, 255, 0.1);
        }

        /* List View */
        .list-view {
            display: none;
        }

        .list-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .list-item:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        /* Add Button */
        .add-btn {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            margin: 16px 0;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #00ffff;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            padding: 24px;
            position: relative;
        }

        /* Mobile-specific modal styles */
        @media (max-width: 768px) {
            .modal-content {
                max-width: 95vw;
                max-height: 90vh;
                width: 95%;
                margin: 5vh auto;
                overflow-y: auto;
                padding: 16px;
            }
            
            .modal-title {
                font-size: 18px;
            }
            
            .form-group {
                margin-bottom: 12px;
            }
            
            .form-input, .form-select {
                padding: 12px;
                font-size: 16px;
            }
            
            .close-btn {
                font-size: 24px;
                padding: 4px;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            color: #00ffff;
            margin: 0;
            font-size: 24px;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: #00ffff;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #94a3b8;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 16px;
        }

        .form-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
        }

        .btn-submit {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Employee Grid Styles */
        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .employee-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .employee-card:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(0, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .employee-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffff, #4169e1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            margin-bottom: 12px;
        }

        .employee-name {
            color: #00ffff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .employee-role {
            color: #94a3b8;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .employee-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        /* Enhanced QR System Styling */
        .qr-system-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .qr-feature-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .qr-feature-card:hover {
            transform: translateY(-2px);
            border-color: rgba(0, 255, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.1);
        }

        .qr-feature-title {
            color: #00ffff;
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .qr-feature-description {
            color: #94a3b8;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .qr-action-btn {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }

        .qr-action-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }

        .qr-scanner-btn {
            background: linear-gradient(135deg, #8a2be2, #4169e1);
        }

        .qr-scanner-btn:hover {
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.3);
        }

        /* Enhanced Form Styling */
        .form-select {
            padding: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 16px;
            width: 100%;
        }

        .form-select option {
            background: #1e293b;
            color: white;
        }

        /* Enhanced Management Buttons */
        .management-btn {
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .management-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        /* Voice Assistant Enhancement */
        .voice-control-compact {
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(138, 43, 226, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(138, 43, 226, 0.6);
            }
        }

        /* Enhanced Calendar Styling */
        .calendar-cell {
            background: rgba(0, 0, 0, 0.6);
            min-height: 80px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 4px;
            position: relative;
            transition: all 0.3s ease;
        }

        .calendar-cell:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.3);
        }

        .shift-block {
            font-size: 10px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .shift-block:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Role Color Options */
        .role-color-option {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .role-color-option:hover {
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .role-color-option.selected {
            border-color: #00ffff;
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3);
        }

        /* Enhanced Schedule View */
        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        .week-navigation {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .week-nav-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .week-nav-btn:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        /* Calendar Cells and Shift Blocks */
        .calendar-cell {
            background: rgba(0, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            min-height: 60px;
            padding: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-cell:hover {
            background: rgba(0, 255, 255, 0.05);
            border-color: rgba(0, 255, 255, 0.2);
        }

        .shift-block {
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .shift-block:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Mobile Responsiveness for Smart Employee Management */
        @media screen and (max-width: 768px) {
            .management-header {
                padding: 12px !important;
                margin-bottom: 16px !important;
            }
            
            .management-header h3 {
                font-size: 18px !important;
                margin-bottom: 8px !important;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 6px !important;
            }
            
            .stat-card {
                padding: 8px !important;
            }
            
            .stat-card div:first-child {
                font-size: 18px !important;
            }
            
            .stat-card div:last-child {
                font-size: 10px !important;
            }
            
            .management-btn {
                padding: 6px 10px !important;
                font-size: 11px !important;
            }
            
            .employee-grid {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }
            
            .employee-card {
                padding: 16px !important;
            }
            
            .tab-title {
                font-size: 20px !important;
                margin-bottom: 16px !important;
            }
        }

        /* Extra small mobile screens */
        @media screen and (max-width: 480px) {
            .management-header {
                padding: 10px !important;
            }
            
            .management-header h3 {
                font-size: 16px !important;
            }
            
            .stats-grid {
                gap: 4px !important;
            }
            
            .stat-card {
                padding: 6px !important;
            }
            
            .stat-card div:first-child {
                font-size: 16px !important;
            }
            
            .stat-card div:last-child {
                font-size: 9px !important;
            }
        }

        /* Voice Assistant Animations */
        @keyframes pulse {
            0%, 100% { 
                opacity: 0.3; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.1);
            }
        }

        .voice-particles {
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Enhanced QR System Styles */
        .qr-system-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .qr-feature-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
        }

        .qr-feature-card:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(0, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .qr-feature-title {
            color: #00ffff;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .qr-feature-description {
            color: #94a3b8;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .qr-action-btn {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }

        .qr-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        .qr-scanner-btn {
            background: linear-gradient(135deg, #8a2be2, #4169e1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-chips {
                flex-direction: column;
                align-items: center;
            }

            .nav-chip {
                width: 100%;
                max-width: 200px;
                text-align: center;
            }

            .employee-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Payment Amount Selector Styles */
        .payment-amount-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 8px;
        }

        .payment-amount-button {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: #e2e8f0;
            border: 2px solid #475569;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;
        }

        .payment-amount-button:hover {
            border-color: #00ffff;
            background: linear-gradient(135deg, #334155, #475569);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        .payment-amount-button.selected {
            background: linear-gradient(135deg, #00ffff, #0ea5e9);
            color: #1e293b;
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            font-weight: 600;
        }

        .selected-amount-display {
            margin-top: 12px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #065f46, #047857);
            color: #d1fae5;
            border-radius: 6px;
            font-weight: 500;
            text-align: center;
        }

        .custom-button {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6) !important;
            border-color: #7c3aed !important;
        }

        .custom-button:hover {
            background: linear-gradient(135deg, #8b5cf6, #a855f7) !important;
            border-color: #8b5cf6 !important;
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.4) !important;
        }

        .custom-amount-section {
            margin-top: 12px;
        }

        /* Payment Stepper Styles */
        .payment-stepper {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 8px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
        }

        .stepper-display {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: #00ffff;
            font-size: 24px;
            font-weight: 600;
            padding: 16px 24px;
            border-radius: 8px;
            border: 2px solid #00ffff;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            letter-spacing: 1px;
        }

        .stepper-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .stepper-btn {
            background: linear-gradient(135deg, #4169e1, #0066ff);
            border: 2px solid #00ffff;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stepper-btn:hover {
            background: linear-gradient(135deg, #0066ff, #4169e1);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .stepper-btn:active {
            transform: scale(0.95);
        }

        /* Sophisticated Workforce Category Button Hover Effects */
        .workforce-category-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .workforce-category-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .workforce-category-btn:hover::before {
            left: 100%;
        }

        .workforce-category-btn:hover {
            transform: translateY(-3px) scale(1.05);
            filter: brightness(1.1) saturate(1.2);
        }

        #selfEmployedBtn:hover {
            background: linear-gradient(135deg, #00ff88 0%, #4ade80 30%, #22c55e 100%) !important;
            border: 2px solid #00ff88 !important;
            color: #000 !important;
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.4), 0 0 20px rgba(0, 255, 136, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.3) !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) !important;
        }

        #employeesBtn:hover {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 30%, #ff8c00 100%) !important;
            border: 2px solid #ffd700 !important;
            color: #000 !important;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.3) !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) !important;
        }

        #contractorsBtn:hover {
            background: linear-gradient(135deg, #8a2be2 0%, #6d28d9 30%, #5b21b6 100%) !important;
            border: 2px solid #8a2be2 !important;
            color: #fff !important;
            box-shadow: 0 8px 25px rgba(138, 43, 226, 0.4), 0 0 20px rgba(138, 43, 226, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.3) !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;
        }

        #volunteersBtn:hover {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 30%, #15803d 100%) !important;
            border: 2px solid #22c55e !important;
            color: #fff !important;
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4), 0 0 20px rgba(34, 197, 94, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.3) !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;
        }

        .workforce-category-btn:active {
            transform: translateY(-1px) scale(1.02);
            transition: all 0.1s ease;
        }

        /* Sophisticated Add Person Button Hover Effects */
        .management-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .management-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .management-btn:hover::before {
            left: 100%;
        }

        .management-btn:hover {
            transform: translateY(-4px) scale(1.08);
            background: linear-gradient(135deg, #00ffff 0%, #4169e1 30%, #0066ff 70%, #003dcc 100%) !important;
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.4), 0 0 25px rgba(0, 255, 255, 0.3), inset 0 2px 5px rgba(255, 255, 255, 0.3) !important;
            filter: brightness(1.15) saturate(1.3);
        }

        .management-btn:active {
            transform: translateY(-2px) scale(1.05);
            transition: all 0.1s ease;
        }

        /* Interactive Workforce Category Transition Animations */
        .workforce-section {
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
        }

        .workforce-section.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
        }

        .workforce-section.slide-out-left {
            opacity: 0;
            transform: translateX(-30px);
        }

        .workforce-section.slide-out-right {
            opacity: 0;
            transform: translateX(30px);
        }

        .workforce-section.slide-in-left {
            opacity: 1;
            transform: translateX(0);
            animation: slideInFromLeft 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .workforce-section.slide-in-right {
            opacity: 1;
            transform: translateX(0);
            animation: slideInFromRight 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes slideInFromLeft {
            0% {
                opacity: 0;
                transform: translateX(-50px) scale(0.95);
            }
            50% {
                opacity: 0.7;
                transform: translateX(10px) scale(1.02);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        @keyframes slideInFromRight {
            0% {
                opacity: 0;
                transform: translateX(50px) scale(0.95);
            }
            50% {
                opacity: 0.7;
                transform: translateX(-10px) scale(1.02);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        /* Workforce Header Animation */
        .workforce-header-transition {
            position: relative;
            overflow: hidden;
        }

        .workforce-header-transition::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.8s ease;
        }

        .workforce-header-transition.animate::before {
            left: 100%;
        }

        /* Category Counter Animation */
        .category-counter {
            display: inline-block;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .category-counter.updating {
            transform: scale(1.2) rotate(5deg);
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        /* Staggered Animation for Cards */
        .person-card, .management-header, .stats-grid {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .workforce-section.active .person-card,
        .workforce-section.active .management-header,
        .workforce-section.active .stats-grid {
            opacity: 1;
            transform: translateY(0);
        }

        .workforce-section.active .person-card:nth-child(1) { transition-delay: 0.1s; }
        .workforce-section.active .person-card:nth-child(2) { transition-delay: 0.2s; }
        .workforce-section.active .person-card:nth-child(3) { transition-delay: 0.3s; }
        .workforce-section.active .person-card:nth-child(4) { transition-delay: 0.4s; }

        .workforce-section.active .management-header { transition-delay: 0.05s; }
        .workforce-section.active .stats-grid { transition-delay: 0.15s; }

        /* Button State Transition Animation */
        .workforce-category-btn.transitioning {
            animation: buttonPulse 0.6s ease;
        }

        @keyframes buttonPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0, 255, 255, 0.2);
            }
            25% {
                transform: scale(1.08);
                box-shadow: 0 8px 25px rgba(0, 255, 255, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 10px 30px rgba(0, 255, 255, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
            }
        }

        /* Loading Spinner Animation for Transitions */
        .transition-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 255, 255, 0.1);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .transition-loading.show {
            opacity: 1;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Particle Effect for Transitions */
        .transition-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ffff;
            border-radius: 50%;
            animation: particleFloat 1.5s ease-out forwards;
            opacity: 0;
        }

        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0);
            }
        }

        /* Progress Bar Animation */
        .transition-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #00ffff, #4169e1, #8a2be2);
            border-radius: 2px;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .transition-progress.animate {
            transform: scaleX(1);
        }

        /* Pro Upgrade Styles */
        .pro-upgrade-section {
            margin-bottom: 32px;
        }

        .pro-upgrade-title {
            color: #ffd700;
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 20px 0;
            text-align: center;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .pro-upgrade-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05) 0%, rgba(0, 0, 0, 0.4) 100%);
            border: 2px solid #ffd700;
            border-radius: 16px;
            padding: 32px;
            position: relative;
            overflow: hidden;
        }

        .pro-upgrade-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .pro-badge {
            position: absolute;
            top: -1px;
            right: 20px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1a1a1a;
            padding: 8px 16px;
            border-radius: 0 0 8px 8px;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 1px;
        }

        .pro-badge-small {
            position: absolute;
            top: 12px;
            right: 16px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1a1a1a;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .pro-features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .pro-feature {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .pro-feature-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 8px;
        }

        .pro-feature div:last-child {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .pro-feature strong {
            color: #ffd700;
            font-size: 16px;
            font-weight: 600;
        }

        .pro-feature span {
            color: #94a3b8;
            font-size: 14px;
        }

        .pro-subscription-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 32px 0;
        }

        .subscription-card {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .subscription-card:hover {
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.2);
        }

        .subscription-card.recommended {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .subscription-card.selected {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .subscription-badge {
            position: absolute;
            top: -1px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1a1a1a;
            padding: 4px 12px;
            border-radius: 0 0 6px 6px;
            font-weight: 600;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .subscription-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .subscription-header h4 {
            color: #ffd700;
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }

        .subscription-price {
            color: #00ffff;
            font-size: 16px;
            font-weight: 700;
        }

        .subscription-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .subscription-features li {
            color: #94a3b8;
            font-size: 14px;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .subscription-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #ffd700;
            font-weight: bold;
        }

        .pro-cta-buttons {
            display: flex;
            gap: 16px;
            margin: 32px 0 16px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .pro-upgrade-btn {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #1a1a1a;
            border: none;
            border-radius: 8px;
            padding: 16px 32px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .pro-upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }

        .pro-trial-btn {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            border: 2px solid #00ffff;
            border-radius: 8px;
            padding: 14px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pro-trial-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Business Profile Styles */
        .business-profile-section {
            margin-bottom: 24px;
        }

        .business-profile-title {
            color: #00ffff;
            font-size: 20px;
            font-weight: 600;
            margin: 0 0 16px 0;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .business-profile-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(30, 41, 59, 0.3) 100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .business-profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
        }

        .business-name-display {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .business-name-label {
            color: #94a3b8;
            font-size: 16px;
            font-weight: 500;
        }

        .business-name-value {
            color: #00ffff;
            font-size: 18px;
            font-weight: 600;
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
        }

        .edit-business-name-btn {
            background: linear-gradient(135deg, #00ffff, #4169e1);
            border: none;
            border-radius: 6px;
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .edit-business-name-btn:hover {
            background: linear-gradient(135deg, #4169e1, #0066ff);
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(0, 255, 255, 0.4);
        }

        .business-size-section, .bulk-actions-section {
            margin-bottom: 24px;
        }

        .business-size-title, .bulk-actions-title {
            color: #00ffff;
            font-size: 20px;
            font-weight: 600;
            margin: 0 0 16px 0;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .business-size-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .business-size-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(30, 41, 59, 0.3) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .business-size-card:hover {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .business-size-card.selected {
            border-color: #00ffff;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.4);
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(30, 41, 59, 0.4) 100%);
        }

        .business-size-icon {
            display: flex;
            justify-content: center;
            margin-bottom: 12px;
        }

        .business-size-name {
            color: #00ffff;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 8px;
        }

        .business-size-capacity {
            color: #94a3b8;
            font-size: 14px;
            text-align: center;
            margin-bottom: 12px;
        }

        .business-size-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .business-size-features li {
            color: #d1d5db;
            font-size: 14px;
            margin-bottom: 6px;
            position: relative;
            padding-left: 16px;
        }

        .business-size-features li::before {
            content: '●';
            color: #00ffff;
            position: absolute;
            left: 0;
            top: 0;
        }

        .bulk-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .bulk-action-btn {
            background: linear-gradient(135deg, #ffc107, #f59e0b);
            border: none;
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .bulk-action-btn:hover {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
        }

        .bulk-action-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="header-content">
                <a href="/marketpace-menu" class="back-btn">← Back</a>
                <h1 class="header-title">MarketPace</h1>
                <div class="header-utils">
                    <button class="header-utility-btn" onclick="toggleViewMode()" title="Switch View">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 6H20M4 12H20M4 18H20" stroke="#00ffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button class="header-utility-btn" onclick="openQuickMessage()" title="Quick Message">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="#00ffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="nav-container">
            <div class="nav-chips">
                <button class="nav-chip active" onclick="showTab('schedule')" data-tab="schedule">
                    Schedule
                </button>
                <button class="nav-chip" onclick="showTab('employees')" data-tab="employees">
                    Workforce Management
                </button>
                <button class="nav-chip" onclick="window.location.href='/employee-geo-qr-system'">
                    QR System
                </button>
            </div>
        </div>

        <!-- Schedule Tab -->
        <div id="schedule" class="tab-content active">
            <div class="tab-title">Schedule Management</div>
            
            <!-- Edit Schedule Button - Super Obvious -->
            <div style="margin: 16px 0 24px 0; text-align: center;">
                <button onclick="openEditSchedule()" style="
                    background: linear-gradient(135deg, #00ffff, #4169e1); 
                    color: white; 
                    border: none; 
                    border-radius: 12px; 
                    padding: 16px 32px; 
                    font-size: 18px; 
                    font-weight: bold; 
                    cursor: pointer; 
                    box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
                    transition: all 0.3s ease;
                    min-width: 200px;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0, 255, 255, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0, 255, 255, 0.3)'">
                    📝 EDIT SCHEDULE
                </button>
                <div style="color: #94a3b8; font-size: 12px; margin-top: 8px;">
                    Add members • Create shifts • Manage locations • Generate QR codes
                </div>
            </div>
            
            <!-- Voice Control at Top -->
            <div class="voice-control-compact" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(65, 105, 225, 0.1)); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #8a2be2, #4169e1); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C13.1 2 14 2.9 14 4V20C14 21.1 13.1 22 12 22C10.9 22 10 21.1 10 20V4C10 2.9 10.9 2 12 2Z" fill="white"/>
                                <path d="M19 10V14C19 17.86 15.86 21 12 21C8.14 21 5 17.86 5 14V10H7V14C7 16.76 9.24 19 12 19C14.76 19 17 16.76 17 14V10H19Z" fill="white"/>
                            </svg>
                        </div>
                        <div>
                            <h3 style="color: #8a2be2; margin: 0; font-size: 18px;">Voice Assistant</h3>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Natural language scheduling</p>
                        </div>
                    </div>
                    <button onclick="activateVoiceCommand()" style="background: linear-gradient(135deg, #8a2be2, #4169e1); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">COMMAND</button>
                </div>
                
                <div id="voiceConsole" style="margin-top: 16px; padding: 12px; background: rgba(0, 0, 0, 0.5); border-radius: 8px; min-height: 40px; color: #00ffff; font-family: monospace; font-size: 12px;">
                    [2:44:05 PM] All systems operational — voice assistant, calendar, employee management, and QR system ready
                </div>
            </div>

            <!-- Pro Business Account Setup (Hidden - auto-activated during launch campaign) -->
            <div id="proUpgradeSection" class="pro-upgrade-section" style="display: none;">
                <h2 class="pro-upgrade-title">Professional Business Account Required</h2>
                <div class="pro-upgrade-card">
                    <div class="pro-badge">PRO</div>
                    <div class="pro-content">
                        <h3 style="color: #ffd700; margin: 0 0 12px 0; font-size: 24px;">Upgrade to Access Business Scheduling</h3>
                        <p style="color: #94a3b8; margin: 0 0 20px 0; font-size: 16px;">
                            Advanced workforce management features require a Professional Business Account with MarketPace Pro subscription.
                        </p>
                        
                        <div class="pro-features-grid">
                            <div class="pro-feature">
                                <div class="pro-feature-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16 4V2C16 1.45 15.55 1 15 1H9C8.45 1 8 1.45 8 2V4H3V6H5V19C5 20.1 5.9 21 7 21H17C18.1 21 19 20.1 19 19V6H21V4H16ZM10 3H14V4H10V3Z" fill="#ffd700"/>
                                    </svg>
                                </div>
                                <div>
                                    <strong>Employee Management</strong>
                                    <span>Invite, schedule, and manage your workforce</span>
                                </div>
                            </div>
                            <div class="pro-feature">
                                <div class="pro-feature-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3.01 3.9 3.01 5L3 19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z" fill="#ffd700"/>
                                    </svg>
                                </div>
                                <div>
                                    <strong>Advanced Scheduling</strong>
                                    <span>Voice-activated and bulk scheduling tools</span>
                                </div>
                            </div>
                            <div class="pro-feature">
                                <div class="pro-feature-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 4.5C14.8 4.4 14.6 4.4 14.4 4.5L12 5.5L9.6 4.5C9.4 4.4 9.2 4.4 9 4.5L3 7V9L8.5 6.5L11 7.5V22H13V7.5L15.5 6.5L21 9Z" fill="#ffd700"/>
                                    </svg>
                                </div>
                                <div>
                                    <strong>Geo QR System</strong>
                                    <span>Location-verified check-ins and time tracking</span>
                                </div>
                            </div>
                            <div class="pro-feature">
                                <div class="pro-feature-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="#ffd700"/>
                                    </svg>
                                </div>
                                <div>
                                    <strong>Business Profile</strong>
                                    <span>Custom business branding and communications</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pro-subscription-options">
                            <div class="subscription-card" onclick="selectSubscription('silver')">
                                <div class="subscription-header">
                                    <h4>Silver Pro</h4>
                                    <span class="subscription-price">$15/month</span>
                                </div>
                                <ul class="subscription-features">
                                    <li>Basic workforce management</li>
                                    <li>Employee scheduling calendar</li>
                                    <li>Standard QR check-ins</li>
                                    <li>Email notifications</li>
                                </ul>
                            </div>
                            <div class="subscription-card recommended" onclick="selectSubscription('gold')">
                                <div class="subscription-badge">RECOMMENDED</div>
                                <div class="subscription-header">
                                    <h4>Gold Pro</h4>
                                    <span class="subscription-price">$25/month</span>
                                </div>
                                <ul class="subscription-features">
                                    <li>Everything in Silver</li>
                                    <li>Voice-activated scheduling</li>
                                    <li>Bulk scheduling actions</li>
                                    <li>Advanced geo QR features</li>
                                    <li>SMS + Email notifications</li>
                                </ul>
                            </div>
                            <div class="subscription-card" onclick="selectSubscription('platinum')">
                                <div class="subscription-header">
                                    <h4>Platinum Pro</h4>
                                    <span class="subscription-price">$50/month</span>
                                </div>
                                <ul class="subscription-features">
                                    <li>Everything in Gold</li>
                                    <li>Multi-location support</li>
                                    <li>Advanced analytics</li>
                                    <li>Custom business branding</li>
                                    <li>Priority support</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="pro-cta-buttons">
                            <button onclick="upgradeToProBusiness()" class="pro-upgrade-btn">
                                Setup Pro Business Account
                            </button>
                            <button onclick="startFreeTrial()" class="pro-trial-btn">
                                Start 14-Day Free Trial
                            </button>
                        </div>
                        
                        <div class="pro-note">
                            <p style="color: #6b7280; font-size: 14px; text-align: center; margin: 16px 0 8px 0;">
                                All Pro features are currently <strong>FREE</strong> during our launch campaign until January 1, 2026!
                            </p>
                            <button onclick="quickActivatePro()" style="background: linear-gradient(135deg, #00ff88, #00cc66); border: none; color: #000; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 12px; margin-top: 8px;">
                                QUICK ACTIVATE FOR TESTING
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar Section -->
            <div id="mainCalendarSection">

            <!-- Business Profile Configuration -->
            <div id="businessProfileSection" class="business-profile-section">
                <h2 class="business-profile-title">Business Profile</h2>
                <div class="business-profile-card">
                    <div class="pro-badge-small">PRO</div>
                    <div class="business-profile-content">
                        <div class="business-name-display" id="businessNameDisplay">
                            <span class="business-name-label">Business Name:</span>
                            <span class="business-name-value" id="businessNameValue">Your Business</span>
                            <button class="edit-business-name-btn" onclick="editBusinessName()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25Z" fill="#00ffff"/>
                                    <path d="M20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z" fill="#00ffff"/>
                                </svg>
                            </button>
                        </div>
                        <div class="business-name-editor" id="businessNameEditor" style="display: none;">
                            <input type="text" id="businessNameInput" placeholder="Enter your business name" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px; margin-bottom: 12px;">
                            <div style="display: flex; gap: 12px;">
                                <button onclick="saveBusinessName()" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600;">Save</button>
                                <button onclick="cancelEditBusinessName()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Cancel</button>
                            </div>
                        </div>
                        <div class="business-info">
                            <p style="color: #94a3b8; font-size: 14px; margin: 12px 0 0 0;">
                                This name will appear in all employee invitations and communications
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Business Size Selection -->
            <div class="business-size-section">
                <h2 class="business-size-title">Select Business Size</h2>
                <div class="business-size-cards">
                    <div class="business-size-card" onclick="selectBusinessSize('small')" data-size="small">
                        <div class="business-size-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 21V12L12 3L21 12V21H15V16H9V21H3Z" stroke="#00ffff" stroke-width="2" fill="rgba(0,255,255,0.1)"/>
                                <path d="M9 9H10V10H9V9Z" fill="#00ffff"/>
                                <path d="M14 9H15V10H14V9Z" fill="#00ffff"/>
                            </svg>
                        </div>
                        <div class="business-size-name">Small Business</div>
                        <div class="business-size-capacity">5-20 people</div>
                        <ul class="business-size-features">
                            <li>Basic scheduling</li>
                            <li>Simple role management</li>
                            <li>Essential QR features</li>
                        </ul>
                    </div>
                    <div class="business-size-card" onclick="selectBusinessSize('medium')" data-size="medium">
                        <div class="business-size-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 21V9L12 2L21 9V21H3Z" stroke="#00ffff" stroke-width="2" fill="rgba(0,255,255,0.1)"/>
                                <rect x="6" y="12" width="2" height="2" fill="#00ffff"/>
                                <rect x="10" y="12" width="2" height="2" fill="#00ffff"/>
                                <rect x="14" y="12" width="2" height="2" fill="#00ffff"/>
                                <rect x="6" y="16" width="2" height="2" fill="#00ffff"/>
                                <rect x="10" y="16" width="2" height="2" fill="#00ffff"/>
                                <rect x="14" y="16" width="2" height="2" fill="#00ffff"/>
                            </svg>
                        </div>
                        <div class="business-size-name">Medium Event</div>
                        <div class="business-size-capacity">20-100 people</div>
                        <ul class="business-size-features">
                            <li>Advanced scheduling</li>
                            <li>Department management</li>
                            <li>Bulk operations</li>
                        </ul>
                    </div>
                    <div class="business-size-card" onclick="selectBusinessSize('large')" data-size="large">
                        <div class="business-size-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2 21V8L12 1L22 8V21H2Z" stroke="#00ffff" stroke-width="2" fill="rgba(0,255,255,0.1)"/>
                                <path d="M12 3V8L8 11H16L12 8V3Z" fill="#00ffff" opacity="0.3"/>
                                <circle cx="6" cy="14" r="1" fill="#00ffff"/>
                                <circle cx="12" cy="14" r="1" fill="#00ffff"/>
                                <circle cx="18" cy="14" r="1" fill="#00ffff"/>
                                <circle cx="6" cy="18" r="1" fill="#00ffff"/>
                                <circle cx="12" cy="18" r="1" fill="#00ffff"/>
                                <circle cx="18" cy="18" r="1" fill="#00ffff"/>
                            </svg>
                        </div>
                        <div class="business-size-name">Large Festival</div>
                        <div class="business-size-capacity">100-500+ people</div>
                        <ul class="business-size-features">
                            <li>Enterprise scheduling</li>
                            <li>Multi-location support</li>
                            <li>Advanced analytics</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Bulk Scheduling Actions -->
            <div class="bulk-actions-section" id="bulkActionsSection" style="display: none;">
                <h2 class="bulk-actions-title">Bulk Scheduling Actions</h2>
                <div class="bulk-actions-grid">
                    <button class="bulk-action-btn" onclick="bulkScheduleByRole()">
                        Schedule by Role
                    </button>
                    <button class="bulk-action-btn" onclick="bulkScheduleByDepartment()">
                        Schedule by Department
                    </button>
                    <button class="bulk-action-btn" onclick="autoFillShifts()">
                        Auto-Fill Shifts
                    </button>
                    <button class="bulk-action-btn" onclick="importSchedule()">
                        Import Schedule
                    </button>
                </div>
                <div style="margin-top: 16px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                    <div id="bulkActionStatus" style="color: #94a3b8; font-size: 14px;">
                        Select a business size to enable bulk scheduling actions
                    </div>
                </div>
            </div>

            <!-- View Toggle Buttons -->
            <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                <button onclick="switchToView('calendar')" class="view-toggle active" style="background: linear-gradient(135deg, #00ffff, #4169e1); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">Calendar</button>
                <button onclick="switchToView('list')" class="view-toggle" style="background: rgba(0, 0, 0, 0.3); color: #94a3b8; border: 1px solid rgba(255, 255, 255, 0.2); padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">List</button>
            </div>

            <!-- Sophisticated Vertical Bar Chart Calendar -->
            <div id="calendar-view" class="calendar-container">
                <!-- Date Header -->
                <div class="date-header">
                    <button class="nav-arrow" onclick="navigateWeek(-1)">‹</button>
                    <span class="week-range">July 20 - 26, 2025</span>
                    <button class="nav-arrow" onclick="navigateWeek(1)">›</button>
                </div>

                <!-- Calendar Grid -->
                <div class="calendar-grid">
                    <!-- Time Column -->
                    <div class="time-column">
                        <div class="time-header"></div>
                        <div class="time-slot">6 AM</div>
                        <div class="time-slot">7 AM</div>
                        <div class="time-slot">8 AM</div>
                        <div class="time-slot">9 AM</div>
                        <div class="time-slot">10 AM</div>
                        <div class="time-slot">11 AM</div>
                        <div class="time-slot">12 PM</div>
                        <div class="time-slot">1 PM</div>
                        <div class="time-slot">2 PM</div>
                        <div class="time-slot">3 PM</div>
                        <div class="time-slot">4 PM</div>
                        <div class="time-slot">5 PM</div>
                        <div class="time-slot">6 PM</div>
                        <div class="time-slot">7 PM</div>
                        <div class="time-slot">8 PM</div>
                        <div class="time-slot">9 PM</div>
                        <div class="time-slot">10 PM</div>
                    </div>

                    <!-- Monday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">MON</div>
                            <div class="day-number">20</div>
                        </div>
                        <div class="day-schedule">
                            <!-- Hour grid lines -->
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Vertical Shift blocks -->
                            <div class="shift-block manager" style="top: 53px; height: 125px;" onclick="editShift('sarah-mon-7-12')">
                                <div class="shift-info">Sarah • Manager</div>
                                <div class="shift-time">7AM-12PM</div>
                            </div>
                            <div class="shift-block cashier" style="top: 78px; height: 125px;" onclick="editShift('mike-mon-9-2')">
                                <div class="shift-info">Mike • Cashier</div>
                                <div class="shift-time">9AM-2PM</div>
                            </div>
                            <div class="shift-block sales" style="top: 103px; height: 225px;" onclick="editShift('jessica-mon-10-7')">
                                <div class="shift-info">Jessica • Sales</div>
                                <div class="shift-time">10AM-7PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Tuesday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">TUE</div>
                            <div class="day-number">21</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Vertical Shift blocks -->
                            <div class="shift-block assistant" style="top: 78px; height: 200px;" onclick="editShift('lisa-tue-8-4')">
                                <div class="shift-info">Lisa • Assistant</div>
                                <div class="shift-time">8AM-4PM</div>
                            </div>
                            <div class="shift-block stock" style="top: 78px; height: 175px;" onclick="editShift('alex-tue-12-7')">
                                <div class="shift-info">Alex • Stock</div>
                                <div class="shift-time">12PM-7PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Wednesday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">WED</div>
                            <div class="day-number">22</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Vertical Shift blocks -->
                            <div class="shift-block manager" style="top: 103px; height: 150px;" onclick="editShift('sarah-wed-9-3')">
                                <div class="shift-info">Sarah • Manager</div>
                                <div class="shift-time">9AM-3PM</div>
                            </div>
                            <div class="shift-block security" style="top: 253px; height: 125px;" onclick="editShift('james-wed-4-9')">
                                <div class="shift-info">James • Security</div>
                                <div class="shift-time">4PM-9PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Thursday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">THU</div>
                            <div class="day-number">23</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 153px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Overlapping Vertical Shift blocks -->
                            <div class="shift-block cashier" style="top: 103px; height: 150px;" onclick="editShift('mike-thu-10-4')">
                                <div class="shift-info">Mike • Cashier</div>
                                <div class="shift-time">10AM-4PM</div>
                            </div>
                            <div class="shift-block sales" style="top: 128px; height: 200px;" onclick="editShift('jessica-thu-11-7')">
                                <div class="shift-info">Jessica • Sales</div>
                                <div class="shift-time">11AM-7PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Friday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">FRI</div>
                            <div class="day-number">24</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 153px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- All-day coverage -->
                            <div class="shift-block manager" style="top: 28px; height: 250px;" onclick="editShift('sarah-fri-7-5')">
                                <div class="shift-info">Sarah • Manager</div>
                                <div class="shift-time">7AM-5PM</div>
                            </div>
                            <div class="shift-block assistant" style="top: 278px; height: 150px;" onclick="editShift('lisa-fri-6-10')">
                                <div class="shift-info">Lisa • Assistant</div>
                                <div class="shift-time">6PM-10PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Saturday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">SAT</div>
                            <div class="day-number">25</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 153px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Weekend coverage -->
                            <div class="shift-block stock" style="top: 78px; height: 200px;" onclick="editShift('alex-sat-9-5')">
                                <div class="shift-info">Alex • Stock</div>
                                <div class="shift-time">9AM-5PM</div>
                            </div>
                            <div class="shift-block security" style="top: 278px; height: 125px;" onclick="editShift('james-sat-6-10')">
                                <div class="shift-info">James • Security</div>
                                <div class="shift-time">6PM-10PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Sunday -->
                    <div class="day-column">
                        <div class="day-header">
                            <div class="day-name">SUN</div>
                            <div class="day-number">26</div>
                        </div>
                        <div class="day-schedule">
                            <div class="hour-grid">
                                <div class="hour-line" style="top: 28px;"></div>
                                <div class="hour-line" style="top: 53px;"></div>
                                <div class="hour-line" style="top: 78px;"></div>
                                <div class="hour-line" style="top: 103px;"></div>
                                <div class="hour-line" style="top: 128px;"></div>
                                <div class="hour-line" style="top: 153px;"></div>
                                <div class="hour-line" style="top: 178px;"></div>
                                <div class="hour-line" style="top: 203px;"></div>
                                <div class="hour-line" style="top: 228px;"></div>
                                <div class="hour-line" style="top: 253px;"></div>
                                <div class="hour-line" style="top: 278px;"></div>
                                <div class="hour-line" style="top: 303px;"></div>
                                <div class="hour-line" style="top: 328px;"></div>
                                <div class="hour-line" style="top: 353px;"></div>
                                <div class="hour-line" style="top: 378px;"></div>
                                <div class="hour-line" style="top: 403px;"></div>
                            </div>
                            <!-- Light Sunday coverage -->
                            <div class="shift-block cashier" style="top: 153px; height: 125px;" onclick="editShift('mike-sun-12-5')">
                                <div class="shift-info">Mike • Cashier</div>
                                <div class="shift-time">12PM-5PM</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div id="list-view" class="list-view">
                <div class="list-item">
                    <h3 style="color: #00ffff; margin-bottom: 8px;">No scheduled shifts</h3>
                    <p style="color: #94a3b8;">Use voice commands or the "Add" button to create shifts.</p>
                </div>
            </div>
        </div>

        </div> <!-- End mainCalendarSection -->

        <!-- Employees Tab -->
        <div id="employees" class="tab-content">
            <div class="tab-title">Workforce Management</div>
            
            <!-- Sophisticated Workforce Category Selector -->
            <div style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)); border: 2px solid rgba(0, 255, 255, 0.3); border-radius: 16px; padding: 20px; margin-bottom: 24px; position: relative; overflow: hidden;" class="workforce-header-transition">
                <!-- Animated Background Effect -->
                <div style="position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, #00ffff, transparent); animation: shimmer 3s infinite;"></div>
                
                <!-- Transition Loading Spinner -->
                <div class="transition-loading" id="transitionLoader"></div>
                
                <!-- Transition Progress Bar -->
                <div class="transition-progress" id="transitionProgress"></div>
                
                <!-- Transition Particles Container -->
                <div class="transition-particles" id="transitionParticles"></div>
                
                <h3 style="color: #00ffff; text-align: center; margin: 0 0 20px 0; font-size: 18px; font-weight: 700; text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);">Workforce Management</h3>
                
                <!-- Sophisticated Button Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-bottom: 20px;">
                    <!-- Self Employed Button -->
                    <button onclick="showWorkforceCategory('self-employed')" id="selfEmployedBtn" class="workforce-category-btn active" style="
                        background: linear-gradient(135deg, #00ff88 0%, #4ade80 50%, #22c55e 100%);
                        color: #000;
                        border: none;
                        padding: 16px 12px;
                        border-radius: 12px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 11px;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.2);
                        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
                    ">
                        <div style="font-size: 10px; opacity: 0.8; margin-bottom: 2px;">PERSONAL</div>
                        SELF EMPLOYED
                    </button>
                    
                    <!-- Employees Button -->
                    <button onclick="showWorkforceCategory('employees')" id="employeesBtn" class="workforce-category-btn" style="
                        background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(0, 0, 0, 0.4));
                        border: 2px solid rgba(255, 215, 0, 0.6);
                        color: #ffd700;
                        padding: 16px 12px;
                        border-radius: 12px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 11px;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
                        text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
                    ">
                        <div style="font-size: 10px; opacity: 0.8; margin-bottom: 2px;">W-2 STATUS</div>
                        EMPLOYEES
                    </button>
                    
                    <!-- Contractors Button -->
                    <button onclick="showWorkforceCategory('contractors')" id="contractorsBtn" class="workforce-category-btn" style="
                        background: linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(0, 0, 0, 0.4));
                        border: 2px solid rgba(138, 43, 226, 0.6);
                        color: #8a2be2;
                        padding: 16px 12px;
                        border-radius: 12px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 11px;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(138, 43, 226, 0.2);
                        text-shadow: 0 0 8px rgba(138, 43, 226, 0.5);
                    ">
                        <div style="font-size: 10px; opacity: 0.8; margin-bottom: 2px;">1099 STATUS</div>
                        CONTRACTORS
                    </button>
                    
                    <!-- Volunteers Button -->
                    <button onclick="showWorkforceCategory('volunteers')" id="volunteersBtn" class="workforce-category-btn" style="
                        background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(0, 0, 0, 0.4));
                        border: 2px solid rgba(34, 197, 94, 0.6);
                        color: #22c55e;
                        padding: 16px 12px;
                        border-radius: 12px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 11px;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
                        text-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
                    ">
                        <div style="font-size: 10px; opacity: 0.8; margin-bottom: 2px;">NO INCOME</div>
                        VOLUNTEERS
                    </button>
                </div>
                
                <!-- Action Buttons -->
                <div style="text-align: center; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                    <button class="management-btn" onclick="showAddPersonModal()" style="
                        background: linear-gradient(135deg, #00ffff 0%, #4169e1 50%, #0066ff 100%);
                        color: #fff;
                        border: none;
                        padding: 14px 28px;
                        border-radius: 10px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 13px;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.2);
                        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
                    ">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 8px; vertical-align: middle;">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Add Person
                    </button>
                    
                    <button class="management-btn" onclick="openWorkforceSettings()" style="
                        background: linear-gradient(135deg, #8a2be2 0%, #6d28d9 50%, #5b21b6 100%);
                        color: #fff;
                        border: none;
                        padding: 14px 28px;
                        border-radius: 10px;
                        cursor: pointer;
                        font-weight: 700;
                        font-size: 13px;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        position: relative;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        box-shadow: 0 6px 20px rgba(138, 43, 226, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.2);
                        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
                    ">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 8px; vertical-align: middle;">
                            <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Workforce Settings
                    </button>
                </div>
            </div>

            <!-- Self Employed Section -->
            <div id="selfEmployedSection" class="workforce-section" style="display: block;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(74, 222, 128, 0.05)); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #00ff88; margin: 0 0 8px 0; font-size: 18px; text-align: center;">SELF EMPLOYED</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Personal Schedule Management | Solo Entrepreneur | Freelancer</p>
                    </div>
                
                <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <div class="stat-card" style="background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #00ff88; font-size: 20px; font-weight: bold;" id="selfScheduledCount">0</div>
                        <div style="color: #94a3b8; font-size: 11px;">Hours This Week</div>
                    </div>
                    <div class="stat-card" style="background: rgba(0, 255, 255, 0.1); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #00ffff; font-size: 20px; font-weight: bold;" id="selfTodayCount">0</div>
                        <div style="color: #94a3b8; font-size: 11px;">Hours Today</div>
                    </div>
                </div>
                </div>

                <div class="person-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px;">
                    <!-- Self-employed person card will be added dynamically -->
                    <div class="person-card" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 0, 0, 0.6)); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.3s ease;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #00ff88, #4ade80); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold; font-size: 16px;">
                                YOU
                            </div>
                            <div>
                                <div style="color: #00ff88; font-weight: 600; font-size: 14px;" id="selfEmployedName">Add Yourself</div>
                                <div style="color: #94a3b8; font-size: 11px;">SELF EMPLOYED</div>
                            </div>
                        </div>
                        <div style="background: rgba(0, 0, 0, 0.4); border-radius: 6px; padding: 8px; margin-bottom: 8px;">
                            <div style="color: #94a3b8; font-size: 10px; margin-bottom: 4px;">This Week Schedule</div>
                            <div style="color: #00ffff; font-size: 12px;">Click to set your schedule</div>
                        </div>
                        <div style="display: flex; gap: 6px;">
                            <button onclick="addSelfToSchedule()" style="background: linear-gradient(135deg, #00ff88, #4ade80); color: #000; border: none; border-radius: 4px; padding: 4px 8px; font-size: 10px; font-weight: 600; cursor: pointer;">Schedule Me</button>
                            <button onclick="viewSelfProfile()" style="background: rgba(0, 255, 255, 0.2); color: #00ffff; border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 4px; padding: 4px 8px; font-size: 10px; cursor: pointer;">View Profile</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees Section -->
            <div id="employeesSection" class="workforce-section" style="display: none;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 179, 71, 0.05)); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #ffd700; margin: 0 0 8px 0; font-size: 18px; text-align: center;">W-2 EMPLOYEES</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Tax Status: W-2 | Benefits Eligible | Payroll Taxes Applied</p>
                    </div>
                
                <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <div class="stat-card" style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #ffd700; font-size: 20px; font-weight: bold;" id="totalEmployeesCount">6</div>
                        <div style="color: #94a3b8; font-size: 11px;">Total Employees</div>
                    </div>
                    <div class="stat-card" style="background: rgba(0, 255, 255, 0.1); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #00ffff; font-size: 20px; font-weight: bold;" id="scheduledTodayCount">4</div>
                        <div style="color: #94a3b8; font-size: 11px;">Scheduled Today</div>
                    </div>
                    <div class="stat-card" style="background: rgba(255, 105, 180, 0.1); border: 1px solid rgba(255, 105, 180, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #ff69b4; font-size: 20px; font-weight: bold;" id="weeklyHoursCount">156</div>
                        <div style="color: #94a3b8; font-size: 11px;">Weekly Hours</div>
                    </div>
                    <div class="stat-card" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                        <div style="color: #22c55e; font-size: 20px; font-weight: bold;" id="avgHourlyRate">$18.75</div>
                        <div style="color: #94a3b8; font-size: 11px;">Avg Hourly</div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Controls -->
            <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 12px; margin-bottom: 16px;">
                <div style="margin-bottom: 12px;">
                    <input type="text" placeholder="Search employees..." style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="employeeSearch">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <select style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="roleFilter">
                            <option value="">All Roles</option>
                            <option value="Manager">Managers</option>
                            <option value="Cashier">Cashiers</option>
                            <option value="Sales">Sales</option>
                            <option value="Stock">Stock</option>
                            <option value="Assistant">Assistants</option>
                            <option value="Security">Security</option>
                        </select>
                    </div>
                    <div>
                        <select style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="statusFilter">
                            <option value="">All Availability</option>
                            <option value="Available">Available</option>
                            <option value="Scheduled">Scheduled</option>
                            <option value="Off Duty">Off Duty</option>
                            <option value="On Break">On Break</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Self Employed Section -->
            <div id="selfEmployedSection" class="workforce-section active" style="display: block;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 255, 136, 0.05)); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #00ff88; margin: 0 0 8px 0; font-size: 18px; text-align: center;">PERSONAL SELF EMPLOYED</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Personal Schedule Management | Solo Business Operations</p>
                    </div>
                    
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <div class="stat-card" style="background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #00ff88; font-size: 20px; font-weight: bold;" id="totalSelfEmployedHours" class="category-counter">40h</div>
                            <div style="color: #94a3b8; font-size: 11px;">Weekly Hours</div>
                        </div>
                        <div class="stat-card" style="background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #00ff88; font-size: 20px; font-weight: bold;" id="selfEmployedRevenue" class="category-counter">$1,200</div>
                            <div style="color: #94a3b8; font-size: 11px;">Weekly Revenue</div>
                        </div>
                    </div>
                </div>
                
                <!-- Self Schedule Management -->
                <div class="person-card" style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #00ff88, #4ade80); display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold; font-size: 18px;">YOU</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Your Business Schedule</h4>
                                <span style="background: linear-gradient(135deg, #00ff88, #4ade80); color: #000; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">PERSONAL</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Self-Employed • Personal Schedule • Active</p>
                        </div>
                        <div style="text-align: right;">
                            <button onclick="addSelfToSchedule()" style="background: linear-gradient(135deg, #00ff88, #4ade80); color: #000; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; cursor: pointer;">Manage Schedule</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees Section -->
            <div id="employeesSection" class="workforce-section" style="display: none;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #ffd700; margin: 0 0 8px 0; font-size: 18px; text-align: center;">W-2 EMPLOYEES</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Tax Status: W-2 | Benefits Eligible | Payroll Taxes | Hourly Wages</p>
                    </div>
                    
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                        <div class="stat-card" style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #ffd700; font-size: 20px; font-weight: bold;" id="totalEmployeesCount" class="category-counter">6</div>
                            <div style="color: #94a3b8; font-size: 11px;">Total Employees</div>
                        </div>
                        <div class="stat-card" style="background: rgba(0, 255, 255, 0.1); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #00ffff; font-size: 20px; font-weight: bold;" id="scheduledTodayCount" class="category-counter">4</div>
                            <div style="color: #94a3b8; font-size: 11px;">Scheduled Today</div>
                        </div>
                        <div class="stat-card" style="background: rgba(255, 105, 180, 0.1); border: 1px solid rgba(255, 105, 180, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #ff69b4; font-size: 20px; font-weight: bold;" id="weeklyHoursCount" class="category-counter">156</div>
                            <div style="color: #94a3b8; font-size: 11px;">Weekly Hours</div>
                        </div>
                        <div class="stat-card" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #22c55e; font-size: 20px; font-weight: bold;" id="avgHourlyRate" class="category-counter">$18.75</div>
                            <div style="color: #94a3b8; font-size: 11px;">Avg Hourly</div>
                        </div>
                    </div>
                </div>

                <!-- Sample Employee Cards -->
                <div class="person-card" style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #ffd700, #ffb347); display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold; font-size: 18px;">S</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Sarah Johnson</h4>
                                <span style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #000; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">EMPLOYEE</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Manager • W-2 Status • Available</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #22c55e; font-weight: bold;">$22.50/hr</div>
                            <div style="color: #94a3b8; font-size: 12px;">40h/week</div>
                        </div>
                    </div>
                </div>

                <div class="person-card" style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #22C55E, #16A34A); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">M</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Mike Rodriguez</h4>
                                <span style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #000; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">EMPLOYEE</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Cashier • W-2 Status • Scheduled</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #22c55e; font-weight: bold;">$18.00/hr</div>
                            <div style="color: #94a3b8; font-size: 12px;">32h/week</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Controls (for employees) -->
            <div id="employeeFilters" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 12px; margin-bottom: 16px; display: none;">
                <div style="margin-bottom: 12px;">
                    <input type="text" placeholder="Search employees..." style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="employeeSearch">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <select style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="roleFilter">
                            <option value="">All Roles</option>
                            <option value="Manager">Managers</option>
                            <option value="Cashier">Cashiers</option>
                            <option value="Sales">Sales</option>
                            <option value="Stock">Stock</option>
                            <option value="Assistant">Assistants</option>
                            <option value="Security">Security</option>
                        </select>
                    </div>
                    <div>
                        <select style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 14px;" id="statusFilter">
                            <option value="">All Availability</option>
                            <option value="Available">Available</option>
                            <option value="Scheduled">Scheduled</option>
                            <option value="Off Duty">Off Duty</option>
                            <option value="On Break">On Break</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Smart Employee Roster -->
            <div style="background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 12px; padding: 20px; margin-bottom: 20px; display: none;" id="employeeRoster">
                <h3 style="color: #00ffff; margin-bottom: 16px; font-size: 18px;">Smart Employee Roster</h3>
                <p style="color: #94a3b8; margin-bottom: 16px;">50 employees available for scheduling</p>
                
                <!-- Sample Employee Cards -->
                <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #ffd700, #ffb347); display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold; font-size: 18px;">S</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Sarah Johnson</h4>
                                <span style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #000; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">EMPLOYEE</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Manager • W-2 Status • Available</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #22c55e; font-weight: bold;">$22.50/hr</div>
                            <div style="color: #94a3b8; font-size: 12px;">40h/week</div>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #22C55E, #16A34A); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">M</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Mike Rodriguez</h4>
                                <span style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #000; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">EMPLOYEE</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Cashier • W-2 Status • Scheduled</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #22c55e; font-weight: bold;">$18.00/hr</div>
                            <div style="color: #94a3b8; font-size: 12px;">32h/week</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Independent Contractors Section -->
            <div id="contractorsSection" class="workforce-section" style="display: none;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(138, 43, 226, 0.05)); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #8a2be2; margin: 0 0 8px 0; font-size: 18px; text-align: center;">INDEPENDENT CONTRACTORS</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Tax Status: 1099 | Self-Employed | No Benefits | Tax Tracker Required</p>
                    </div>
                    
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <div class="stat-card" style="background: rgba(138, 43, 226, 0.1); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #8a2be2; font-size: 20px; font-weight: bold;" id="totalContractorsCount">3</div>
                            <div style="color: #94a3b8; font-size: 11px;">Total Contractors</div>
                        </div>
                        <div class="stat-card" style="background: rgba(138, 43, 226, 0.1); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #8a2be2; font-size: 20px; font-weight: bold;" id="contractorEarningsCount">$2,450</div>
                            <div style="color: #94a3b8; font-size: 11px;">Weekly Earnings</div>
                        </div>
                    </div>
                </div>

                <!-- Sample Contractor Cards -->
                <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #8B5CF6, #7C3AED); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">A</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Alex Kim</h4>
                                <span style="background: linear-gradient(135deg, #8a2be2, #6d28d9); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">CONTRACTOR</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Stock Specialist • 1099 Status • Available</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #8a2be2; font-weight: bold;">$25.00/job</div>
                            <div style="color: #94a3b8; font-size: 12px;">Self-Employed</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Volunteers Section -->
            <div id="volunteersSection" class="workforce-section" style="display: none;">
                <div class="management-header" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05)); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="margin-bottom: 12px;">
                        <h3 style="color: #22c55e; margin: 0 0 8px 0; font-size: 18px; text-align: center;">VOLUNTEERS</h3>
                        <p style="color: #94a3b8; margin: 0; text-align: center; font-size: 12px;">Tax Status: No Income | Unpaid Service | Recognition Only</p>
                    </div>
                    
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <div class="stat-card" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #22c55e; font-size: 20px; font-weight: bold;" id="totalVolunteersCount">2</div>
                            <div style="color: #94a3b8; font-size: 11px;">Active Volunteers</div>
                        </div>
                        <div class="stat-card" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; padding: 10px; text-align: center;">
                            <div style="color: #22c55e; font-size: 20px; font-weight: bold;" id="volunteerHoursCount">48h</div>
                            <div style="color: #94a3b8; font-size: 11px;">Weekly Hours</div>
                        </div>
                    </div>
                </div>

                <!-- Sample Volunteer Cards -->
                <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #22c55e, #16a34a); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px;">J</div>
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                <h4 style="color: #00ffff; margin: 0;">Jessica Torres</h4>
                                <span style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">VOLUNTEER</span>
                            </div>
                            <p style="color: #94a3b8; margin: 0; font-size: 14px;">Event Helper • Unpaid Service • Available</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #22c55e; font-weight: bold;">Unpaid</div>
                            <div style="color: #94a3b8; font-size: 12px;">24h/week</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Summary -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; text-align: center;">
                    <h3 style="color: #00ffff; margin-bottom: 8px;">TOTAL HOURS</h3>
                    <div style="color: #00ffff; font-size: 32px; font-weight: bold;">156h</div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; text-align: center;">
                    <h3 style="color: #00ffff; margin-bottom: 8px;">EMPLOYEES</h3>
                    <div style="color: #00ffff; font-size: 32px; font-weight: bold;">6 Active</div>
                </div>
            </div>
        </div>



        <!-- QR System Tab -->
        <div id="qr-system" class="tab-content">
            <div class="tab-title">Employee QR Check-In System</div>
            
            <!-- Enhanced Worker Tracking Banner -->
            <div style="background: linear-gradient(135deg, #00ffff, #4169e1); border-radius: 15px; padding: 25px; margin-bottom: 30px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.2);">
                <h3 style="color: #000; font-size: 1.4rem; font-weight: bold; margin-bottom: 10px;">
                    🚀 Enhanced Individual Worker Tracking System
                </h3>
                <p style="color: #000; margin-bottom: 20px; opacity: 0.8;">
                    Comprehensive worker management with detailed time tracking, session analytics, and real-time earnings calculation
                </p>
                <button onclick="window.open('/enhanced-worker-tracking.html', '_blank')" 
                        style="background: #000; color: #00ffff; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; transition: all 0.3s ease;">
                    View Enhanced Worker Dashboard →
                </button>
            </div>
            
            <!-- QR System Overview -->
            <div class="qr-system-grid">
                <div class="qr-feature-card">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                        <div class="qr-feature-title">Generate QR Codes</div>
                        <div style="background: linear-gradient(135deg, #00ffff, #4169e1); padding: 8px; border-radius: 8px;">
                            <div style="width: 24px; height: 24px; background: white; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #000;">QR</div>
                        </div>
                    </div>
                    <div class="qr-feature-description">
                        Generate QR codes for employees to check in and out of shifts with GPS verification.
                    </div>
                    <button class="qr-action-btn" onclick="showGenerateQRModal()">Generate QR Codes</button>
                </div>

                <div class="qr-feature-card">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                        <div class="qr-feature-title">QR Scanner</div>
                        <div style="background: linear-gradient(135deg, #8a2be2, #4169e1); padding: 8px; border-radius: 8px;">
                            <div style="width: 24px; height: 24px; background: white; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #000;">📱</div>
                        </div>
                    </div>
                    <div class="qr-feature-description">
                        Scan employee QR codes to verify check-ins and process automatic payments.
                    </div>
                    <button class="qr-action-btn qr-scanner-btn" onclick="openQRScanner()">QR Scanner</button>
                </div>
            </div>

            <!-- QR Code Assignment Management -->
            <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                <h3 style="color: #00ffff; margin-bottom: 16px;">QR Code Location Management</h3>
                <p style="color: #94a3b8; margin-bottom: 16px; line-height: 1.6;">
                    Manage QR codes for different work locations and assign employees to specific codes. Perfect for businesses with multiple locations or work areas.
                </p>
                
                <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="qr-action-btn" onclick="showQRLocationManager()" style="background: linear-gradient(135deg, #00ffff, #4169e1);">Manage QR Locations</button>
                    <button class="qr-action-btn" onclick="showEmployeeGeoQR()" style="background: linear-gradient(135deg, #22c55e, #16a34a);">Generate New QR Code</button>
                    <button class="qr-action-btn" onclick="showEmployeeQRAssignments()" style="background: linear-gradient(135deg, #f59e0b, #d97706);">View Employee Assignments</button>
                </div>

                <!-- Current QR Locations Overview -->
                <div id="qrLocationsOverview" style="background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 16px;">
                    <h4 style="color: #00ffff; margin-bottom: 12px; font-size: 16px;">Current QR Code Locations</h4>
                    <div id="qrLocationsList" style="color: #94a3b8;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <div>
                                <strong style="color: #00ffff;">Main Store Location</strong><br>
                                <span style="font-size: 12px;">Brown Barnes - 3 employees assigned</span>
                            </div>
                            <div style="background: rgba(0, 255, 255, 0.2); color: #00ffff; padding: 4px 8px; border-radius: 4px; font-size: 12px;">ACTIVE</div>
                        </div>
                        <div style="text-align: center; padding: 12px; color: #64748b; font-style: italic;">
                            Click "Manage QR Locations" to add more locations or assign employees
                        </div>
                    </div>
                </div>
            </div>

            <!-- QR Scanner Details -->
            <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(138, 43, 226, 0.2); border-radius: 12px; padding: 24px;">
                <h3 style="color: #8a2be2; margin-bottom: 16px;">QR Scanner</h3>
                <p style="color: #94a3b8; margin-bottom: 16px; line-height: 1.6;">
                    Scan employee QR codes to verify check-ins and process automatic payments. This ensures accurate time tracking and immediate payment processing.
                </p>
                <button class="qr-action-btn qr-scanner-btn" onclick="openQRScanner()" style="max-width: 300px;">Open QR Scanner</button>
            </div>
        </div>
    </div>

    <!-- Add Person Modal -->
    <div id="addEmployeeModal" class="modal">
        <div class="modal-content" style="max-width: 95vw; max-height: 90vh; width: 100%; margin: 5vh auto; overflow-y: auto; box-sizing: border-box;">
            <div class="modal-header">
                <h3 class="modal-title">Add New Person to Workforce</h3>
                <button class="close-btn" onclick="closeAddEmployeeModal()">×</button>
            </div>
            
            <form id="addEmployeeForm" onsubmit="addNewEmployee(event)">
                <div style="display: grid; grid-template-columns: 1fr; gap: 16px;">
                    <div class="form-group">
                        <label class="form-label">Full Name *</label>
                        <input type="text" class="form-input" id="newEmployeeName" placeholder="Enter employee name" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Phone Number *</label>
                        <input type="tel" class="form-input" id="newEmployeePhone" placeholder="(555) 123-4567" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-input" id="newEmployeeEmail" placeholder="employee@example.com" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Payment Type *</label>
                    <select class="form-select" id="newEmployeePaymentType" required onchange="togglePaymentFields()">
                        <option value="">Select Payment Type</option>
                        <option value="hourly">Hourly Rate</option>
                        <option value="per_job">Per Job Base Pay</option>
                        <option value="salary">Salary</option>
                        <option value="commission">Commission Based</option>
                    </select>
                </div>

                <div class="form-group" id="paymentAmountGroup" style="display: none;">
                    <label class="form-label" id="paymentAmountLabel">Amount ($) *</label>
                    
                    <!-- Quick Preset Buttons (shown only for hourly) -->
                    <div id="hourlyPresets" style="display: none; margin-bottom: 12px;">
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px;">
                            <button type="button" onclick="setHourlyRate(10)" style="background: rgba(0,255,255,0.1); border: 1px solid rgba(0,255,255,0.3); color: #00ffff; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">$10</button>
                            <button type="button" onclick="setHourlyRate(12)" style="background: rgba(0,255,255,0.1); border: 1px solid rgba(0,255,255,0.3); color: #00ffff; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">$12</button>
                            <button type="button" onclick="setHourlyRate(15)" style="background: rgba(0,255,255,0.1); border: 1px solid rgba(0,255,255,0.3); color: #00ffff; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">$15</button>
                            <button type="button" onclick="setHourlyRate(18)" style="background: rgba(0,255,255,0.1); border: 1px solid rgba(0,255,255,0.3); color: #00ffff; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">$18</button>
                            <button type="button" onclick="setHourlyRate(20)" style="background: rgba(0,255,255,0.1); border: 1px solid rgba(0,255,255,0.3); color: #00ffff; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">$20</button>
                        </div>
                        <div style="color: #94a3b8; font-size: 11px; text-align: center;">Quick rates or use arrows below</div>
                    </div>
                    
                    <div class="payment-stepper" id="paymentStepper">
                        <div class="stepper-display" id="stepperDisplay" onclick="showDirectInput()" style="cursor: pointer;" title="Click to enter amount directly">0.00</div>
                        <div class="stepper-controls">
                            <button type="button" class="stepper-btn stepper-up" onclick="adjustPayment(1)" title="Increase by $1.00">▲</button>
                            <button type="button" class="stepper-btn stepper-down" onclick="adjustPayment(-1)" title="Decrease by $1.00">▼</button>
                        </div>
                    </div>
                    
                    <!-- Direct Input (hidden) -->
                    <input type="number" id="directAmountInput" style="display: none; margin-top: 8px; width: 100%; padding: 8px; border: 1px solid rgba(0,255,255,0.3); border-radius: 6px; background: rgba(0,0,0,0.3); color: #fff;" placeholder="Enter amount directly" step="0.25" min="0">
                    
                    <input type="hidden" id="newEmployeePaymentAmount" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Status *</label>
                    <select class="form-select" id="newEmployeeStatus" required>
                        <option value="">Select Status</option>
                        <option value="Available">Available</option>
                        <option value="Scheduled">Scheduled</option>
                        <option value="Off Duty">Off Duty</option>
                        <option value="On Break">On Break</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Role *</label>
                    <div style="display: flex; gap: 8px;">
                        <select class="form-select" id="newEmployeeRole" required style="flex: 1;">
                            <option value="">Select Role</option>
                            <option value="Manager">Manager</option>
                            <option value="Cashier">Cashier</option>
                            <option value="Sales Associate">Sales Associate</option>
                            <option value="Stock Clerk">Stock Clerk</option>
                            <option value="Assistant">Assistant</option>
                            <option value="Security">Security</option>
                            <option value="custom">+ Custom Role</option>
                        </select>
                        <button type="button" onclick="showCustomRoleInput()" style="background: rgba(138, 43, 226, 0.2); border: 1px solid rgba(138, 43, 226, 0.5); color: #8a2be2; padding: 8px 12px; border-radius: 6px; cursor: pointer;">+</button>
                    </div>
                    <input type="text" class="form-input" id="customRoleInput" placeholder="Enter custom role" style="display: none; margin-top: 8px;">
                </div>

                <div class="form-group">
                    <label class="form-label">Position Category *</label>
                    <select class="form-select" id="newEmployeeCategory" required>
                        <option value="">Select Category</option>
                        <option value="Employee">Employee</option>
                        <option value="Volunteer">Volunteer</option>
                        <option value="Independent Contractor">Independent Contractor</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Role Color</label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="roleColorOptions">
                        <div class="role-color-option selected" data-color="#00ffff" style="background: linear-gradient(135deg, #00ffff, #4169e1);"></div>
                        <div class="role-color-option" data-color="#10b981" style="background: linear-gradient(135deg, #10b981, #059669);"></div>
                        <div class="role-color-option" data-color="#f59e0b" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                        <div class="role-color-option" data-color="#ef4444" style="background: linear-gradient(135deg, #ef4444, #dc2626);"></div>
                        <div class="role-color-option" data-color="#8b5cf6" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"></div>
                        <div class="role-color-option" data-color="#06b6d4" style="background: linear-gradient(135deg, #06b6d4, #0891b2);"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="sendInvitation" checked style="margin-right: 8px;">
                        Send invitation via SMS and Email
                    </label>
                    <p style="color: #94a3b8; font-size: 12px; margin-top: 4px;">
                        Employee will receive welcome message with setup instructions and access to MarketPace employee portal
                    </p>
                </div>

                <div class="form-buttons">
                    <button type="button" class="btn-cancel" onclick="closeAddEmployeeModal()">Cancel</button>
                    <button type="submit" class="btn-submit">Add Employee & Send Invitation</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Custom Role Management Modal -->
    <div id="customRoleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Manage Custom Roles</h3>
                <button class="close-btn" onclick="closeCustomRoleModal()">×</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Create New Role</label>
                <div style="display: flex; gap: 8px;">
                    <input type="text" class="form-input" id="newCustomRole" placeholder="Enter role name" style="flex: 1;">
                    <button type="button" onclick="addCustomRole()" class="btn-submit" style="padding: 8px 16px;">Add</button>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Existing Custom Roles</label>
                <div id="customRolesList" style="max-height: 200px; overflow-y: auto;">
                    <p style="color: #94a3b8; text-align: center; padding: 20px;">No custom roles created yet</p>
                </div>
            </div>

            <div class="form-buttons">
                <button type="button" class="btn-cancel" onclick="closeCustomRoleModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Tab Navigation Functions
        function showTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav chips
            document.querySelectorAll('.nav-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            
            // Show selected tab
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
                console.log('Successfully switched to', tabName, 'tab');
            } else {
                console.error('Tab with ID', tabName, 'not found');
            }
            
            // Add active class to clicked nav chip
            const activeChip = document.querySelector(`[onclick="showTab('${tabName}')"]`);
            if (activeChip) {
                activeChip.classList.add('active');
            }
            
            showNotification(`Switched to ${tabName} section`, 'success');
        }

        // View Switching Functions
        function switchToView(viewType) {
            console.log('Switching to view:', viewType);
            
            const calendarView = document.getElementById('calendar-view');
            const listView = document.getElementById('list-view');
            const calendarBtn = document.querySelector('[onclick="switchToView(\'calendar\')"]');
            const listBtn = document.querySelector('[onclick="switchToView(\'list\')"]');
            
            if (viewType === 'calendar') {
                if (calendarView) calendarView.style.display = 'block';
                if (listView) listView.style.display = 'none';
                if (calendarBtn) calendarBtn.classList.add('active');
                if (listBtn) listBtn.classList.remove('active');
            } else {
                if (calendarView) calendarView.style.display = 'none';
                if (listView) listView.style.display = 'block';
                if (calendarBtn) calendarBtn.classList.remove('active');
                if (listBtn) listBtn.classList.add('active');
            }
            
            showNotification(`Switched to ${viewType} view`, 'success');
        }

        // Modal Functions
        // Workforce Category Functions
        // Interactive Workforce Category Transition with Advanced Animations
        function showWorkforceCategory(category) {
            console.log('🔄 Starting sophisticated transition to:', category);
            
            // Get current active section to determine slide direction
            const currentActive = document.querySelector('.workforce-section.active');
            const currentCategory = getCurrentCategory();
            
            // Show loading state and transition effects
            startTransitionEffects();
            
            // Add transitioning class to clicked button
            const clickedBtn = document.getElementById(getCategoryButtonId(category));
            if (clickedBtn) {
                clickedBtn.classList.add('transitioning');
            }
            
            // Determine slide direction based on category order
            const categoryOrder = ['self-employed', 'employees', 'contractors', 'volunteers'];
            const currentIndex = categoryOrder.indexOf(currentCategory);
            const newIndex = categoryOrder.indexOf(category);
            const slideDirection = newIndex > currentIndex ? 'right' : 'left';
            
            // Phase 1: Slide out current section
            if (currentActive) {
                currentActive.classList.remove('active');
                currentActive.classList.add(slideDirection === 'right' ? 'slide-out-left' : 'slide-out-right');
                
                // Animate counters out
                animateCountersOut(currentActive);
            }
            
            // Phase 2: Reset all button styles with sophisticated animations
            setTimeout(() => {
                resetAllButtonStyles();
                updateTransitionProgress(33);
            }, 200);
            
            // Phase 3: Show new section with slide animation
            setTimeout(() => {
                // Hide all sections first
                hideAllSections();
                
                // Show and animate new section
                const newSection = document.getElementById(getSectionId(category));
                if (newSection) {
                    newSection.style.display = 'block';
                    newSection.classList.remove('slide-out-left', 'slide-out-right');
                    newSection.classList.add('active');
                    newSection.classList.add(slideDirection === 'right' ? 'slide-in-right' : 'slide-in-left');
                    
                    // Animate counters in
                    setTimeout(() => {
                        animateCountersIn(newSection);
                    }, 300);
                }
                
                // Activate button with sophisticated styling
                activateButton(category);
                updateTransitionProgress(66);
                
            }, 400);
            
            // Phase 4: Complete transition
            setTimeout(() => {
                completeTransition(category);
                updateTransitionProgress(100);
                
                // Clean up transitioning classes
                document.querySelectorAll('.workforce-category-btn').forEach(btn => {
                    btn.classList.remove('transitioning');
                });
                
                // Hide transition effects
                setTimeout(() => {
                    hideTransitionEffects();
                }, 300);
                
            }, 800);
            
            // Trigger header animation
            triggerHeaderAnimation();
            
            showNotification(`✨ Switched to ${category.replace('-', ' ')} category`, 'success');
        }
        
        // Helper Functions for Sophisticated Transitions
        function getCurrentCategory() {
            const activeSection = document.querySelector('.workforce-section.active');
            if (!activeSection) return 'self-employed';
            
            const id = activeSection.id;
            if (id === 'selfEmployedSection') return 'self-employed';
            if (id === 'employeesSection') return 'employees';
            if (id === 'contractorsSection') return 'contractors';
            if (id === 'volunteersSection') return 'volunteers';
            return 'self-employed';
        }
        
        function getCategoryButtonId(category) {
            const mapping = {
                'self-employed': 'selfEmployedBtn',
                'employees': 'employeesBtn',
                'contractors': 'contractorsBtn',
                'volunteers': 'volunteersBtn'
            };
            return mapping[category];
        }
        
        function getSectionId(category) {
            const mapping = {
                'self-employed': 'selfEmployedSection',
                'employees': 'employeesSection',
                'contractors': 'contractorsSection',
                'volunteers': 'volunteersSection'
            };
            return mapping[category];
        }
        
        function startTransitionEffects() {
            // Show loading spinner
            const loader = document.getElementById('transitionLoader');
            if (loader) loader.classList.add('show');
            
            // Start progress bar
            const progress = document.getElementById('transitionProgress');
            if (progress) {
                progress.style.transform = 'scaleX(0)';
                setTimeout(() => {
                    progress.classList.add('animate');
                }, 50);
            }
            
            // Create particles
            createTransitionParticles();
        }
        
        function updateTransitionProgress(percentage) {
            const progress = document.getElementById('transitionProgress');
            if (progress) {
                progress.style.transform = `scaleX(${percentage / 100})`;
            }
        }
        
        function hideTransitionEffects() {
            const loader = document.getElementById('transitionLoader');
            if (loader) loader.classList.remove('show');
            
            const progress = document.getElementById('transitionProgress');
            if (progress) {
                progress.classList.remove('animate');
                progress.style.transform = 'scaleX(0)';
            }
        }
        
        function createTransitionParticles() {
            const container = document.getElementById('transitionParticles');
            if (!container) return;
            
            // Clear existing particles
            container.innerHTML = '';
            
            // Create 15 particles
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 1 + 's';
                container.appendChild(particle);
            }
        }
        
        function animateCountersOut(section) {
            const counters = section.querySelectorAll('.category-counter');
            counters.forEach(counter => {
                counter.classList.add('updating');
                setTimeout(() => {
                    counter.classList.remove('updating');
                }, 400);
            });
        }
        
        function animateCountersIn(section) {
            const counters = section.querySelectorAll('.category-counter');
            counters.forEach((counter, index) => {
                setTimeout(() => {
                    counter.classList.add('updating');
                    setTimeout(() => {
                        counter.classList.remove('updating');
                    }, 400);
                }, index * 100);
            });
        }
        
        function resetAllButtonStyles() {
            document.querySelectorAll('.workforce-category-btn').forEach(btn => {
                btn.classList.remove('active');
                
                // Apply sophisticated inactive styles
                if (btn.id === 'selfEmployedBtn') {
                    btn.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 0, 0, 0.4))';
                    btn.style.border = '2px solid rgba(0, 255, 136, 0.6)';
                    btn.style.color = '#00ff88';
                    btn.style.boxShadow = '0 4px 15px rgba(0, 255, 136, 0.2)';
                } else if (btn.id === 'employeesBtn') {
                    btn.style.background = 'linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(0, 0, 0, 0.4))';
                    btn.style.border = '2px solid rgba(255, 215, 0, 0.6)';
                    btn.style.color = '#ffd700';
                    btn.style.boxShadow = '0 4px 15px rgba(255, 215, 0, 0.2)';
                } else if (btn.id === 'contractorsBtn') {
                    btn.style.background = 'linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(0, 0, 0, 0.4))';
                    btn.style.border = '2px solid rgba(138, 43, 226, 0.6)';
                    btn.style.color = '#8a2be2';
                    btn.style.boxShadow = '0 4px 15px rgba(138, 43, 226, 0.2)';
                } else if (btn.id === 'volunteersBtn') {
                    btn.style.background = 'linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(0, 0, 0, 0.4))';
                    btn.style.border = '2px solid rgba(34, 197, 94, 0.6)';
                    btn.style.color = '#22c55e';
                    btn.style.boxShadow = '0 4px 15px rgba(34, 197, 94, 0.2)';
                }
            });
        }
        
        function hideAllSections() {
            document.getElementById('selfEmployedSection').style.display = 'none';
            document.getElementById('employeesSection').style.display = 'none';
            document.getElementById('contractorsSection').style.display = 'none';
            document.getElementById('volunteersSection').style.display = 'none';
            
            // Remove all animation classes
            document.querySelectorAll('.workforce-section').forEach(section => {
                section.classList.remove('active', 'slide-out-left', 'slide-out-right', 'slide-in-left', 'slide-in-right');
            });
        }
        
        function activateButton(category) {
            const btnId = getCategoryButtonId(category);
            const btn = document.getElementById(btnId);
            if (!btn) return;
            
            btn.classList.add('active');
            
            // Apply sophisticated active styles
            switch(category) {
                case 'self-employed':
                    btn.style.background = 'linear-gradient(135deg, #00ff88 0%, #4ade80 50%, #22c55e 100%)';
                    btn.style.color = '#000';
                    btn.style.border = 'none';
                    btn.style.boxShadow = '0 4px 15px rgba(0, 255, 136, 0.3), inset 0 1px 3px rgba(255, 255, 255, 0.2)';
                    break;
                case 'employees':
                    btn.style.background = 'linear-gradient(135deg, #ffd700 0%, #ffb347 50%, #ff8c00 100%)';
                    btn.style.color = '#000';
                    btn.style.border = 'none';
                    btn.style.boxShadow = '0 4px 15px rgba(255, 215, 0, 0.4), inset 0 1px 3px rgba(255, 255, 255, 0.2)';
                    break;
                case 'contractors':
                    btn.style.background = 'linear-gradient(135deg, #8a2be2 0%, #6d28d9 50%, #5b21b6 100%)';
                    btn.style.color = '#fff';
                    btn.style.border = 'none';
                    btn.style.boxShadow = '0 4px 15px rgba(138, 43, 226, 0.4), inset 0 1px 3px rgba(255, 255, 255, 0.2)';
                    break;
                case 'volunteers':
                    btn.style.background = 'linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #15803d 100%)';
                    btn.style.color = '#fff';
                    btn.style.border = 'none';
                    btn.style.boxShadow = '0 4px 15px rgba(34, 197, 94, 0.4), inset 0 1px 3px rgba(255, 255, 255, 0.2)';
                    break;
            }
        }
        
        function triggerHeaderAnimation() {
            const header = document.querySelector('.workforce-header-transition');
            if (header) {
                header.classList.add('animate');
                setTimeout(() => {
                    header.classList.remove('animate');
                }, 800);
            }
        }
        
        function completeTransition(category) {
            console.log('✅ Sophisticated transition to', category, 'completed');
            
            // Update any category-specific filters or controls
            if (category === 'employees') {
                const filters = document.getElementById('employeeFilters');
                const roster = document.getElementById('employeeRoster');
                if (filters) filters.style.display = 'block';
                if (roster) roster.style.display = 'block';
            } else {
                const filters = document.getElementById('employeeFilters');
                const roster = document.getElementById('employeeRoster');
                if (filters) filters.style.display = 'none';
                if (roster) roster.style.display = 'none';
            }
        }

        // Self-employed functions
        function addSelfToSchedule() {
            const businessName = localStorage.getItem('businessName') || 'Your Business';
            showNotification(`Opening schedule editor for ${businessName}`, 'info');
            
            // Switch to Schedule tab for self-scheduling
            showTab('schedule');
            
            // Update self-employed name from business profile
            updateSelfEmployedDisplay();
        }

        function viewSelfProfile() {
            const businessName = localStorage.getItem('businessName') || 'Your Business';
            showNotification(`Viewing profile for ${businessName}`, 'info');
            
            // For now, show basic profile info
            alert(`Business Profile: ${businessName}\nType: Self Employed/Freelancer\nSchedule Status: Ready for scheduling`);
        }

        function updateSelfEmployedDisplay() {
            const businessName = localStorage.getItem('businessName') || 'Your Business';
            const businessType = JSON.parse(localStorage.getItem('businessProfile') || '{}').type || 'self-employed';
            
            const nameElement = document.getElementById('selfEmployedName');
            if (nameElement) {
                if (businessName && businessName !== 'Your Business') {
                    nameElement.textContent = businessName;
                } else {
                    nameElement.textContent = 'Add Yourself';
                }
            }
        }

        function showAddEmployeeModal() {
            console.log('Opening Add Employee Modal');
            const modal = document.getElementById('addEmployeeModal');
            if (modal) {
                modal.classList.add('show');
            }
        }

        function showAddPersonModal() {
            showAddEmployeeModal(); // Use existing modal functionality
        }

        function closeAddEmployeeModal() {
            console.log('Closing Add Employee Modal');
            const modal = document.getElementById('addEmployeeModal');
            if (modal) {
                modal.classList.remove('show');
            }
            
            // Clear form
            const form = document.getElementById('addEmployeeForm');
            if (form) {
                form.reset();
            }
            
            // Reset payment stepper
            currentPaymentAmount = 0;
            currentPaymentType = '';
            const stepperDisplay = document.getElementById('stepperDisplay');
            if (stepperDisplay) {
                stepperDisplay.textContent = '0.00';
            }
            
            // Hide payment amount group
            const amountGroup = document.getElementById('paymentAmountGroup');
            if (amountGroup) {
                amountGroup.style.display = 'none';
            }
        }

        // Employee Management Variables
        let employees = [];
        let customRoles = [];
        let selectedRoleColor = '#00ffff';

        function addNewEmployee(event) {
            event.preventDefault();
            
            const name = document.getElementById('newEmployeeName').value;
            const phone = document.getElementById('newEmployeePhone').value;
            const email = document.getElementById('newEmployeeEmail').value;
            const role = document.getElementById('newEmployeeRole').value === 'custom' 
                ? document.getElementById('customRoleInput').value 
                : document.getElementById('newEmployeeRole').value;
            const category = document.getElementById('newEmployeeCategory').value;
            const paymentType = document.getElementById('newEmployeePaymentType').value;
            const paymentAmount = document.getElementById('newEmployeePaymentAmount').value;
            const status = document.getElementById('newEmployeeStatus').value;
            const sendInvitation = document.getElementById('sendInvitation').checked;
            
            console.log('Form submission started');
            console.log('Adding new employee with payment info:', { name, phone, email, role, category, paymentType, paymentAmount, status, sendInvitation });
            
            // Validation checks
            if (!name || !phone || !email || !role || !category || !paymentType) {
                showNotification('Please fill in all required fields', 'error');
                console.log('Validation failed - missing required fields');
                return;
            }
            
            if (paymentType !== 'commission' && (!paymentAmount || paymentAmount <= 0)) {
                showNotification('Please enter a valid payment amount', 'error');
                console.log('Validation failed - invalid payment amount:', paymentAmount);
                return;
            }
            
            console.log('All validation passed, proceeding with employee creation');
            
            // Create employee object with enhanced payment information
            const employee = {
                id: Date.now(),
                name,
                phone,
                email,
                role,
                category,
                paymentType,
                paymentAmount: parseFloat(paymentAmount || 0),
                status: status || (sendInvitation ? 'pending' : 'Available'),
                color: selectedRoleColor,
                dateAdded: new Date().toISOString()
            };
            
            // Add to employees array
            employees.push(employee);
            console.log('Employee added to array:', employee);
            
            // Update display
            renderEmployeeGrid();
            updateEmployeeStats();
            
            const paymentText = paymentType === 'hourly' ? `$${paymentAmount}/hr` :
                              paymentType === 'per_job' ? `$${paymentAmount}/job` :
                              paymentType === 'salary' ? `$${paymentAmount}/year` :
                              paymentType === 'commission' ? `${paymentAmount}% commission` : '';
            
            // Send invitation if requested
            if (sendInvitation) {
                showNotification(`Employee ${name} added! Sending invitation...`, 'info');
                sendEmployeeInvitation(employee);
            } else {
                showNotification(`Employee ${name} added as ${role} (${paymentText})`, 'success');
            }
            
            updateVoiceOutput(`Successfully added ${name} as ${role} with ${paymentText} payment structure`);
            closeAddEmployeeModal();
        }

        function renderEmployeeGrid() {
            console.log('Rendering workforce with', employees.length, 'total members');
            
            // Render employees in their respective category sections
            renderEmployeesInSection();
            renderContractorsInSection(); 
            renderVolunteersInSection();
            
            // Update stats for all categories
            updateCategoryCounts();
            
            console.log('✅ All workforce categories updated and visible immediately');
        }

        function renderEmployeesInSection() {
            const employeesSection = document.getElementById('employeesSection');
            if (!employeesSection) return;
            
            // Filter for employees only (case insensitive)
            const employeeList = employees.filter(emp => emp.category.toLowerCase() === 'employee');
            
            // Find or create person grid container within employees section
            let personGrid = employeesSection.querySelector('.person-grid');
            if (!personGrid) {
                personGrid = document.createElement('div');
                personGrid.className = 'person-grid';
                personGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-top: 16px;';
                employeesSection.appendChild(personGrid);
            }
            
            // Generate employee cards
            const employeeCards = employeeList.map(employee => `
                <div class="person-card" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(0, 0, 0, 0.6)); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.3s ease;" onclick="selectEmployeeForScheduling('${employee.id}')">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #ffd700, #ffb347); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold; font-size: 16px;">
                            ${employee.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div style="color: #ffd700; font-weight: 600; font-size: 14px;">${employee.name}</div>
                            <div style="color: #94a3b8; font-size: 11px;">${employee.role} • W-2 Status</div>
                        </div>
                        <div style="margin-left: auto;">
                            <div style="background: ${employee.status === 'active' ? 'rgba(34, 197, 94, 0.2)' : 'rgba(255, 165, 0, 0.2)'}; color: ${employee.status === 'active' ? '#22c55e' : '#f59e0b'}; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">
                                ${employee.status === 'active' ? 'ACTIVE' : 'PENDING'}
                            </div>
                        </div>
                    </div>
                    <div style="background: rgba(0, 0, 0, 0.4); border-radius: 6px; padding: 8px; margin-bottom: 8px;">
                        <div style="color: #94a3b8; font-size: 10px; margin-bottom: 4px;">Payment Structure</div>
                        <div style="color: #00ffff; font-size: 12px;">$${employee.paymentAmount}/${employee.paymentType === 'hourly' ? 'hr' : employee.paymentType}</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button onclick="scheduleEmployee('${employee.id}'); event.stopPropagation();" style="background: linear-gradient(135deg, #00ffff, #4169e1); color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 10px; font-weight: 600; cursor: pointer;">Schedule Now</button>
                        <button onclick="viewEmployeeDetails('${employee.id}'); event.stopPropagation();" style="background: rgba(255, 215, 0, 0.2); color: #ffd700; border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 4px; padding: 4px 8px; font-size: 10px; cursor: pointer;">View Details</button>
                    </div>
                </div>
            `).join('');
            
            personGrid.innerHTML = employeeCards || '<div style="color: #94a3b8; text-align: center; padding: 20px;">No employees added yet</div>';
            console.log('✅ Employees section updated with', employeeList.length, 'employees - immediately visible');
        }

        function renderContractorsInSection() {
            const contractorsSection = document.getElementById('contractorsSection');
            if (!contractorsSection) return;
            
            // Filter for contractors only (case insensitive)
            const contractorList = employees.filter(emp => emp.category.toLowerCase() === 'contractor');
            
            // Find or create person grid container
            let personGrid = contractorsSection.querySelector('.person-grid');
            if (!personGrid) {
                personGrid = document.createElement('div');
                personGrid.className = 'person-grid';
                personGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-top: 16px;';
                contractorsSection.appendChild(personGrid);
            }
            
            // Generate contractor cards
            const contractorCards = contractorList.map(contractor => `
                <div class="person-card" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(0, 0, 0, 0.6)); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.3s ease;" onclick="selectEmployeeForScheduling('${contractor.id}')">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #8a2be2, #6d28d9); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;">
                            ${contractor.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div style="color: #8a2be2; font-weight: 600; font-size: 14px;">${contractor.name}</div>
                            <div style="color: #94a3b8; font-size: 11px;">${contractor.role} • 1099 Status</div>
                        </div>
                        <div style="margin-left: auto;">
                            <div style="background: ${contractor.status === 'active' ? 'rgba(34, 197, 94, 0.2)' : 'rgba(255, 165, 0, 0.2)'}; color: ${contractor.status === 'active' ? '#22c55e' : '#f59e0b'}; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">
                                ${contractor.status === 'active' ? 'ACTIVE' : 'PENDING'}
                            </div>
                        </div>
                    </div>
                    <div style="background: rgba(0, 0, 0, 0.4); border-radius: 6px; padding: 8px; margin-bottom: 8px;">
                        <div style="color: #94a3b8; font-size: 10px; margin-bottom: 4px;">Payment Structure</div>
                        <div style="color: #00ffff; font-size: 12px;">$${contractor.paymentAmount}/${contractor.paymentType === 'hourly' ? 'hr' : contractor.paymentType}</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button onclick="scheduleEmployee('${contractor.id}'); event.stopPropagation();" style="background: linear-gradient(135deg, #8a2be2, #6d28d9); color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 10px; font-weight: 600; cursor: pointer;">Schedule Now</button>
                        <button onclick="viewEmployeeDetails('${contractor.id}'); event.stopPropagation();" style="background: rgba(138, 43, 226, 0.2); color: #8a2be2; border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 4px; padding: 4px 8px; font-size: 10px; cursor: pointer;">View Details</button>
                    </div>
                </div>
            `).join('');
            
            personGrid.innerHTML = contractorCards || '<div style="color: #94a3b8; text-align: center; padding: 20px;">No contractors added yet</div>';
            console.log('✅ Contractors section updated with', contractorList.length, 'contractors - immediately visible');
        }

        function renderVolunteersInSection() {
            const volunteersSection = document.getElementById('volunteersSection');
            if (!volunteersSection) return;
            
            // Filter for volunteers only (case insensitive)
            const volunteerList = employees.filter(emp => emp.category.toLowerCase() === 'volunteer');
            
            // Find or create person grid container
            let personGrid = volunteersSection.querySelector('.person-grid');
            if (!personGrid) {
                personGrid = document.createElement('div');
                personGrid.className = 'person-grid';
                personGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-top: 16px;';
                volunteersSection.appendChild(personGrid);
            }
            
            // Generate volunteer cards
            const volunteerCards = volunteerList.map(volunteer => `
                <div class="person-card" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(0, 0, 0, 0.6)); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.3s ease;" onclick="selectEmployeeForScheduling('${volunteer.id}')">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #22c55e, #16a34a); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;">
                            ${volunteer.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div style="color: #22c55e; font-weight: 600; font-size: 14px;">${volunteer.name}</div>
                            <div style="color: #94a3b8; font-size: 11px;">${volunteer.role} • No Income</div>
                        </div>
                        <div style="margin-left: auto;">
                            <div style="background: ${volunteer.status === 'active' ? 'rgba(34, 197, 94, 0.2)' : 'rgba(255, 165, 0, 0.2)'}; color: ${volunteer.status === 'active' ? '#22c55e' : '#f59e0b'}; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold;">
                                ${volunteer.status === 'active' ? 'ACTIVE' : 'PENDING'}
                            </div>
                        </div>
                    </div>
                    <div style="background: rgba(0, 0, 0, 0.4); border-radius: 6px; padding: 8px; margin-bottom: 8px;">
                        <div style="color: #94a3b8; font-size: 10px; margin-bottom: 4px;">Volunteer Service</div>
                        <div style="color: #00ffff; font-size: 12px;">Recognition Only • Community Service</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button onclick="scheduleEmployee('${volunteer.id}'); event.stopPropagation();" style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 10px; font-weight: 600; cursor: pointer;">Schedule Now</button>
                        <button onclick="viewEmployeeDetails('${volunteer.id}'); event.stopPropagation();" style="background: rgba(34, 197, 94, 0.2); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 4px; padding: 4px 8px; font-size: 10px; cursor: pointer;">View Details</button>
                    </div>
                </div>
            `).join('');
            
            personGrid.innerHTML = volunteerCards || '<div style="color: #94a3b8; text-align: center; padding: 20px;">No volunteers added yet</div>';
            console.log('✅ Volunteers section updated with', volunteerList.length, 'volunteers - immediately visible');
        }

        function updateCategoryCounts() {
            // Update category counters (case insensitive)
            const employeeCount = employees.filter(emp => emp.category.toLowerCase() === 'employee').length;
            const contractorCount = employees.filter(emp => emp.category.toLowerCase() === 'contractor').length;
            const volunteerCount = employees.filter(emp => emp.category.toLowerCase() === 'volunteer').length;
            
            // Update counters if elements exist
            const totalEmployeesElement = document.getElementById('totalEmployeesCount');
            if (totalEmployeesElement) totalEmployeesElement.textContent = employeeCount;
            
            console.log(`📊 Category counts updated: ${employeeCount} employees, ${contractorCount} contractors, ${volunteerCount} volunteers`);
        }

        // Workforce interaction functions
        function selectEmployeeForScheduling(employeeId) {
            const employee = employees.find(e => e.id === employeeId);
            if (!employee) return;
            
            showNotification(`Selected ${employee.name} for scheduling - ready to add to calendar`, 'success');
            
            // Switch to schedule tab if not already active
            showTab('schedule');
            
            // Highlight the selected employee
            document.querySelectorAll('.person-card').forEach(card => {
                card.style.border = '1px solid rgba(255, 255, 255, 0.3)';
            });
            
            event.target.closest('.person-card').style.border = '2px solid #00ffff';
            
            console.log('Selected employee for scheduling:', employee.name);
        }

        function scheduleEmployee(employeeId) {
            const employee = employees.find(e => e.id === employeeId);
            if (!employee) return;
            
            // Show quick scheduling modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid #00ffff; border-radius: 16px; padding: 24px; 
                max-width: 400px; width: 90%;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #00ffff; margin: 0;">Schedule ${employee.name}</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Select Day</label>
                    <select id="scheduleDay" style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                        <option value="monday">Monday</option>
                        <option value="tuesday">Tuesday</option>
                        <option value="wednesday">Wednesday</option>
                        <option value="thursday">Thursday</option>
                        <option value="friday">Friday</option>
                        <option value="saturday">Saturday</option>
                        <option value="sunday">Sunday</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Time Slot</label>
                    <select id="scheduleTime" style="width: 100%; padding: 10px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                        <option value="6-8">6:00 AM - 8:00 AM</option>
                        <option value="8-10">8:00 AM - 10:00 AM</option>
                        <option value="10-12">10:00 AM - 12:00 PM</option>
                        <option value="12-14">12:00 PM - 2:00 PM</option>
                        <option value="14-16">2:00 PM - 4:00 PM</option>
                        <option value="16-18">4:00 PM - 6:00 PM</option>
                        <option value="18-20">6:00 PM - 8:00 PM</option>
                        <option value="20-22">8:00 PM - 10:00 PM</option>
                    </select>
                </div>
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button onclick="this.closest('.modal').remove()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer;">Cancel</button>
                    <button onclick="confirmSchedule('${employeeId}', this)" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; font-weight: bold;">Schedule Now</button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification(`Opening schedule options for ${employee.name}`, 'info');
        }

        function confirmSchedule(employeeId, button) {
            const employee = employees.find(e => e.id === employeeId);
            const modal = button.closest('.modal');
            const day = modal.querySelector('#scheduleDay').value;
            const timeSlot = modal.querySelector('#scheduleTime').value;
            const timeText = modal.querySelector('#scheduleTime option:checked').textContent;
            
            showNotification(`✅ ${employee.name} scheduled for ${day.charAt(0).toUpperCase() + day.slice(1)} at ${timeText}`, 'success');
            
            // Here you would add logic to actually add to the calendar
            console.log(`Scheduled ${employee.name} for ${day} at ${timeSlot}`);
            
            modal.remove();
        }

        function viewEmployeeDetails(employeeId) {
            const employee = employees.find(e => e.id === employeeId);
            if (!employee) return;
            
            // Show employee details modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid ${employee.category === 'employee' ? '#ffd700' : employee.category === 'contractor' ? '#8a2be2' : '#22c55e'}; 
                border-radius: 16px; padding: 24px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;
            `;
            
            const statusColor = employee.status === 'active' ? '#22c55e' : '#f59e0b';
            const categoryColor = employee.category === 'employee' ? '#ffd700' : employee.category === 'contractor' ? '#8a2be2' : '#22c55e';
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: ${categoryColor}; margin: 0;">Employee Details</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: ${categoryColor}; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, ${categoryColor}, #4169e1); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 32px; margin-bottom: 12px;">
                        ${employee.name.charAt(0).toUpperCase()}
                    </div>
                    <h4 style="color: white; margin: 0 0 4px 0; font-size: 20px;">${employee.name}</h4>
                    <p style="color: #94a3b8; margin: 0; font-size: 14px;">${employee.role} • ${employee.category.charAt(0).toUpperCase() + employee.category.slice(1)}</p>
                    <div style="background: rgba(${statusColor === '#22c55e' ? '34, 197, 94' : '245, 158, 11'}, 0.2); color: ${statusColor}; padding: 4px 12px; border-radius: 12px; display: inline-block; margin-top: 8px; font-size: 12px; font-weight: bold;">
                        ${employee.status === 'active' ? 'ACTIVE' : 'INVITATION PENDING'}
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h5 style="color: ${categoryColor}; margin: 0 0 12px 0; font-size: 14px;">Contact Information</h5>
                    <div style="margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 12px;">Phone:</span>
                        <span style="color: white; margin-left: 8px;">${employee.phone}</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 12px;">Email:</span>
                        <span style="color: white; margin-left: 8px;">${employee.email}</span>
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h5 style="color: ${categoryColor}; margin: 0 0 12px 0; font-size: 14px;">Employment Details</h5>
                    <div style="margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 12px;">Category:</span>
                        <span style="color: white; margin-left: 8px;">${employee.category === 'employee' ? 'W-2 Employee' : employee.category === 'contractor' ? '1099 Contractor' : 'Volunteer'}</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 12px;">Role:</span>
                        <span style="color: white; margin-left: 8px;">${employee.role}</span>
                    </div>
                    <div style="margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 12px;">Payment:</span>
                        <span style="color: #00ffff; margin-left: 8px;">$${employee.paymentAmount}/${employee.paymentType === 'hourly' ? 'hr' : employee.paymentType}</span>
                    </div>
                    <div>
                        <span style="color: #94a3b8; font-size: 12px;">Date Added:</span>
                        <span style="color: white; margin-left: 8px;">${new Date(employee.dateAdded).toLocaleDateString()}</span>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="scheduleEmployee('${employeeId}'); this.closest('.modal').remove();" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">Schedule Now</button>
                    <button onclick="sendEmployeeMessage('${employeeId}')" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer;">Send Message</button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification(`Viewing details for ${employee.name}`, 'info');
        }

        function sendEmployeeMessage(employeeId) {
            const employee = employees.find(e => e.id === employeeId);
            showNotification(`Opening message for ${employee.name}...`, 'info');
            // Here you would integrate with your messaging system
        }

        // Simple Edit Schedule Interface
        function openEditSchedule() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.9); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid #00ffff; border-radius: 16px; padding: 24px; 
                max-width: 600px; width: 95%; max-height: 90vh; overflow-y: auto;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h2 style="color: #00ffff; margin: 0; font-size: 24px;">📝 Edit Schedule</h2>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #00ffff; font-size: 28px; cursor: pointer; padding: 0;">&times;</button>
                </div>
                
                <!-- Quick Actions Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 20px;">
                    
                    <!-- Add Member -->
                    <div onclick="showAddEmployeeModal(); this.closest('.modal').remove();" style="
                        background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 0, 0, 0.6)); 
                        border: 2px solid rgba(255, 215, 0, 0.3); 
                        border-radius: 8px; 
                        padding: 12px; 
                        cursor: pointer; 
                        transition: all 0.3s ease;
                        text-align: center;
                    " onmouseover="this.style.borderColor='#ffd700'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='rgba(255, 215, 0, 0.3)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; margin-bottom: 4px;">👥</div>
                        <div style="color: #ffd700; font-weight: bold; font-size: 14px; margin-bottom: 2px;">Add Member</div>
                        <div style="color: #94a3b8; font-size: 10px;">Add employees, contractors, volunteers</div>
                    </div>
                    
                    <!-- Create Shift -->
                    <div onclick="openQuickShiftCreator()" style="
                        background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(0, 0, 0, 0.6)); 
                        border: 2px solid rgba(0, 255, 255, 0.3); 
                        border-radius: 8px; 
                        padding: 12px; 
                        cursor: pointer; 
                        transition: all 0.3s ease;
                        text-align: center;
                    " onmouseover="this.style.borderColor='#00ffff'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='rgba(0, 255, 255, 0.3)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; margin-bottom: 4px;">⏰</div>
                        <div style="color: #00ffff; font-weight: bold; font-size: 14px; margin-bottom: 2px;">Create Shift</div>
                        <div style="color: #94a3b8; font-size: 10px;">Schedule members for specific times</div>
                    </div>
                    
                    <!-- Manage Locations -->
                    <div onclick="openLocationManager()" style="
                        background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(0, 0, 0, 0.6)); 
                        border: 2px solid rgba(34, 197, 94, 0.3); 
                        border-radius: 8px; 
                        padding: 12px; 
                        cursor: pointer; 
                        transition: all 0.3s ease;
                        text-align: center;
                    " onmouseover="this.style.borderColor='#22c55e'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='rgba(34, 197, 94, 0.3)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; margin-bottom: 4px;">📍</div>
                        <div style="color: #22c55e; font-weight: bold; font-size: 14px; margin-bottom: 2px;">Manage Locations</div>
                        <div style="color: #94a3b8; font-size: 10px;">Add work locations & addresses</div>
                    </div>
                    
                    <!-- Generate QR Codes -->
                    <div onclick="openQRCodeGenerator()" style="
                        background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(0, 0, 0, 0.6)); 
                        border: 2px solid rgba(138, 43, 226, 0.3); 
                        border-radius: 8px; 
                        padding: 12px; 
                        cursor: pointer; 
                        transition: all 0.3s ease;
                        text-align: center;
                    " onmouseover="this.style.borderColor='#8a2be2'; this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='rgba(138, 43, 226, 0.3)'; this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; margin-bottom: 4px;">📱</div>
                        <div style="color: #8a2be2; font-weight: bold; font-size: 14px; margin-bottom: 2px;">Generate QR Codes</div>
                        <div style="color: #94a3b8; font-size: 10px;">Create geo QR codes for check-ins</div>
                    </div>
                    
                </div>
                
                <!-- Current Status Summary -->
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="color: #00ffff; margin: 0 0 16px 0; font-size: 16px;">📊 Current Status</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                        <div style="text-align: center;">
                            <div style="color: #ffd700; font-size: 24px; font-weight: bold;">${employees.length}</div>
                            <div style="color: #94a3b8; font-size: 12px;">Total Members</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #22c55e; font-size: 24px; font-weight: bold;">${employees.filter(e => e.status && e.status.toLowerCase() === 'active').length}</div>
                            <div style="color: #94a3b8; font-size: 12px;">Active</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #f59e0b; font-size: 24px; font-weight: bold;">${employees.filter(e => !e.status || e.status.toLowerCase() === 'pending').length}</div>
                            <div style="color: #94a3b8; font-size: 12px;">Pending Invites</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #8a2be2; font-size: 24px; font-weight: bold;">0</div>
                            <div style="color: #94a3b8; font-size: 12px;">Locations</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Tips -->
                <div style="background: rgba(0, 255, 255, 0.05); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 8px; padding: 16px;">
                    <div style="color: #00ffff; font-weight: bold; font-size: 14px; margin-bottom: 8px;">💡 Quick Tips:</div>
                    <div style="color: #94a3b8; font-size: 12px; line-height: 1.4;">
                        • <strong>Add members first</strong> to build your workforce<br>
                        • <strong>Create locations</strong> for different work sites<br>
                        • <strong>Generate QR codes</strong> for easy check-ins<br>
                        • <strong>Create shifts</strong> to assign specific work times
                    </div>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification('Opening simplified schedule editor...', 'info');
        }

        // Quick Shift Creator
        function openQuickShiftCreator() {
            if (employees.length === 0) {
                showNotification('Please add members first before creating shifts', 'error');
                return;
            }
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.9); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid #00ffff; border-radius: 16px; padding: 24px; 
                max-width: 500px; width: 95%; max-height: 90vh; overflow-y: auto;
            `;
            
            const memberOptions = employees.map(emp => 
                `<option value="${emp.id}">${emp.name} (${emp.role})</option>`
            ).join('');
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3 style="color: #00ffff; margin: 0;">⏰ Create New Shift</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <form onsubmit="createQuickShift(event)">
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Select Member</label>
                        <select id="shiftMember" required style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                            <option value="">Choose a member...</option>
                            ${memberOptions}
                        </select>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                        <div>
                            <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Day</label>
                            <select id="shiftDay" required style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                                <option value="monday">Monday</option>
                                <option value="tuesday">Tuesday</option>
                                <option value="wednesday">Wednesday</option>
                                <option value="thursday">Thursday</option>
                                <option value="friday">Friday</option>
                                <option value="saturday">Saturday</option>
                                <option value="sunday">Sunday</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Time Slot</label>
                            <select id="shiftTime" required style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                                <option value="6-8">6:00 AM - 8:00 AM</option>
                                <option value="8-10">8:00 AM - 10:00 AM</option>
                                <option value="10-12">10:00 AM - 12:00 PM</option>
                                <option value="12-14">12:00 PM - 2:00 PM</option>
                                <option value="14-16">2:00 PM - 4:00 PM</option>
                                <option value="16-18">4:00 PM - 6:00 PM</option>
                                <option value="18-20">6:00 PM - 8:00 PM</option>
                                <option value="20-22">8:00 PM - 10:00 PM</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Location (Optional)</label>
                        <input type="text" id="shiftLocation" placeholder="e.g., Main Store, Warehouse, Event Hall" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="this.closest('.modal').remove()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 20px; border-radius: 6px; cursor: pointer;">Cancel</button>
                        <button type="submit" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">Create Shift</button>
                    </div>
                </form>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification('Opening shift creator...', 'info');
        }

        function createQuickShift(event) {
            event.preventDefault();
            
            const memberId = document.getElementById('shiftMember').value;
            const day = document.getElementById('shiftDay').value;
            const timeSlot = document.getElementById('shiftTime').value;
            const location = document.getElementById('shiftLocation').value || 'Main Location';
            
            const member = employees.find(e => e.id == memberId);
            const timeText = document.getElementById('shiftTime').selectedOptions[0].textContent;
            
            showNotification(`✅ Shift created: ${member.name} scheduled for ${day.charAt(0).toUpperCase() + day.slice(1)} at ${timeText} (${location})`, 'success');
            
            // Here you would add the shift to your calendar system
            console.log(`Shift created:`, { member: member.name, day, timeSlot, location });
            
            event.target.closest('.modal').remove();
        }

        // Simple Location Manager
        function openLocationManager() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.9); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid #22c55e; border-radius: 16px; padding: 24px; 
                max-width: 500px; width: 95%; max-height: 90vh; overflow-y: auto;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3 style="color: #22c55e; margin: 0;">📍 Manage Locations</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #22c55e; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <form onsubmit="addNewLocation(event)">
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Location Name</label>
                        <input type="text" id="locationName" required placeholder="e.g., Main Store, Warehouse, Event Hall" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Address</label>
                        <input type="text" id="locationAddress" required placeholder="123 Main St, City, State 12345" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #94a3b8; margin-bottom: 8px;">
                            <input type="checkbox" id="generateQR" checked style="margin-right: 8px;">
                            Generate QR Code for this location
                        </label>
                        <div style="color: #94a3b8; font-size: 12px; margin-left: 20px;">
                            Employees can scan to check-in at this location
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="this.closest('.modal').remove()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 20px; border-radius: 6px; cursor: pointer;">Cancel</button>
                        <button type="submit" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">Add Location</button>
                    </div>
                </form>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification('Opening location manager...', 'info');
        }

        function addNewLocation(event) {
            event.preventDefault();
            
            const name = document.getElementById('locationName').value;
            const address = document.getElementById('locationAddress').value;
            const generateQR = document.getElementById('generateQR').checked;
            
            showNotification(`✅ Location added: ${name} at ${address}${generateQR ? ' (QR code generated)' : ''}`, 'success');
            
            // Here you would add the location to your system
            console.log(`Location added:`, { name, address, generateQR });
            
            event.target.closest('.modal').remove();
        }

        // QR Code Generator
        function openQRCodeGenerator() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.9); display: flex; align-items: center; 
                justify-content: center; z-index: 10000; backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 2px solid #8a2be2; border-radius: 16px; padding: 24px; 
                max-width: 500px; width: 95%; max-height: 90vh; overflow-y: auto;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3 style="color: #8a2be2; margin: 0;">📱 Generate QR Codes</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #8a2be2; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="background: rgba(138, 43, 226, 0.1); border: 2px dashed rgba(138, 43, 226, 0.3); border-radius: 12px; padding: 40px; margin-bottom: 16px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">📱</div>
                        <div style="color: #8a2be2; font-size: 18px; font-weight: bold; margin-bottom: 8px;">Universal QR Code</div>
                        <div style="color: #94a3b8; font-size: 14px; line-height: 1.4;">
                            One QR code works for all locations<br>
                            Automatically detects which location the employee is at
                        </div>
                    </div>
                    
                    <button onclick="generateUniversalQR()" style="
                        background: linear-gradient(135deg, #8a2be2, #6d28d9); 
                        border: none; color: white; padding: 16px 32px; 
                        border-radius: 8px; cursor: pointer; font-weight: bold; 
                        font-size: 16px; margin-bottom: 16px;
                    ">
                        Generate Universal QR Code
                    </button>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 20px;">
                    <h4 style="color: #8a2be2; margin: 0 0 12px 0; font-size: 14px;">How it works:</h4>
                    <div style="color: #94a3b8; font-size: 12px; line-height: 1.5;">
                        1. Generate one QR code for your business<br>
                        2. Print and place at all work locations<br>
                        3. Employees scan the same code anywhere<br>
                        4. System automatically detects their location<br>
                        5. Check-ins are logged with proper location data
                    </div>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            showNotification('Opening QR code generator...', 'info');
        }

        function generateUniversalQR() {
            showNotification('✅ Universal QR code generated! Print and place at all work locations.', 'success');
            
            // Here you would generate the actual QR code
            console.log('Universal QR code generated for business');
            
            // Close the modal
            document.querySelector('.modal').remove();
        }

        function updateEmployeeStats() {
            const total = employees.length;
            const active = employees.filter(e => e.status === 'active').length;
            const pending = employees.filter(e => e.status === 'pending').length;
            
            // Only update if elements exist on current tab
            const totalElement = document.getElementById('totalEmployees');
            const activeElement = document.getElementById('activeEmployees');
            const pendingElement = document.getElementById('pendingInvites');
            
            if (totalElement) totalElement.textContent = total;
            if (activeElement) activeElement.textContent = active;
            if (pendingElement) pendingElement.textContent = pending;
            
            console.log('Employee stats updated:', { total, active, pending });
        }

        function selectEmployee(employeeId) {
            const employee = employees.find(e => e.id == employeeId);
            if (employee) {
                showNotification(`Selected ${employee.name} for scheduling`, 'info');
                // Here you could open a scheduling modal or highlight the employee
            }
        }

        function sendEmployeeInvitation(employee) {
            console.log('Sending invitation to:', employee);
            
            // Get business name from localStorage
            const businessName = localStorage.getItem('businessName') || 'Your Business';
            
            // Send both SMS and Email invitations
            const invitationData = {
                name: employee.name,
                phone: employee.phone,
                email: employee.email,
                role: employee.role,
                category: employee.category,
                paymentType: employee.paymentType,
                paymentAmount: employee.paymentAmount,
                businessName: businessName
            };
            
            // Make API call to send employee invitation
            fetch('/api/employees/send-invitation', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(invitationData)
            })
            .then(response => {
                console.log('Invitation response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('Invitation response data:', data);
                if (data.success) {
                    showNotification(`Invitation sent to ${employee.name} via SMS and email! They can now sign up at MarketPace.`, 'success');
                    updateVoiceOutput(`Employee invitation sent successfully to ${employee.name}`);
                    
                    // Update employee status to pending
                    const emp = employees.find(e => e.id === employee.id);
                    if (emp) {
                        emp.status = 'pending';
                        renderEmployeeGrid();
                        updateEmployeeStats();
                    }
                } else {
                    console.error('Invitation failed:', data.message);
                    showNotification(`Failed to send invitation: ${data.message}`, 'error');
                }
            })
            .catch(error => {
                console.error('Error sending invitation:', error);
                showNotification('Error sending invitation. Please try again.', 'error');
            });
        }

        // Custom Role Management Functions
        function showCustomRoleInput() {
            const roleSelect = document.getElementById('newEmployeeRole');
            const customInput = document.getElementById('customRoleInput');
            
            if (roleSelect.value === 'custom') {
                customInput.style.display = 'block';
                customInput.focus();
            } else {
                customInput.style.display = 'none';
            }
        }

        function showCustomRoleModal() {
            document.getElementById('customRoleModal').classList.add('show');
            loadCustomRolesList();
        }

        function closeCustomRoleModal() {
            document.getElementById('customRoleModal').classList.remove('show');
        }

        function addCustomRole() {
            const newRole = document.getElementById('newCustomRole').value.trim();
            if (!newRole) {
                showNotification('Please enter a role name', 'warning');
                return;
            }
            
            if (customRoles.includes(newRole)) {
                showNotification('Role already exists', 'warning');
                return;
            }
            
            customRoles.push(newRole);
            document.getElementById('newCustomRole').value = '';
            loadCustomRolesList();
            updateRoleDropdown();
            showNotification(`Role "${newRole}" added successfully`, 'success');
        }

        function loadCustomRolesList() {
            const list = document.getElementById('customRolesList');
            
            if (customRoles.length === 0) {
                list.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 20px;">No custom roles created yet</p>';
                return;
            }
            
            const roleItems = customRoles.map(role => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: rgba(0,0,0,0.3); border-radius: 8px; margin-bottom: 8px;">
                    <span style="color: #00ffff;">${role}</span>
                    <button onclick="deleteCustomRole('${role}')" style="background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.3); color: #ef4444; padding: 4px 8px; border-radius: 4px; cursor: pointer;">Delete</button>
                </div>
            `).join('');
            
            list.innerHTML = roleItems;
        }

        function deleteCustomRole(roleName) {
            if (confirm(`Delete role "${roleName}"?`)) {
                customRoles = customRoles.filter(role => role !== roleName);
                loadCustomRolesList();
                updateRoleDropdown();
                showNotification(`Role "${roleName}" deleted`, 'success');
            }
        }

        function updateRoleDropdown() {
            const roleSelect = document.getElementById('newEmployeeRole');
            const customOptions = roleSelect.querySelectorAll('.custom-role-option');
            
            // Remove existing custom options
            customOptions.forEach(option => option.remove());
            
            // Add current custom roles
            customRoles.forEach(role => {
                const option = document.createElement('option');
                option.value = role;
                option.textContent = role;
                option.className = 'custom-role-option';
                roleSelect.insertBefore(option, roleSelect.querySelector('[value="custom"]'));
            });
        }

        // Role Color Selection
        function initRoleColorSelection() {
            const colorOptions = document.querySelectorAll('.role-color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update selected color
                    selectedRoleColor = this.dataset.color;
                });
            });
        }

        // Enhanced Functions
        function bulkInvite() {
            showNotification('Bulk invitation feature coming soon', 'info');
            // This would open a modal for uploading CSV files or entering multiple employees
        }

        function showAddVolunteerModal() {
            showNotification('Volunteer management system coming soon', 'info');
        }

        function showAddModal() {
            showNotification('Advanced schedule creation coming soon', 'info');
        }

        // Voice Recognition System
        let recognition;
        let isListening = false;

        function toggleVoiceRecognition() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                updateVoiceOutput('Voice recognition not supported in this browser');
                return;
            }

            if (isListening) {
                stopVoiceRecognition();
            } else {
                startVoiceRecognition();
            }
        }

        function startVoiceRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
            
            recognition.onstart = function() {
                isListening = true;
                updateVoiceOutput('Listening... Say a command like "Schedule Sarah on Monday from 9 AM to 5 PM"');
                document.querySelector('.command-btn').textContent = 'STOP';
                document.querySelector('.command-btn').style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
            };
            
            recognition.onresult = function(event) {
                let finalTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    if (event.results[i].isFinal) {
                        finalTranscript += event.results[i][0].transcript;
                    }
                }
                
                if (finalTranscript) {
                    processVoiceCommand(finalTranscript.trim());
                }
            };
            
            recognition.onerror = function(event) {
                updateVoiceOutput(`Voice recognition error: ${event.error}`);
                stopVoiceRecognition();
            };
            
            recognition.onend = function() {
                stopVoiceRecognition();
            };
            
            recognition.start();
        }

        function stopVoiceRecognition() {
            if (recognition) {
                recognition.stop();
            }
            isListening = false;
            document.querySelector('.command-btn').textContent = 'COMMAND';
            document.querySelector('.command-btn').style.background = 'linear-gradient(135deg, #8a2be2, #4169e1)';
        }

        function processVoiceCommand(command) {
            updateVoiceOutput(`Processing: "${command}"`);
            
            const lowerCommand = command.toLowerCase();
            
            if (lowerCommand.includes('schedule') && lowerCommand.includes('employee')) {
                // Extract employee name, day, and time from command
                updateVoiceOutput('Scheduling command recognized - opening employee assignment panel');
                setTimeout(() => {
                    updateVoiceOutput('Voice scheduling feature in development - use manual scheduling for now');
                }, 1000);
            } else if (lowerCommand.includes('add employee') || lowerCommand.includes('create employee')) {
                updateVoiceOutput('Opening employee creation form');
                showAddEmployeeModal();
            } else if (lowerCommand.includes('show calendar') || lowerCommand.includes('calendar view')) {
                updateVoiceOutput('Switching to calendar view');
                switchToView('calendar');
            } else if (lowerCommand.includes('show list') || lowerCommand.includes('list view')) {
                updateVoiceOutput('Switching to list view');
                switchToView('list');
            } else if (lowerCommand.includes('help') || lowerCommand.includes('commands')) {
                updateVoiceOutput('Available commands: "Add employee", "Show calendar", "Show list", "Schedule [name] on [day] from [time]"');
            } else {
                updateVoiceOutput(`Command not recognized: "${command}" - try "help" for available commands`);
            }
        }

        function updateVoiceOutput(message) {
            const console = document.getElementById('voiceConsole');
            const timestamp = new Date().toLocaleTimeString();
            console.innerHTML = `[${timestamp}] ${message}`;
        }

        // Calendar Navigation Functions
        function previousWeek() {
            updateVoiceOutput('Navigating to previous week');
            showNotification('Previous week navigation coming soon', 'info');
        }

        function nextWeek() {
            updateVoiceOutput('Navigating to next week');
            showNotification('Next week navigation coming soon', 'info');
        }

        // Payment Field Management
        let currentPaymentType = '';
        let currentPaymentAmount = 0;
        let stepAmount = 1;

        function togglePaymentFields() {
            const paymentType = document.getElementById('newEmployeePaymentType').value;
            const amountGroup = document.getElementById('paymentAmountGroup');
            const amountLabel = document.getElementById('paymentAmountLabel');
            const amountInput = document.getElementById('newEmployeePaymentAmount');
            
            console.log('Payment type changed to:', paymentType);
            currentPaymentType = paymentType;
            
            if (paymentType) {
                amountGroup.style.display = 'block';
                amountInput.required = true;
                
                // Show/hide hourly presets
                const presets = document.getElementById('hourlyPresets');
                if (paymentType === 'hourly') {
                    presets.style.display = 'block';
                } else {
                    presets.style.display = 'none';
                }
                
                // Set initial values and step amounts based on payment type
                switch(paymentType) {
                    case 'hourly':
                        amountLabel.textContent = 'Hourly Rate ($) *';
                        currentPaymentAmount = 15.00;
                        stepAmount = 1.00; // Changed from 0.25 to 1.00 for faster adjustment
                        break;
                    case 'per_job':
                        amountLabel.textContent = 'Per Job Base Pay ($) *';
                        currentPaymentAmount = 150.00;
                        stepAmount = 5.00;
                        break;
                    case 'salary':
                        amountLabel.textContent = 'Annual Salary ($) *';
                        currentPaymentAmount = 45000.00;
                        stepAmount = 1000.00;
                        break;
                    case 'commission':
                        amountLabel.textContent = 'Commission Rate (%) *';
                        currentPaymentAmount = 5.0;
                        stepAmount = 0.5;
                        break;
                }
                
                updateStepperDisplay();
                console.log('Payment stepper shown for type:', paymentType, 'starting at:', currentPaymentAmount);
            } else {
                amountGroup.style.display = 'none';
                amountInput.required = false;
                currentPaymentAmount = 0;
                console.log('Payment field hidden');
            }
        }

        function adjustPayment(direction) {
            // Adjust current amount
            currentPaymentAmount += (direction * stepAmount);
            
            // Set minimum values
            if (currentPaymentAmount < 0) {
                currentPaymentAmount = 0;
            }
            
            // Set reasonable maximums
            switch(currentPaymentType) {
                case 'hourly':
                    if (currentPaymentAmount > 100) currentPaymentAmount = 100;
                    break;
                case 'per_job':
                    if (currentPaymentAmount > 5000) currentPaymentAmount = 5000;
                    break;
                case 'salary':
                    if (currentPaymentAmount > 200000) currentPaymentAmount = 200000;
                    break;
                case 'commission':
                    if (currentPaymentAmount > 50) currentPaymentAmount = 50;
                    break;
            }
            
            updateStepperDisplay();
            console.log('Payment adjusted to:', currentPaymentAmount, 'for type:', currentPaymentType);
        }

        function updateStepperDisplay() {
            const display = document.getElementById('stepperDisplay');
            const hiddenInput = document.getElementById('newEmployeePaymentAmount');
            
            let formattedAmount;
            if (currentPaymentType === 'commission') {
                formattedAmount = currentPaymentAmount.toFixed(1) + '%';
            } else if (currentPaymentType === 'salary') {
                formattedAmount = '$' + currentPaymentAmount.toLocaleString();
            } else {
                formattedAmount = '$' + currentPaymentAmount.toFixed(2);
            }
            
            display.textContent = formattedAmount;
            hiddenInput.value = currentPaymentAmount;
            
            console.log('Stepper display updated:', formattedAmount, 'value set to:', currentPaymentAmount);
        }

        // Quick preset functions for hourly rates
        function setHourlyRate(rate) {
            currentPaymentAmount = rate;
            updateStepperDisplay();
            showNotification(`Hourly rate set to $${rate.toFixed(2)}`, 'success');
            console.log('Quick rate set to:', rate);
        }

        // Direct input functionality
        function showDirectInput() {
            if (currentPaymentType === 'hourly') {
                const directInput = document.getElementById('directAmountInput');
                const display = document.getElementById('stepperDisplay');
                
                directInput.style.display = 'block';
                directInput.value = currentPaymentAmount;
                directInput.focus();
                directInput.select();
                
                // Handle enter key and blur
                directInput.onkeydown = function(e) {
                    if (e.key === 'Enter') {
                        applyDirectInput();
                    } else if (e.key === 'Escape') {
                        cancelDirectInput();
                    }
                };
                
                directInput.onblur = function() {
                    applyDirectInput();
                };
            }
        }

        function applyDirectInput() {
            const directInput = document.getElementById('directAmountInput');
            const newAmount = parseFloat(directInput.value);
            
            if (!isNaN(newAmount) && newAmount >= 0 && newAmount <= 100) {
                currentPaymentAmount = newAmount;
                updateStepperDisplay();
                showNotification(`Rate updated to $${newAmount.toFixed(2)}`, 'success');
            } else {
                showNotification('Invalid amount. Enter between $0-$100', 'error');
            }
            
            directInput.style.display = 'none';
        }

        function cancelDirectInput() {
            document.getElementById('directAmountInput').style.display = 'none';
        }

        // QR System Functions
        function showGenerateQRModal() {
            showNotification('Opening QR code generation system', 'info');
            // This would open the employee geo QR system
            setTimeout(() => {
                window.open('/employee-geo-qr-system.html', '_blank');
            }, 500);
        }

        function openQRScanner() {
            showNotification('Opening QR scanner interface', 'info');
            // This would open a QR scanner modal or page
            setTimeout(() => {
                showNotification('QR scanner functionality coming soon', 'info');
            }, 1000);
        }

        function showEmployeeGeoQR() {
            showNotification('Redirecting to Employee Geo QR system', 'success');
            setTimeout(() => {
                window.open('/employee-geo-qr-system.html', '_blank');
            }, 500);
        }

        function showQRLocationManager() {
            const modal = document.getElementById('qrLocationModal');
            if (modal) {
                modal.classList.add('show');
            } else {
                // Create the modal if it doesn't exist
                createQRLocationModal();
            }
        }

        function showEmployeeQRAssignments() {
            const modal = document.getElementById('qrAssignmentModal');
            if (modal) {
                modal.classList.add('show');
            } else {
                // Create the assignment modal if it doesn't exist
                createQRAssignmentModal();
            }
        }

        function createQRLocationModal() {
            const modalHTML = `
                <div id="qrLocationModal" class="modal show">
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="modal-header">
                            <h2 class="modal-title">QR Location Manager</h2>
                            <button class="close-btn" onclick="closeQRLocationModal()">&times;</button>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <p style="color: #94a3b8; line-height: 1.5;">
                                Manage QR codes for different work locations. Each location can have its own QR code that employees can scan to check in.
                            </p>
                        </div>
                        
                        <!-- Existing Locations -->
                        <div style="margin-bottom: 24px;">
                            <h3 style="color: #00ffff; margin-bottom: 12px; font-size: 18px;">Current Locations</h3>
                            <div id="existingQRLocations">
                                <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                                    <div style="display: flex; justify-content: space-between; align-items: start;">
                                        <div>
                                            <h4 style="color: #00ffff; margin: 0 0 4px 0;">Main Store Location</h4>
                                            <p style="color: #94a3b8; margin: 0 0 8px 0; font-size: 14px;">Brown Barnes</p>
                                            <div style="font-size: 12px; color: #64748b;">
                                                <span>QR ID: emp_1753137983666_gcgt4z3rr</span><br>
                                                <span>Created: July 21, 2025</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; flex-direction: column; gap: 8px;">
                                            <button onclick="viewQRCode('emp_1753137983666_gcgt4z3rr')" style="background: rgba(0, 255, 255, 0.2); color: #00ffff; border: 1px solid rgba(0, 255, 255, 0.3); padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer;">View QR</button>
                                            <button onclick="openLocationSchedule('Main Store Location', 'emp_1753137983666_gcgt4z3rr')" style="background: rgba(34, 197, 94, 0.2); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer;">Schedule Board</button>
                                            <button onclick="assignEmployeesToQR('emp_1753137983666_gcgt4z3rr')" style="background: rgba(255, 165, 0, 0.2); color: #f59e0b; border: 1px solid rgba(255, 165, 0, 0.3); padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer;">Assign Workers</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Add New Location -->
                        <div style="border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 20px;">
                            <h3 style="color: #22c55e; margin-bottom: 12px; font-size: 18px;">Add New Location</h3>
                            <button onclick="addNewQRLocation()" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                Generate QR for New Location
                            </button>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="closeQRLocationModal()" class="btn-cancel">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function createQRAssignmentModal() {
            const modalHTML = `
                <div id="qrAssignmentModal" class="modal show">
                    <div class="modal-content" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
                        <div class="modal-header">
                            <h2 class="modal-title">Employee QR Code Assignments</h2>
                            <button class="close-btn" onclick="closeQRAssignmentModal()">&times;</button>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <p style="color: #94a3b8; line-height: 1.5;">
                                View which employees are assigned to each QR code location. Employees can only check in at locations they're assigned to.
                            </p>
                        </div>

                        <!-- QR Code Locations and Assignments -->
                        <div id="qrAssignmentsList">
                            <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 8px; padding: 20px; margin-bottom: 16px;">
                                <h3 style="color: #00ffff; margin: 0 0 12px 0; font-size: 16px;">Main Store Location</h3>
                                <div style="color: #94a3b8; font-size: 12px; margin-bottom: 16px;">
                                    QR Code: emp_1753137983666_gcgt4z3rr • GPS Validation: Enabled
                                </div>
                                
                                <div style="margin-bottom: 16px;">
                                    <h4 style="color: #f59e0b; margin: 0 0 8px 0; font-size: 14px;">Assigned Employees (3)</h4>
                                    <div style="display: flex; flex-direction: column; gap: 8px;">
                                        <div style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                            <div>
                                                <strong style="color: #00ffff;">Sarah Johnson</strong>
                                                <span style="color: #94a3b8; font-size: 12px; margin-left: 8px;">Manager • W-2 Status</span>
                                            </div>
                                            <button onclick="removeQRAssignment('sarah', 'emp_1753137983666_gcgt4z3rr')" style="background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">Remove</button>
                                        </div>
                                        
                                        <div style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                            <div>
                                                <strong style="color: #00ffff;">Mike Rodriguez</strong>
                                                <span style="color: #94a3b8; font-size: 12px; margin-left: 8px;">Cashier • W-2 Status</span>
                                            </div>
                                            <button onclick="removeQRAssignment('mike', 'emp_1753137983666_gcgt4z3rr')" style="background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">Remove</button>
                                        </div>
                                        
                                        <div style="background: rgba(138, 43, 226, 0.1); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 6px; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                            <div>
                                                <strong style="color: #00ffff;">Alex Kim</strong>
                                                <span style="color: #94a3b8; font-size: 12px; margin-left: 8px;">Stock Specialist • 1099 Status</span>
                                            </div>
                                            <button onclick="removeQRAssignment('alex', 'emp_1753137983666_gcgt4z3rr')" style="background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">Remove</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <button onclick="addEmployeeToQR('emp_1753137983666_gcgt4z3rr')" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: bold;">
                                    + Add Employee
                                </button>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; color: #64748b; font-style: italic;">
                                Need more locations? Click "Manage QR Locations" to add new work areas.
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 16px;">
                            <button onclick="closeQRAssignmentModal()" class="btn-cancel">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeQRLocationModal() {
            const modal = document.getElementById('qrLocationModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
        }

        function closeQRAssignmentModal() {
            const modal = document.getElementById('qrAssignmentModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
        }

        function viewQRCode(qrId) {
            showNotification(`Opening QR code viewer for ${qrId}`, 'info');
            // This would show the actual QR code image
        }

        function assignEmployeesToQR(qrId) {
            showNotification(`Opening employee assignment for QR ${qrId}`, 'info');
            // This would open an employee selection interface
        }

        function addNewQRLocation() {
            showNotification('Redirecting to QR code generation for new location', 'success');
            setTimeout(() => {
                window.open('/employee-geo-qr-system.html', '_blank');
                closeQRLocationModal();
            }, 500);
        }

        function removeQRAssignment(employeeId, qrId) {
            if (confirm('Remove this employee from the QR code location?')) {
                showNotification(`Removed employee from QR location ${qrId}`, 'success');
                // Here you would call an API to remove the assignment
            }
        }

        function addEmployeeToQR(qrId) {
            showNotification(`Adding employee to QR location ${qrId}`, 'info');
            // This would open an employee selection modal
        }

        // Location-Based Schedule Calendar System
        function openLocationSchedule(locationName, qrId) {
            const modal = document.getElementById('locationScheduleModal');
            if (modal) {
                modal.classList.add('show');
                updateLocationScheduleContent(locationName, qrId);
            } else {
                createLocationScheduleModal(locationName, qrId);
            }
        }

        function createLocationScheduleModal(locationName, qrId) {
            const modalHTML = `
                <div id="locationScheduleModal" class="modal show">
                    <div class="modal-content" style="max-width: 95vw; max-height: 90vh; width: 100%; overflow-y: auto;">
                        <div class="modal-header" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05)); border-bottom: 1px solid rgba(34, 197, 94, 0.3);">
                            <h2 class="modal-title" style="color: #22c55e;">${locationName} - Schedule Board</h2>
                            <button class="close-btn" onclick="closeLocationScheduleModal()">&times;</button>
                        </div>
                        
                        <div id="locationScheduleContent" style="padding: 20px;">
                            <!-- Quick Add Worker Section -->
                            <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                                <h3 style="color: #22c55e; margin-bottom: 16px; font-size: 18px;">Quick Add Worker</h3>
                                <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                                    <select id="workerSelect" style="background: rgba(0, 0, 0, 0.5); color: white; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px; min-width: 150px;">
                                        <option value="">Select Worker</option>
                                        <option value="sarah_employee">Sarah Johnson (Employee)</option>
                                        <option value="mike_employee">Mike Rodriguez (Employee)</option>
                                        <option value="alex_contractor">Alex Kim (Contractor)</option>
                                        <option value="jessica_volunteer">Jessica Torres (Volunteer)</option>
                                        <option value="david_employee">David Chen (Employee)</option>
                                    </select>
                                    <select id="daySelect" style="background: rgba(0, 0, 0, 0.5); color: white; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px;">
                                        <option value="">Select Day</option>
                                        <option value="monday">Monday</option>
                                        <option value="tuesday">Tuesday</option>
                                        <option value="wednesday">Wednesday</option>
                                        <option value="thursday">Thursday</option>
                                        <option value="friday">Friday</option>
                                        <option value="saturday">Saturday</option>
                                        <option value="sunday">Sunday</option>
                                    </select>
                                    <input type="time" id="startTime" style="background: rgba(0, 0, 0, 0.5); color: white; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px;" value="09:00">
                                    <input type="time" id="endTime" style="background: rgba(0, 0, 0, 0.5); color: white; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px;" value="17:00">
                                    <button onclick="addWorkerToSchedule('${qrId}')" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                        Add to Schedule
                                    </button>
                                </div>
                            </div>

                            <!-- Weekly Schedule Calendar -->
                            <div style="background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                                <h3 style="color: #00ffff; margin-bottom: 16px; font-size: 18px;">Weekly Schedule - ${locationName}</h3>
                                <div id="weeklyScheduleGrid" style="display: grid; grid-template-columns: 100px repeat(7, 1fr); gap: 2px; font-size: 12px;">
                                    <!-- Header Row -->
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Time</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Mon</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Tue</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Wed</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Thu</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Fri</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Sat</div>
                                    <div style="background: rgba(0, 255, 255, 0.1); padding: 8px; text-align: center; font-weight: bold; color: #00ffff; border-radius: 4px;">Sun</div>
                                    
                                    <!-- Schedule Slots -->
                                    ${generateScheduleGrid()}
                                </div>
                            </div>

                            <!-- Current Workers at Location -->
                            <div style="background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 165, 0, 0.2); border-radius: 12px; padding: 20px;">
                                <h3 style="color: #f59e0b; margin-bottom: 16px; font-size: 18px;">Workers Assigned to ${locationName}</h3>
                                <div id="assignedWorkersList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <div style="background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong style="color: #00ffff;">Sarah Johnson</strong>
                                            <span style="color: #94a3b8; font-size: 12px; margin-left: 8px;">Manager • Mon-Fri 9AM-5PM</span>
                                        </div>
                                        <button onclick="editWorkerSchedule('sarah', '${qrId}')" style="background: rgba(34, 197, 94, 0.2); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">Edit Schedule</button>
                                    </div>
                                    <div style="background: rgba(138, 43, 226, 0.1); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 6px; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong style="color: #00ffff;">Alex Kim</strong>
                                            <span style="color: #94a3b8; font-size: 12px; margin-left: 8px;">Contractor • Tue/Thu 2PM-6PM</span>
                                        </div>
                                        <button onclick="editWorkerSchedule('alex', '${qrId}')" style="background: rgba(34, 197, 94, 0.2); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">Edit Schedule</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function generateScheduleGrid() {
            const timeSlots = ['6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00'];
            let gridHTML = '';
            
            for (let time of timeSlots) {
                // Time slot
                gridHTML += `<div style="background: rgba(0, 0, 0, 0.3); padding: 6px; text-align: center; color: #94a3b8; border-radius: 4px;">${time}</div>`;
                
                // Days of the week
                for (let day = 0; day < 7; day++) {
                    const cellId = `schedule-${time.replace(':', '')}-${day}`;
                    gridHTML += `<div id="${cellId}" style="background: rgba(0, 0, 0, 0.1); border: 1px dashed rgba(255, 255, 255, 0.1); padding: 4px; min-height: 30px; border-radius: 4px; cursor: pointer;" 
                                     onclick="quickAddToSlot('${time}', ${day})"
                                     ondragover="event.preventDefault()" 
                                     ondrop="dropWorkerToSlot(event, '${time}', ${day})">
                                </div>`;
                }
            }
            return gridHTML;
        }

        function addWorkerToSchedule(qrId) {
            const worker = document.getElementById('workerSelect').value;
            const day = document.getElementById('daySelect').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;

            if (!worker || !day || !startTime || !endTime) {
                showNotification('Please fill in all fields to add worker to schedule', 'error');
                return;
            }

            // Send notification to worker about schedule addition
            sendScheduleNotification(worker, 'added', {
                location: 'Main Store Location',
                day: day,
                startTime: startTime,
                endTime: endTime,
                action: 'Schedule Added'
            });

            showNotification(`Added ${worker} to ${day} ${startTime}-${endTime} schedule`, 'success');
            
            // Reset form
            document.getElementById('workerSelect').value = '';
            document.getElementById('daySelect').value = '';
            document.getElementById('startTime').value = '09:00';
            document.getElementById('endTime').value = '17:00';

            // Update the schedule grid visually
            updateScheduleGrid(worker, day, startTime, endTime);
        }

        function updateScheduleGrid(worker, day, startTime, endTime) {
            const dayIndex = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'].indexOf(day);
            const startHour = parseInt(startTime.split(':')[0]);
            const endHour = parseInt(endTime.split(':')[0]);
            
            for (let hour = startHour; hour < endHour; hour++) {
                const timeStr = hour.toString().padStart(2, '0') + '00';
                const cellId = `schedule-${timeStr}-${dayIndex}`;
                const cell = document.getElementById(cellId);
                
                if (cell) {
                    const workerName = worker.split('_')[0].charAt(0).toUpperCase() + worker.split('_')[0].slice(1);
                    const workerType = worker.split('_')[1];
                    const bgColor = workerType === 'employee' ? 'rgba(255, 215, 0, 0.3)' : 
                                   workerType === 'contractor' ? 'rgba(138, 43, 226, 0.3)' : 
                                   'rgba(34, 197, 94, 0.3)';
                    
                    cell.style.background = bgColor;
                    cell.innerHTML = `<div style="font-size: 10px; color: #00ffff; font-weight: bold;">${workerName}</div>`;
                    cell.onclick = () => editScheduleSlot(worker, day, hour);
                }
            }
        }

        function editWorkerSchedule(workerId, qrId) {
            showNotification(`Opening schedule editor for worker ${workerId}`, 'info');
            // This would open a detailed schedule editing modal
        }

        function editScheduleSlot(worker, day, hour) {
            if (confirm(`Edit or remove ${worker} from ${day} at ${hour}:00?`)) {
                // Send notification about schedule change
                sendScheduleNotification(worker, 'modified', {
                    location: 'Main Store Location',
                    day: day,
                    time: `${hour}:00`,
                    action: 'Schedule Modified'
                });
                
                showNotification(`Schedule updated for ${worker}`, 'success');
            }
        }

        function quickAddToSlot(time, dayIndex) {
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const dayName = days[dayIndex];
            
            showNotification(`Quick add to ${dayName} at ${time} - select worker from dropdown above`, 'info');
            document.getElementById('daySelect').value = dayName.toLowerCase();
            document.getElementById('startTime').value = time;
        }

        // Schedule Notification System
        function sendScheduleNotification(workerId, action, scheduleData) {
            const workerName = workerId.split('_')[0].charAt(0).toUpperCase() + workerId.split('_')[0].slice(1);
            const workerType = workerId.split('_')[1];
            
            // Simulate API call to send SMS/Email notification
            fetch('/api/schedule/notify', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    workerId: workerId,
                    workerName: workerName,
                    workerType: workerType,
                    action: action,
                    scheduleData: scheduleData,
                    timestamp: new Date().toISOString()
                })
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    console.log(`Notification sent to ${workerName}: ${action} - ${scheduleData.action}`);
                    showNotification(`${workerName} notified about schedule change`, 'success');
                }
            })
            .catch(error => {
                console.error('Notification error:', error);
                showNotification('Schedule updated but notification failed', 'warning');
            });
        }

        function closeLocationScheduleModal() {
            const modal = document.getElementById('locationScheduleModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
        }

        function generateQR() {
            showGenerateQRModal();
        }

        // Enhanced Management Functions  
        function showShiftTemplates() {
            showNotification('Opening shift template creator', 'info');
            updateVoiceOutput('Shift template system coming soon');
        }

        function bulkScheduleByRole() {
            showNotification('Bulk scheduling by role feature coming soon', 'info');
        }

        function scheduleByDepartment() {
            showNotification('Department scheduling feature coming soon', 'info');
        }

        function autoSchedule() {
            showNotification('Auto-scheduling AI feature coming soon', 'info');
        }

        function clearSchedules() {
            if (confirm('Clear all schedules? This action cannot be undone.')) {
                showNotification('All schedules cleared', 'success');
                updateVoiceOutput('Schedules cleared successfully');
            }
        }

        // Enhanced Employee Management Functions
        function filterEmployees() {
            const search = document.getElementById('employeeSearch').value.toLowerCase();
            const roleFilter = document.getElementById('roleFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            
            // Filter logic would go here
            showNotification('Employee filtering updated', 'info');
        }

        // Interactive Shift Management
        function bringShiftForward(shiftElement, employeeType) {
            // Reset all shifts to default z-index
            const allShifts = document.querySelectorAll('.clickable-shift');
            allShifts.forEach(shift => {
                shift.style.zIndex = '1';
                shift.style.transform = 'scale(1)';
                shift.style.boxShadow = shift.style.boxShadow.replace('0 0 25px', '0 0 15px');
            });
            
            // Bring clicked shift forward
            shiftElement.style.zIndex = '10';
            shiftElement.style.transform = 'scale(1.05)';
            
            // Enhanced glow effect based on employee type
            switch(employeeType) {
                case 'manager':
                    shiftElement.style.boxShadow = '0 0 25px rgba(255, 140, 0, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
                case 'cashier':
                    shiftElement.style.boxShadow = '0 0 25px rgba(34, 197, 94, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
                case 'sales':
                    shiftElement.style.boxShadow = '0 0 25px rgba(255, 105, 180, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
                case 'stock':
                    shiftElement.style.boxShadow = '0 0 25px rgba(59, 130, 246, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
                case 'assistant':
                    shiftElement.style.boxShadow = '0 0 25px rgba(139, 92, 246, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
                case 'security':
                    shiftElement.style.boxShadow = '0 0 25px rgba(239, 68, 68, 0.9), inset 0 1px 3px rgba(255,255,255,0.3)';
                    break;
            }
            
            // Get employee name from the shift
            const employeeName = shiftElement.querySelector('div').textContent;
            showNotification(`${employeeName} shift brought forward`, 'info');
            updateVoiceOutput(`${employeeName} - ${employeeType} shift selected and brought to front`);
        }

        // Initialize enhanced features
        function initializeEnhancedFeatures() {
            // Add search event listeners
            const searchInput = document.getElementById('employeeSearch');
            if (searchInput) {
                searchInput.addEventListener('input', filterEmployees);
            }
            
            const roleFilter = document.getElementById('roleFilter');
            if (roleFilter) {
                roleFilter.addEventListener('change', filterEmployees);
            }
            
            const statusFilter = document.getElementById('statusFilter');
            if (statusFilter) {
                statusFilter.addEventListener('change', filterEmployees);
            }
        }

        // Notification System
        function showNotification(message, type = 'info') {
            console.log('Notification:', message, type);
            
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 24px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
                opacity: 0;
                transform: translateX(100%);
            `;
            
            // Set color based on type
            switch(type) {
                case 'success':
                    notification.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                    break;
                case 'warning':
                    notification.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                    break;
                default:
                    notification.style.background = 'linear-gradient(135deg, #3b82f6, #2563eb)';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Business Size Selection Functions
        let selectedBusinessSize = null;
        
        function selectBusinessSize(size) {
            selectedBusinessSize = size;
            
            // Update card selection visual feedback
            document.querySelectorAll('.business-size-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-size="${size}"]`).classList.add('selected');
            
            // Completely transform interface based on business size
            transformSchedulingInterface(size);
            
            updateVoiceOutput(`Business size set to ${size} - ${getBusinessSizeCapacity(size)}`);
        }

        function transformSchedulingInterface(size) {
            const calendarView = document.getElementById('calendar-view');
            const bulkActionsSection = document.getElementById('bulkActionsSection');
            
            // Hide business size selector after selection
            const businessSizeSection = document.querySelector('.business-size-section');
            if (businessSizeSection) {
                businessSizeSection.style.display = 'none';
            }
            
            switch(size) {
                case 'small':
                    setupSmallBusinessInterface();
                    break;
                case 'medium':
                    setupMediumEventInterface();
                    break;
                case 'large':
                    setupLargeFestivalInterface();
                    break;
            }
        }

        function setupSmallBusinessInterface() {
            showNotification('Small Business mode - Simplified scheduling interface', 'info');
            
            // Hide bulk actions
            const bulkActionsSection = document.getElementById('bulkActionsSection');
            bulkActionsSection.style.display = 'none';
            
            // Simple calendar view with basic features
            const calendarContainer = document.querySelector('.calendar-container');
            calendarContainer.insertAdjacentHTML('afterbegin', `
                <div class="small-business-features" style="background: rgba(0, 255, 255, 0.1); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                    <h3 style="color: #00ffff; margin: 0 0 12px 0; font-size: 16px;">Small Business Features Active</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <button onclick="quickScheduleEmployee()" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 12px; cursor: pointer;">Quick Schedule</button>
                        <button onclick="viewWeeklyReport()" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 12px; cursor: pointer;">Weekly Report</button>
                    </div>
                </div>
            `);
        }

        function setupMediumEventInterface() {
            showNotification('Medium Event mode - Advanced department management', 'success');
            
            // Show bulk actions
            const bulkActionsSection = document.getElementById('bulkActionsSection');
            bulkActionsSection.style.display = 'block';
            
            // Add medium event specific features
            const calendarContainer = document.querySelector('.calendar-container');
            calendarContainer.insertAdjacentHTML('afterbegin', `
                <div class="medium-event-features" style="background: rgba(255, 165, 0, 0.1); border: 1px solid rgba(255, 165, 0, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                    <h3 style="color: #ffa500; margin: 0 0 12px 0; font-size: 16px;">Medium Event Management</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px;">
                        <button onclick="manageDepartments()" style="background: linear-gradient(135deg, #ffa500, #ff8c00); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 11px; cursor: pointer;">Departments</button>
                        <button onclick="shiftRotations()" style="background: linear-gradient(135deg, #8a2be2, #6d28d9); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 11px; cursor: pointer;">Rotations</button>
                        <button onclick="breakScheduler()" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 11px; cursor: pointer;">Breaks</button>
                    </div>
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 8px; border-radius: 6px;">
                        <div style="color: #ffa500; font-size: 12px; font-weight: bold;">Event Capacity: 20-100 people</div>
                        <div style="color: #94a3b8; font-size: 10px;">Department-based scheduling, shift rotations, break management</div>
                    </div>
                </div>
            `);
        }

        function setupLargeFestivalInterface() {
            showNotification('Large Festival mode - Enterprise-level management activated', 'success');
            
            // Show all bulk actions
            const bulkActionsSection = document.getElementById('bulkActionsSection');
            bulkActionsSection.style.display = 'block';
            
            // Replace standard calendar with complex festival management
            const calendarContainer = document.querySelector('.calendar-container');
            calendarContainer.insertAdjacentHTML('afterbegin', `
                <div class="festival-command-center" style="background: linear-gradient(135deg, rgba(255, 0, 100, 0.1), rgba(138, 43, 226, 0.1)); border: 2px solid rgba(255, 0, 100, 0.4); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="color: #ff0064; margin: 0 0 16px 0; font-size: 20px; text-align: center; text-shadow: 0 0 10px rgba(255, 0, 100, 0.5);">🎪 FESTIVAL COMMAND CENTER 🎪</h2>
                    
                    <!-- Festival Management Grid -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                        <!-- Multi-Stage Management -->
                        <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 0, 100, 0.3); border-radius: 8px; padding: 16px;">
                            <h4 style="color: #ff0064; margin: 0 0 12px 0;">Multi-Stage Management</h4>
                            <button onclick="manageStages()" style="background: linear-gradient(135deg, #ff0064, #8a2be2); border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; width: 100%; margin-bottom: 8px;">Manage 5 Stages</button>
                            <div style="color: #94a3b8; font-size: 10px;">Main Stage, Side Stage, Acoustic, DJ Booth, Workshop</div>
                        </div>
                        
                        <!-- Security Operations -->
                        <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 165, 0, 0.3); border-radius: 8px; padding: 16px;">
                            <h4 style="color: #ffa500; margin: 0 0 12px 0;">Security Operations</h4>
                            <button onclick="securityCommand()" style="background: linear-gradient(135deg, #ffa500, #ff8c00); border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; width: 100%; margin-bottom: 8px;">Security Central</button>
                            <div style="color: #94a3b8; font-size: 10px;">50+ Security, VIP, Crowd Control, Emergency</div>
                        </div>
                        
                        <!-- Vendor Coordination -->
                        <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 16px;">
                            <h4 style="color: #22c55e; margin: 0 0 12px 0;">Vendor Coordination</h4>
                            <button onclick="vendorManagement()" style="background: linear-gradient(135deg, #22c55e, #16a34a); border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; width: 100%; margin-bottom: 8px;">100+ Vendors</button>
                            <div style="color: #94a3b8; font-size: 10px;">Food, Merch, Sponsors, Setup Crews</div>
                        </div>
                        
                        <!-- Performance Scheduling -->
                        <div style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(139, 69, 19, 0.3); border-radius: 8px; padding: 16px;">
                            <h4 style="color: #8b4513; margin: 0 0 12px 0;">Performance Scheduling</h4>
                            <button onclick="performanceScheduler()" style="background: linear-gradient(135deg, #8b4513, #654321); border: none; color: white; padding: 10px 16px; border-radius: 6px; cursor: pointer; width: 100%; margin-bottom: 8px;">Artist Timeline</button>
                            <div style="color: #94a3b8; font-size: 10px;">50+ Artists, Sound Check, Changeovers</div>
                        </div>
                    </div>
                    
                    <!-- Festival Operations Dashboard -->
                    <div style="background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; padding: 16px;">
                        <h4 style="color: #00ffff; margin: 0 0 12px 0; text-align: center;">Festival Operations Dashboard</h4>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; text-align: center;">
                            <div>
                                <div style="color: #ff0064; font-size: 18px; font-weight: bold;">500+</div>
                                <div style="color: #94a3b8; font-size: 10px;">Total Staff</div>
                            </div>
                            <div>
                                <div style="color: #ffa500; font-size: 18px; font-weight: bold;">72h</div>
                                <div style="color: #94a3b8; font-size: 10px;">Event Duration</div>
                            </div>
                            <div>
                                <div style="color: #22c55e; font-size: 18px; font-weight: bold;">50K</div>
                                <div style="color: #94a3b8; font-size: 10px;">Expected Attendance</div>
                            </div>
                            <div>
                                <div style="color: #8a2be2; font-size: 18px; font-weight: bold;">15</div>
                                <div style="color: #94a3b8; font-size: 10px;">Departments</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Emergency Protocols -->
                    <div style="background: rgba(220, 38, 38, 0.1); border: 2px solid rgba(220, 38, 38, 0.4); border-radius: 8px; padding: 12px; margin-top: 16px;">
                        <h4 style="color: #dc2626; margin: 0 0 8px 0;">🚨 Emergency Protocols Active</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                            <button onclick="emergencyEvacuation()" style="background: linear-gradient(135deg, #dc2626, #b91c1c); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 10px; cursor: pointer;">Evacuation</button>
                            <button onclick="medicalResponse()" style="background: linear-gradient(135deg, #dc2626, #b91c1c); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 10px; cursor: pointer;">Medical</button>
                            <button onclick="weatherAlert()" style="background: linear-gradient(135deg, #dc2626, #b91c1c); border: none; color: white; padding: 8px; border-radius: 6px; font-size: 10px; cursor: pointer;">Weather</button>
                        </div>
                    </div>
                    
                    <!-- Public Festival Schedule Access -->
                    <div style="background: rgba(0, 255, 255, 0.1); border: 2px solid rgba(0, 255, 255, 0.4); border-radius: 8px; padding: 16px; margin-top: 16px; text-align: center;">
                        <h4 style="color: #00ffff; margin: 0 0 12px 0;">📅 Public Festival Schedule</h4>
                        <p style="color: #94a3b8; font-size: 12px; margin-bottom: 12px;">Share the public schedule link with festival attendees to view performer schedules and venue information</p>
                        <button onclick="openPublicSchedule()" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-right: 8px;">View Public Schedule</button>
                        <button onclick="copyScheduleLink()" style="background: linear-gradient(135deg, #8a2be2, #6d28d9); border: none; color: white; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer;">Copy Link</button>
                    </div>
                </div>
            `);
            
            // Hide standard calendar for festival mode
            const standardCalendar = document.querySelector('.calendar-grid');
            if (standardCalendar) {
                standardCalendar.style.display = 'none';
            }
        }
        
        function getBusinessSizeCapacity(size) {
            switch(size) {
                case 'small': return '5-20 people';
                case 'medium': return '20-100 people';
                case 'large': return '100-500+ people';
                default: return 'Unknown';
            }
        }

        // Enhanced Bulk Scheduling Functions
        function bulkScheduleByRole() {
            if (!selectedBusinessSize) {
                showNotification('Please select a business size first', 'warning');
                return;
            }
            
            showBulkScheduleModal('role');
        }
        
        function bulkScheduleByDepartment() {
            if (!selectedBusinessSize) {
                showNotification('Please select a business size first', 'warning');
                return;
            }
            
            showBulkScheduleModal('department');
        }
        
        function autoFillShifts() {
            if (!selectedBusinessSize) {
                showNotification('Please select a business size first', 'warning');
                return;
            }
            
            showAutoFillModal();
        }
        
        function importSchedule() {
            if (!selectedBusinessSize) {
                showNotification('Please select a business size first', 'warning');
                return;
            }
            
            showImportScheduleModal();
        }
        
        function showBulkScheduleModal(type) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 1px solid rgba(255, 193, 7, 0.3);
                border-radius: 16px;
                padding: 32px;
                max-width: 500px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
            `;
            
            const title = type === 'role' ? 'Schedule by Role' : 'Schedule by Department';
            const options = type === 'role' ? 
                ['Manager', 'Cashier', 'Sales', 'Stock', 'Assistant', 'Security'] :
                ['Front of House', 'Back Office', 'Operations', 'Customer Service', 'Management'];
            
            modalContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h2 style="color: #ffc107; margin: 0; font-size: 24px;">${title}</h2>
                    <button onclick="closeBulkModal()" style="background: transparent; border: none; color: #ffc107; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Select ${type}:</label>
                    <select id="bulkSelectOption" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="">Choose ${type}...</option>
                        ${options.map(option => `<option value="${option}">${option}</option>`).join('')}
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Time Period:</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <input type="date" id="bulkStartDate" style="padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <input type="date" id="bulkEndDate" style="padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Shift Template:</label>
                    <select id="bulkShiftTemplate" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="morning">Morning (6AM-2PM)</option>
                        <option value="afternoon">Afternoon (2PM-10PM)</option>
                        <option value="night">Night (10PM-6AM)</option>
                        <option value="custom">Custom Hours</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeBulkModal()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
                    <button onclick="executeBulkSchedule('${type}')" style="background: linear-gradient(135deg, #ffc107, #f59e0b); border: none; color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">Create Bulk Schedule</button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            window.currentBulkModal = modal;
        }
        
        function showAutoFillModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 1px solid rgba(255, 193, 7, 0.3);
                border-radius: 16px;
                padding: 32px;
                max-width: 500px;
                width: 90%;
            `;
            
            modalContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h2 style="color: #ffc107; margin: 0; font-size: 24px;">Auto-Fill Shifts</h2>
                    <button onclick="closeBulkModal()" style="background: transparent; border: none; color: #ffc107; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Fill Pattern:</label>
                    <select id="autoFillPattern" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="optimal">Optimal Coverage</option>
                        <option value="balanced">Balanced Workload</option>
                        <option value="minimal">Minimal Overlap</option>
                        <option value="maximum">Maximum Coverage</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Time Range:</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <select id="autoFillStartTime" style="padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                            <option value="6">6:00 AM</option>
                            <option value="7">7:00 AM</option>
                            <option value="8" selected>8:00 AM</option>
                            <option value="9">9:00 AM</option>
                        </select>
                        <select id="autoFillEndTime" style="padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                            <option value="17">5:00 PM</option>
                            <option value="18">6:00 PM</option>
                            <option value="20" selected>8:00 PM</option>
                            <option value="22">10:00 PM</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeBulkModal()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
                    <button onclick="executeAutoFill()" style="background: linear-gradient(135deg, #ffc107, #f59e0b); border: none; color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">Auto-Fill Schedule</button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            window.currentBulkModal = modal;
        }
        
        function showImportScheduleModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 1px solid rgba(255, 193, 7, 0.3);
                border-radius: 16px;
                padding: 32px;
                max-width: 500px;
                width: 90%;
            `;
            
            modalContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h2 style="color: #ffc107; margin: 0; font-size: 24px;">Import Schedule</h2>
                    <button onclick="closeBulkModal()" style="background: transparent; border: none; color: #ffc107; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Import Format:</label>
                    <select id="importFormat" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                        <option value="csv">CSV File</option>
                        <option value="excel">Excel Spreadsheet</option>
                        <option value="google">Google Sheets</option>
                        <option value="template">MarketPace Template</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #94a3b8; margin-bottom: 8px;">Select File:</label>
                    <input type="file" id="importFile" accept=".csv,.xlsx,.xls" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 16px;">
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeBulkModal()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer;">Cancel</button>
                    <button onclick="executeImport()" style="background: linear-gradient(135deg, #ffc107, #f59e0b); border: none; color: white; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">Import Schedule</button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            window.currentBulkModal = modal;
        }
        
        function closeBulkModal() {
            if (window.currentBulkModal) {
                document.body.removeChild(window.currentBulkModal);
                window.currentBulkModal = null;
            }
        }
        
        function executeBulkSchedule(type) {
            const option = document.getElementById('bulkSelectOption').value;
            const startDate = document.getElementById('bulkStartDate').value;
            const endDate = document.getElementById('bulkEndDate').value;
            const template = document.getElementById('bulkShiftTemplate').value;
            
            if (!option || !startDate || !endDate) {
                showNotification('Please fill in all required fields', 'warning');
                return;
            }
            
            showNotification(`Bulk scheduling ${option} from ${startDate} to ${endDate}`, 'success');
            updateVoiceOutput(`Executing bulk ${type} scheduling for ${option} - ${template} shifts`);
            closeBulkModal();
        }
        
        function executeAutoFill() {
            const pattern = document.getElementById('autoFillPattern').value;
            const startTime = document.getElementById('autoFillStartTime').value;
            const endTime = document.getElementById('autoFillEndTime').value;
            
            showNotification(`Auto-filling shifts with ${pattern} pattern from ${startTime}:00 to ${endTime}:00`, 'success');
            updateVoiceOutput(`Auto-fill complete - ${pattern} coverage pattern applied`);
            closeBulkModal();
        }
        
        function executeImport() {
            const format = document.getElementById('importFormat').value;
            const file = document.getElementById('importFile').files[0];
            
            if (!file) {
                showNotification('Please select a file to import', 'warning');
                return;
            }
            
            showNotification(`Importing schedule from ${format} file: ${file.name}`, 'success');
            updateVoiceOutput(`Schedule import successful - ${file.name} processed`);
            closeBulkModal();
        }

        // Business Profile Management Functions
        let businessProfile = {
            name: localStorage.getItem('businessName') || 'Your Business'
        };
        
        function editBusinessName() {
            const displayDiv = document.getElementById('businessNameDisplay');
            const editorDiv = document.getElementById('businessNameEditor');
            const input = document.getElementById('businessNameInput');
            
            displayDiv.style.display = 'none';
            editorDiv.style.display = 'block';
            input.value = businessProfile.name === 'Your Business' ? '' : businessProfile.name;
            input.focus();
        }
        
        function saveBusinessName() {
            const input = document.getElementById('businessNameInput');
            const newName = input.value.trim();
            
            if (!newName) {
                showNotification('Please enter a business name', 'warning');
                return;
            }
            
            businessProfile.name = newName;
            localStorage.setItem('businessName', newName);
            
            // Update display
            document.getElementById('businessNameValue').textContent = newName;
            
            // Hide editor, show display
            document.getElementById('businessNameDisplay').style.display = 'flex';
            document.getElementById('businessNameEditor').style.display = 'none';
            
            showNotification(`Business name updated to "${newName}"`, 'success');
            updateVoiceOutput(`Business profile updated - name set to ${newName}`);
        }
        
        function cancelEditBusinessName() {
            document.getElementById('businessNameDisplay').style.display = 'flex';
            document.getElementById('businessNameEditor').style.display = 'none';
        }
        
        function loadBusinessProfile() {
            const savedName = localStorage.getItem('businessName');
            if (savedName && savedName !== 'Your Business') {
                businessProfile.name = savedName;
                document.getElementById('businessNameValue').textContent = savedName;
            }
        }

        // Pro Account Management Functions
        let selectedSubscription = 'gold'; // Default selection
        let isProAccount = false; // Track Pro status
        
        function selectSubscription(tier) {
            selectedSubscription = tier;
            console.log('Selected subscription tier:', tier);
            
            // Update visual selection
            document.querySelectorAll('.subscription-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selected class to chosen tier
            const selectedCard = document.querySelector(`[onclick="selectSubscription('${tier}')"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            showNotification(`${tier.charAt(0).toUpperCase() + tier.slice(1)} Pro plan selected`, 'info');
        }
        
        function upgradeToProBusiness() {
            // Redirect to comprehensive Pro business setup page
            window.location.href = '/pro-business-setup';
        }
        
        function startFreeTrial() {
            showNotification('Starting your 14-day free trial...', 'info');
            
            setTimeout(() => {
                activateProAccount();
                showNotification('Your 14-day free trial has started! All Pro features are now available.', 'success');
            }, 1500);
        }
        
        function quickActivatePro() {
            console.log('Quick activating Pro account for testing...');
            
            // Set default business name if not set
            if (!localStorage.getItem('businessName')) {
                localStorage.setItem('businessName', 'Brown Barnes');
            }
            
            // Activate Pro account immediately
            activateProAccount();
            showNotification('Pro account activated! Brown Barnes business scheduling is now ready.', 'success');
            
            // Update self-employed display
            updateSelfEmployedDisplay();
        }
        
        function activateProAccount() {
            isProAccount = true;
            localStorage.setItem('proAccountStatus', 'active');
            
            // Hide Pro upgrade section
            document.getElementById('proUpgradeSection').style.display = 'none';
            
            // Show all Pro features
            document.getElementById('mainCalendarSection').style.display = 'block';
            document.getElementById('businessProfileSection').style.display = 'block';
            document.getElementById('employees').style.display = 'block';
            
            // Enable navigation chips
            document.querySelectorAll('.nav-chip').forEach(chip => {
                chip.disabled = false;
                chip.style.opacity = '1';
            });
            
            // Update voice output
            updateVoiceOutput(`Professional Business Account activated - all advanced workforce management features now available`);
        }
        
        function checkProStatus() {
            // All Pro features are free until Jan 1 2026 - auto-activate
            isProAccount = true;
            localStorage.setItem('proAccountStatus', 'active');
            
            // Set default business name if not set
            if (!localStorage.getItem('businessName')) {
                localStorage.setItem('businessName', 'Brown Barnes');
            }
            
            activateProAccount();
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Business Scheduling page loaded successfully');
            
            // Check Pro status first
            checkProStatus();
            
            // Update self-employed display with business name
            setTimeout(() => {
                updateSelfEmployedDisplay();
            }, 500);
            
            // Initialize role color selection
            initRoleColorSelection();
            
            // Initialize enhanced features
            initializeEnhancedFeatures();
            
            // Load business profile
            loadBusinessProfile();
            
            // Add event listener for role dropdown
            const roleSelect = document.getElementById('newEmployeeRole');
            if (roleSelect) {
                roleSelect.addEventListener('change', function() {
                    const customInput = document.getElementById('customRoleInput');
                    if (this.value === 'custom') {
                        customInput.style.display = 'block';
                        customInput.focus();
                    } else {
                        customInput.style.display = 'none';
                    }
                });
            }
            
            // Initialize default view - show calendar view and schedule tab
            setTimeout(() => {
                showTab('schedule');
                switchToView('calendar');
                console.log('Default calendar view activated');
            }, 100);
            
            if (isProAccount) {
                showNotification('Pro Business Account - Advanced Scheduling System Ready', 'success');
                updateVoiceOutput('Pro account active - all systems operational with advanced workforce management features');
            } else {
                showNotification('Professional Business Account Required', 'info');
                updateVoiceOutput('Upgrade to Pro Business Account to access advanced workforce management features');
            }
        });

        // Header utility functions
        function toggleViewMode() {
            const currentTab = document.querySelector('.tab-content.active');
            if (currentTab && currentTab.id === 'schedule') {
                showNotification('Toggling between Calendar and List view', 'info');
                // Add view mode toggle logic here
            } else if (currentTab && currentTab.id === 'employees') {
                showNotification('Switching employee view mode', 'info');
                // Toggle employee view modes
            }
        }

        function openQuickMessage() {
            showNotification('Opening quick message system', 'info');
            // Add quick message modal or functionality here
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                border: 1px solid rgba(0, 255, 255, 0.3);
                border-radius: 16px;
                padding: 32px;
                max-width: 400px;
                width: 90%;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #00ffff; margin: 0;">Quick Message</h3>
                    <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <textarea placeholder="Type your quick message..." style="width: 100%; height: 100px; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; padding: 12px; resize: none; font-family: inherit;"></textarea>
                <div style="display: flex; gap: 12px; margin-top: 16px; justify-content: flex-end;">
                    <button onclick="this.closest('.modal').remove()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Cancel</button>
                    <button onclick="sendQuickMessage(this)" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold;">Send</button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        function sendQuickMessage(btn) {
            const textarea = btn.closest('.modal').querySelector('textarea');
            const message = textarea.value.trim();
            
            if (message) {
                showNotification(`Quick message sent: "${message.substring(0, 30)}..."`, 'success');
                btn.closest('.modal').remove();
            } else {
                showNotification('Please enter a message', 'error');
            }
        }

        // Calendar Navigation Functions
        let currentWeek = 0; // Track current week offset
        
        function navigateWeek(direction) {
            currentWeek += direction;
            
            const weekRange = document.querySelector('.week-range');
            if (!weekRange) return;
            
            // Calculate new dates
            const today = new Date();
            const startOfWeek = new Date(today);
            startOfWeek.setDate(today.getDate() - today.getDay() + 1 + (currentWeek * 7)); // Monday
            
            const endOfWeek = new Date(startOfWeek);
            endOfWeek.setDate(startOfWeek.getDate() + 6); // Sunday
            
            // Format dates
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            
            const startMonth = months[startOfWeek.getMonth()];
            const endMonth = months[endOfWeek.getMonth()];
            const startDate = startOfWeek.getDate();
            const endDate = endOfWeek.getDate();
            const year = startOfWeek.getFullYear();
            
            let dateText;
            if (startMonth === endMonth) {
                dateText = `${startMonth} ${startDate} - ${endDate}, ${year}`;
            } else {
                dateText = `${startMonth} ${startDate} - ${endMonth} ${endDate}, ${year}`;
            }
            
            // Animate the change
            weekRange.style.transform = 'scale(0.95)';
            weekRange.style.opacity = '0.7';
            
            setTimeout(() => {
                weekRange.textContent = dateText;
                updateCalendarDates(startOfWeek);
                weekRange.style.transform = 'scale(1)';
                weekRange.style.opacity = '1';
                
                const direction_text = direction > 0 ? 'next' : 'previous';
                showNotification(`Navigated to ${direction_text} week`, 'success');
            }, 200);
        }
        
        function updateCalendarDates(startOfWeek) {
            // Update day numbers in calendar
            const dayHeaders = document.querySelectorAll('.day-number');
            dayHeaders.forEach((header, index) => {
                const dayDate = new Date(startOfWeek);
                dayDate.setDate(startOfWeek.getDate() + index);
                header.textContent = dayDate.getDate();
            });
        }
        
        // Shift Editing Function
        function editShift(shiftId) {
            try {
                // Parse shift ID to get details
                const [employee, day, startTime, endTime] = shiftId.split('-');
                const employeeNames = {
                    'sarah': 'Sarah Johnson',
                    'mike': 'Mike Chen', 
                    'jessica': 'Jessica Williams',
                    'lisa': 'Lisa Anderson',
                    'alex': 'Alex Rivera',
                    'james': 'James Wilson'
                };
                
                const dayNames = {
                    'mon': 'Monday',
                    'tue': 'Tuesday', 
                    'wed': 'Wednesday',
                    'thu': 'Thursday',
                    'fri': 'Friday',
                    'sat': 'Saturday',
                    'sun': 'Sunday'
                };
                
                const employeeName = employeeNames[employee] || employee;
                const dayName = dayNames[day] || day;
                const startTimeFormatted = startTime + (parseInt(startTime) >= 12 ? 'PM' : 'AM');
                const endTimeFormatted = endTime + (parseInt(endTime) >= 12 ? 'PM' : 'AM');
                
                // Create edit modal
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    backdrop-filter: blur(10px);
                `;
                
                const content = document.createElement('div');
                content.style.cssText = `
                    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                    border: 1px solid rgba(0, 255, 255, 0.3);
                    border-radius: 16px;
                    padding: 32px;
                    max-width: 500px;
                    width: 90%;
                `;
                
                content.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <h3 style="color: #00ffff; margin: 0; font-size: 20px;">Edit Shift</h3>
                        <button onclick="this.closest('.modal').remove()" style="background: transparent; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="color: #94a3b8; display: block; margin-bottom: 8px;">Employee:</label>
                        <div style="color: #00ffff; font-weight: 600; font-size: 16px;">${employeeName}</div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="color: #94a3b8; display: block; margin-bottom: 8px;">Day:</label>
                        <div style="color: #00ffff; font-weight: 600; font-size: 16px;">${dayName}</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                        <div>
                            <label style="color: #94a3b8; display: block; margin-bottom: 8px;">Start Time:</label>
                            <input type="time" value="${startTime.padStart(2, '0')}:00" style="width: 100%; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; padding: 12px; font-size: 14px;">
                        </div>
                        <div>
                            <label style="color: #94a3b8; display: block; margin-bottom: 8px;">End Time:</label>
                            <input type="time" value="${endTime.padStart(2, '0')}:00" style="width: 100%; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; padding: 12px; font-size: 14px;">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                        <button onclick="deleteShift('${shiftId}', this)" style="background: linear-gradient(135deg, #ef4444, #dc2626); border: none; color: white; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">Delete Shift</button>
                        <button onclick="this.closest('.modal').remove()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                        <button onclick="saveShift('${shiftId}', this)" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">Save Changes</button>
                    </div>
                `;
                
                modal.className = 'modal';
                modal.appendChild(content);
                document.body.appendChild(modal);
                
            } catch (error) {
                console.error('Error editing shift:', error);
                showNotification('Error opening shift editor', 'error');
            }
        }
        
        function saveShift(shiftId, btn) {
            const modal = btn.closest('.modal');
            const startTime = modal.querySelector('input[type="time"]').value;
            const endTime = modal.querySelectorAll('input[type="time"]')[1].value;
            
            showNotification(`Shift updated: ${startTime} - ${endTime}`, 'success');
            modal.remove();
        }
        
        function deleteShift(shiftId, btn) {
            if (confirm('Are you sure you want to delete this shift?')) {
                showNotification('Shift deleted successfully', 'success');
                btn.closest('.modal').remove();
            }
        }

        // Business Size Specific Functions

        // Small Business Functions
        function quickScheduleEmployee() {
            showNotification('Quick Schedule: Assign employee to next available shift', 'info');
        }

        function viewWeeklyReport() {
            showNotification('Weekly Report: Hours, wages, productivity summary', 'info');
        }

        // Medium Event Functions
        function manageDepartments() {
            showNotification('Department Management: Sales, Kitchen, Security, Cleaning', 'info');
        }

        function shiftRotations() {
            showNotification('Shift Rotations: Auto-rotate staff between departments', 'info');
        }

        function breakScheduler() {
            showNotification('Break Scheduler: Manage 15-min and lunch breaks', 'info');
        }

        // Large Festival Functions
        function manageStages() {
            showNotification('🎪 Multi-Stage Management: Coordinate 5 performance stages', 'success');
        }

        function securityCommand() {
            showNotification('🛡️ Security Central: 50+ security staff coordination', 'warning');
        }

        function vendorManagement() {
            showNotification('🏪 Vendor Coordination: 100+ food, merch, sponsor vendors', 'info');
        }

        function performanceScheduler() {
            showNotification('🎵 Artist Timeline: 50+ performers, sound checks, changeovers', 'info');
        }

        function emergencyEvacuation() {
            showNotification('🚨 EMERGENCY: Evacuation protocols activated', 'error');
        }

        function medicalResponse() {
            showNotification('🚑 Medical Response: Emergency medical team dispatch', 'error');
        }

        function weatherAlert() {
            showNotification('⛈️ Weather Alert: Storm monitoring and contingency plans', 'warning');
        }

        function openPublicSchedule() {
            window.open('/public-festival-schedule', '_blank');
            showNotification('📅 Public festival schedule opened in new tab', 'success');
        }

        function copyScheduleLink() {
            const scheduleUrl = window.location.origin + '/public-festival-schedule';
            navigator.clipboard.writeText(scheduleUrl).then(() => {
                showNotification('🔗 Public schedule link copied to clipboard', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = scheduleUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('🔗 Public schedule link copied to clipboard', 'success');
            });
        }

        // Workforce Settings Functions
        function openWorkforceSettings() {
            document.getElementById('workforceSettingsModal').style.display = 'flex';
            loadWorkforceSettings();
        }

        function closeWorkforceSettings() {
            document.getElementById('workforceSettingsModal').style.display = 'none';
        }

        function loadWorkforceSettings() {
            // Load saved settings from localStorage
            const settings = JSON.parse(localStorage.getItem('workforceSettings') || '{}');
            
            document.getElementById('checkinType').value = settings.checkinType || 'in-out';
            document.getElementById('paymentTiming').value = settings.paymentTiming || 'immediate';
            document.getElementById('customDays').value = settings.customDays || '';
            document.getElementById('autoGeoQR').checked = settings.autoGeoQR !== false;
            document.getElementById('checkinWindow').value = settings.checkinWindow || '30min';
            document.getElementById('multiLocation').checked = settings.multiLocation !== false;
            
            // Show/hide custom timing settings
            toggleCustomTiming();
        }

        function saveWorkforceSettings() {
            const settings = {
                checkinType: document.getElementById('checkinType').value,
                paymentTiming: document.getElementById('paymentTiming').value,
                customDays: document.getElementById('customDays').value,
                autoGeoQR: document.getElementById('autoGeoQR').checked,
                checkinWindow: document.getElementById('checkinWindow').value,
                multiLocation: document.getElementById('multiLocation').checked
            };
            
            localStorage.setItem('workforceSettings', JSON.stringify(settings));
            
            if (settings.autoGeoQR) {
                showNotification('✅ Workforce settings saved! Auto Geo QR generation enabled for all new locations.', 'success');
            } else {
                showNotification('Workforce settings saved successfully', 'success');
            }
            closeWorkforceSettings();
            
            // Update UI based on new settings
            updateWorkforceInterface(settings);
        }

        // Universal QR Code System with Automatic Location Detection
        function autoGenerateUniversalQR(locationData) {
            // Check if auto generation is enabled
            const settings = JSON.parse(localStorage.getItem('workforceSettings') || '{}');
            if (!settings.autoGeoQR) {
                return false;
            }

            // Check if universal QR already exists for this employer
            const employerId = 'employer_' + (localStorage.getItem('currentEmployerId') || 'default');
            let universalQR = JSON.parse(localStorage.getItem('universalQR_' + employerId) || 'null');
            
            if (!universalQR) {
                // Create ONE universal QR code for this employer that works at ALL locations
                universalQR = {
                    id: 'universal_qr_' + employerId,
                    employerId: employerId,
                    type: 'universal_workforce_qr',
                    createdAt: new Date().toISOString(),
                    qrCode: generateUniversalQRCode(employerId),
                    locations: []
                };
                localStorage.setItem('universalQR_' + employerId, JSON.stringify(universalQR));
            }

            // Add this location to the universal QR's location list
            const locationEntry = {
                id: 'loc_' + Date.now(),
                name: locationData.name || 'Festival Venue',
                address: locationData.address,
                coordinates: locationData.coordinates || { lat: 30.2672, lng: -97.7431 },
                validationRadius: 100,
                addedAt: new Date().toISOString()
            };

            universalQR.locations.push(locationEntry);
            localStorage.setItem('universalQR_' + employerId, JSON.stringify(universalQR));

            showNotification(`✅ Location "${locationData.name}" added to universal QR system - same code works everywhere!`, 'success');
            return universalQR;
        }

        // Generate Universal QR code that works at all employer locations
        function generateUniversalQRCode(employerId) {
            const qrContent = {
                type: 'universal_workforce_qr',
                employerId: employerId,
                version: 'v2_universal',
                created: Date.now(),
                validation: 'auto_location_detection'
            };
            return btoa(JSON.stringify(qrContent));
        }

        // Automatic Location Detection System
        function detectWorkerLocation(workerGPS, universalQR) {
            if (!workerGPS || !universalQR.locations.length) {
                return null;
            }

            // Find the closest location within validation radius
            let closestLocation = null;
            let shortestDistance = Infinity;

            universalQR.locations.forEach(location => {
                if (location.coordinates) {
                    const distance = calculateDistance(
                        workerGPS.lat, workerGPS.lng,
                        location.coordinates.lat, location.coordinates.lng
                    );

                    if (distance <= location.validationRadius && distance < shortestDistance) {
                        shortestDistance = distance;
                        closestLocation = location;
                    }
                }
            });

            return closestLocation ? {
                location: closestLocation,
                distance: shortestDistance,
                withinRange: true
            } : null;
        }

        // Distance calculation helper
        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371e3; // Earth's radius in meters
            const φ1 = lat1 * Math.PI/180;
            const φ2 = lat2 * Math.PI/180;
            const Δφ = (lat2-lat1) * Math.PI/180;
            const Δλ = (lng2-lng1) * Math.PI/180;

            const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
                      Math.cos(φ1) * Math.cos(φ2) *
                      Math.sin(Δλ/2) * Math.sin(Δλ/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

            return R * c; // Distance in meters
        }

        // Enhanced location addition with universal QR system
        function addLocationWithAutoQR(locationName, address, coordinates) {
            const locationData = {
                id: 'loc_' + Date.now(),
                name: locationName,
                address: address,
                coordinates: coordinates,
                addedAt: new Date().toISOString()
            };

            // Save location to festival locations
            let festivalLocations = JSON.parse(localStorage.getItem('festivalLocations') || '[]');
            festivalLocations.push(locationData);
            localStorage.setItem('festivalLocations', JSON.stringify(festivalLocations));

            // Add to universal QR system
            const universalQR = autoGenerateUniversalQR(locationData);
            
            if (universalQR) {
                showNotification(`📍 "${locationName}" added to universal QR system! Same worker QR code works infinitely at all locations.`, 'success');
                console.log('Location added to universal QR system:', locationData.name);
            } else {
                showNotification(`📍 Location "${locationName}" added successfully!`, 'success');
            }

            return locationData;
        }

        // Universal QR workforce scheduling with auto location detection
        function scheduleWorkforceWithAutoQR(workerId, locationName, shiftTime) {
            // Check if location exists, if not create it and add to universal QR
            let festivalLocations = JSON.parse(localStorage.getItem('festivalLocations') || '[]');
            let location = festivalLocations.find(loc => loc.name === locationName);
            
            if (!location) {
                // Auto-create location and add to universal QR system
                location = addLocationWithAutoQR(locationName, `${locationName} Festival Venue`, null);
                showNotification(`🎯 New location "${locationName}" added to universal QR system - same worker code works everywhere!`, 'info');
            }
            
            // Get universal QR for this employer
            const employerId = 'employer_' + (localStorage.getItem('currentEmployerId') || 'default');
            const universalQR = JSON.parse(localStorage.getItem('universalQR_' + employerId) || 'null');
            
            return {
                workerId: workerId,
                location: location,
                universalQR: universalQR,
                shiftTime: shiftTime,
                qrSystem: 'universal_infinite_use'
            };
        }

        // Worker check-in simulation with automatic location detection
        function simulateWorkerCheckIn(workerGPS) {
            const employerId = 'employer_' + (localStorage.getItem('currentEmployerId') || 'default');
            const universalQR = JSON.parse(localStorage.getItem('universalQR_' + employerId) || 'null');
            
            if (!universalQR) {
                showNotification('❌ No universal QR system found for this employer', 'error');
                return false;
            }

            // Automatically detect which location the worker is at
            const detectedLocation = detectWorkerLocation(workerGPS, universalQR);
            
            if (detectedLocation) {
                showNotification(
                    `✅ Check-in successful at ${detectedLocation.location.name} (${detectedLocation.distance.toFixed(0)}m away) - Same QR code works infinitely!`, 
                    'success'
                );
                console.log('Worker checked in with universal QR at:', detectedLocation.location.name);
                return true;
            } else {
                showNotification('❌ Worker not within range of any registered location', 'error');
                return false;
            }
        }

        function toggleCustomTiming() {
            const paymentTiming = document.getElementById('paymentTiming').value;
            const customSettings = document.getElementById('customTimingSettings');
            
            if (paymentTiming === 'custom') {
                customSettings.style.display = 'block';
            } else {
                customSettings.style.display = 'none';
            }
        }

        function updateWorkforceInterface(settings) {
            // Update scheduling interface based on settings
            if (settings.multiLocation) {
                showNotification('Multi-location scheduling enabled - QR codes will auto-generate per location', 'info');
            }
            
            if (settings.checkinType === 'in-only') {
                showNotification('Check-in only mode - Fixed payment structure activated', 'info');
            }
            
            // Update payment timing display
            updatePaymentTimingDisplay(settings.paymentTiming, settings.customDays);
        }

        function updatePaymentTimingDisplay(timing, customDays) {
            const messages = {
                'immediate': 'Payments processed immediately after check-out',
                'daily': 'Payments processed at end of each day',
                'weekly': 'Payments processed weekly',
                'event-end': 'Payments held until festival completion',
                'custom': `Payments released ${customDays} days after shift completion`
            };
            
            if (messages[timing]) {
                console.log('Payment timing set:', messages[timing]);
            }
        }

        function manageLocations() {
            // Demo universal QR system with sample locations
            const sampleLocations = [
                { name: 'Main Stage', address: '123 Festival Blvd, Austin, TX', coordinates: { lat: 30.2672, lng: -97.7431 } },
                { name: 'Acoustic Tent', address: '456 Music Way, Austin, TX', coordinates: { lat: 30.2675, lng: -97.7435 } },
                { name: 'Food Court', address: '789 Vendor St, Austin, TX', coordinates: { lat: 30.2680, lng: -97.7440 } }
            ];
            
            showNotification('🎯 Demo: Creating universal QR system for infinite worker check-ins...', 'info');
            
            setTimeout(() => {
                sampleLocations.forEach((loc, index) => {
                    setTimeout(() => {
                        addLocationWithAutoQR(loc.name, loc.address, loc.coordinates);
                    }, index * 1500);
                });
                
                // Simulate worker check-in after locations are added
                setTimeout(() => {
                    showNotification('🧪 Simulating worker check-in with universal QR...', 'info');
                    const workerGPS = { lat: 30.2673, lng: -97.7432 }; // Near Main Stage
                    simulateWorkerCheckIn(workerGPS);
                }, 6000);
            }, 1000);
        }

        // Event listeners for workforce settings
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listener for payment timing change
            if (document.getElementById('paymentTiming')) {
                document.getElementById('paymentTiming').addEventListener('change', toggleCustomTiming);
            }
        });
    </script>

    <!-- Workforce Settings Modal -->
    <div id="workforceSettingsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.95)); border: 2px solid rgba(0, 255, 255, 0.3); border-radius: 16px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; backdrop-filter: blur(20px);">
            <div style="padding: 24px; border-bottom: 1px solid rgba(0, 255, 255, 0.2);">
                <h2 style="color: #00ffff; margin: 0; font-size: 24px; font-weight: bold; text-align: center;">
                    🛠️ Workforce Settings
                </h2>
                <p style="color: #94a3b8; margin: 8px 0 0 0; text-align: center; font-size: 14px;">
                    Customize check-in options, payment processing, and Geo QR codes
                </p>
            </div>
            
            <div style="padding: 24px;">
                <!-- Check-in Options -->
                <div style="margin-bottom: 32px;">
                    <h3 style="color: #00ffff; font-size: 18px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14l-5-4.87 4.91-1.01L12 2z"/>
                        </svg>
                        Check-in & Payment Options
                    </h3>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <label style="color: #94a3b8; font-weight: 500; margin-bottom: 8px; display: block;">Workforce Check-in Type:</label>
                        <select id="checkinType" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; color: white; font-size: 16px;">
                            <option value="in-out">Check In & Out (Track Hours)</option>
                            <option value="in-only">Check In Only (Fixed Payment)</option>
                        </select>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <label style="color: #94a3b8; font-weight: 500; margin-bottom: 8px; display: block;">Payment Processing:</label>
                        <select id="paymentTiming" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; color: white; font-size: 16px;">
                            <option value="immediate">Immediate Payment (After Check-out)</option>
                            <option value="daily">Daily Payment (End of Day)</option>
                            <option value="weekly">Weekly Payment (End of Week)</option>
                            <option value="event-end">Event End Payment (Festival Completion)</option>
                            <option value="custom">Custom Time Release</option>
                        </select>
                    </div>
                    
                    <div id="customTimingSettings" style="display: none; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <label style="color: #94a3b8; font-weight: 500; margin-bottom: 8px; display: block;">Custom Payment Release:</label>
                        <input type="number" id="customDays" placeholder="Days after shift" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; color: white; font-size: 16px; margin-bottom: 8px;">
                        <small style="color: #64748b;">Enter number of days after shift completion to release payment</small>
                    </div>
                </div>
                
                <!-- Geo QR Code Settings -->
                <div style="margin-bottom: 32px;">
                    <h3 style="color: #00ffff; font-size: 18px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        Location & QR Code Management
                    </h3>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <span style="color: #94a3b8; font-weight: 500;">Auto-Generate Geo QR for Locations:</span>
                            <label style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                <input type="checkbox" id="autoGeoQR" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #00ffff; transition: .4s; border-radius: 34px;"></span>
                                <span style="position: absolute; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                        <p style="color: #64748b; font-size: 14px; margin: 0;">
                            <strong>UNIVERSAL QR SYSTEM:</strong> Same worker can use same QR code infinitely across ALL employer locations! System automatically detects which location they're at for check-in. Same applies to driver portal.
                        </p>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
                        <label style="color: #94a3b8; font-weight: 500; margin-bottom: 8px; display: block;">Check-in Time Window:</label>
                        <select id="checkinWindow" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 8px; color: white; font-size: 16px;">
                            <option value="strict">Exact Shift Times Only</option>
                            <option value="15min">15 Minutes Early/Late</option>
                            <option value="30min">30 Minutes Early/Late</option>
                            <option value="1hour">1 Hour Early/Late</option>
                            <option value="daily">Daily Check-ins (Any Time)</option>
                        </select>
                    </div>
                </div>
                
                <!-- Multi-Location Settings -->
                <div style="margin-bottom: 32px;">
                    <h3 style="color: #00ffff; font-size: 18px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"/>
                            <path d="M7 12l3-3 3 3 5-5"/>
                        </svg>
                        Multi-Location Management
                    </h3>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <span style="color: #94a3b8; font-weight: 500;">Enable Multi-Location Scheduling:</span>
                            <label style="position: relative; display: inline-block; width: 60px; height: 34px;">
                                <input type="checkbox" id="multiLocation" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #00ffff; transition: .4s; border-radius: 34px;"></span>
                                <span style="position: absolute; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                        <p style="color: #64748b; font-size: 14px; margin: 0; margin-bottom: 16px;">Allow workforce to be scheduled across multiple festival venues/locations</p>
                        
                        <button onclick="manageLocations()" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%;">
                            Manage Festival Locations
                        </button>
                    </div>
                </div>
            </div>
            
            <div style="padding: 24px; border-top: 1px solid rgba(0, 255, 255, 0.2); display: flex; gap: 16px; justify-content: center;">
                <button onclick="closeWorkforceSettings()" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                    Cancel
                </button>
                <button onclick="saveWorkforceSettings()" style="background: linear-gradient(135deg, #00ffff, #4169e1); border: none; color: white; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: bold;">
                    Save Settings
                </button>
            </div>
        </div>
    </div>
</body>
</html>