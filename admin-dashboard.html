<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketPace Admin Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0d0221, #1a0b3d, #2d1b5e);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .particle {
            position: fixed;
            background: radial-gradient(circle, rgba(0,255,255,0.8) 0%, rgba(138,43,226,0.4) 100%);
            border-radius: 50%;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 48px;
            background: linear-gradient(135deg, #00FFFF, #8A2BE2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0,255,255,0.5);
            margin-bottom: 10px;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #00FFFF, #0088CC);
            color: #0d0221;
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,255,255,0.4);
        }

        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FF6B35, #FF4500);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255,107,53,0.4);
        }

        .admin-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
        }

        .tab-button {
            background: linear-gradient(135deg, rgba(0,255,255,0.2), rgba(138,43,226,0.2));
            color: white;
            border: 2px solid rgba(0,255,255,0.3);
            padding: 15px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .tab-button:hover {
            background: linear-gradient(135deg, rgba(0,255,255,0.4), rgba(138,43,226,0.4));
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,255,255,0.3);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #00FFFF, #8A2BE2);
            color: #0d0221;
            border-color: #00FFFF;
            box-shadow: 0 0 25px rgba(0,255,255,0.6);
        }

        .admin-content {
            display: none;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid rgba(0,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        .admin-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(138,43,226,0.1));
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(0,255,255,0.3);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,255,255,0.2);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #00FFFF;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(255,255,255,0.8);
        }

        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }

        .action-btn {
            background: linear-gradient(135deg, #8A2BE2, #4B0082);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: linear-gradient(135deg, #9A32F2, #5B1092);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(138,43,226,0.4);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #00FFFF, #0088CC);
            color: #0d0221;
        }

        .action-btn.primary:hover {
            background: linear-gradient(135deg, #00DDDD, #0077BB);
        }

        .action-btn.danger {
            background: linear-gradient(135deg, #FF6B35, #FF4500);
        }

        .action-btn.danger:hover {
            background: linear-gradient(135deg, #FF7B45, #FF5510);
        }

        .test-api-btn {
            background: linear-gradient(135deg, #8A2BE2, #4B0082);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .test-api-btn:hover {
            background: linear-gradient(135deg, #9A32F2, #5B1092);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(138,43,226,0.4);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 32px;
            }
            
            .admin-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .back-button, .logout-btn {
                position: relative;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating particles -->
    <script>
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.width = Math.random() * 6 + 3 + 'px';
            particle.style.height = particle.style.width;
            particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
            particle.style.animationDelay = Math.random() * 2 + 's';
            document.body.appendChild(particle);
        }
    </script>

    <button class="back-button" onclick="window.location.href='/'">‚Üê Back to MarketPace</button>
    <button class="logout-btn" onclick="adminLogout()">üö™ Logout</button>

    <div class="container">
        <div class="header">
            <h1>Admin Dashboard</h1>
            <p style="font-size: 18px; color: rgba(255,255,255,0.8);">MarketPace Platform Management & Analytics</p>
            <p style="font-size: 14px; color: #00FFFF; margin-top: 10px;">Welcome back, Admin - Last login: <span id="lastLogin"></span></p>
            <button class="test-api-btn" onclick="testConnection()">üîß Test API Connection</button>
        </div>

        <div class="admin-tabs">
            <button class="tab-button active" data-tab="overview">Platform Overview</button>
            <button class="tab-button" data-tab="campaigns">Campaign Tracker</button>
            <button class="tab-button" data-tab="analytics">Page Analytics</button>
            <button class="tab-button" data-tab="drivers">Driver Management</button>
            <button class="tab-button" data-tab="promotions">Promotional Tools</button>
            <button class="tab-button" data-tab="routes">Route Optimization</button>
            <button class="tab-button" data-tab="content">Content Editor</button>
            <button class="tab-button" data-tab="integrations">Integrations</button>
        </div>

        <!-- Platform Overview -->
        <div id="overview" class="admin-content active">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üìä Platform Overview</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">Loading...</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="driverApplications">Loading...</div>
                    <div class="stat-label">Driver Applications</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="demoSignups">Loading...</div>
                    <div class="stat-label">Demo Signups</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="sponsorships">Loading...</div>
                    <div class="stat-label">Active Sponsorships</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="revenue">Loading...</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="cities">Loading...</div>
                    <div class="stat-label">Launch Cities</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn primary" onclick="refreshStats()">üîÑ Refresh Data</button>
                <button class="action-btn" onclick="exportOverview()">üìä Export Report</button>
                <button class="action-btn" onclick="viewSystemHealth()">üè• System Health</button>
            </div>
        </div>

        <!-- Campaign Tracker -->
        <div id="campaigns" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üéØ Campaign Tracker</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Cities Launched</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Early Supporters</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Drivers Hired</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Business Partners</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn primary" onclick="exportCampaignData()">üìä Export Campaign Data</button>
                <button class="action-btn" onclick="sendCityNotifications()">üì± Send City Notifications</button>
                <button class="action-btn" onclick="generateCampaignReport()">üìÑ Generate Report</button>
            </div>
        </div>

        <!-- Analytics -->
        <div id="analytics" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üìà Page Analytics</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="pageViews">0</div>
                    <div class="stat-label">Page Views Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeSessions">0</div>
                    <div class="stat-label">Active Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="demoCompletions">0</div>
                    <div class="stat-label">Demo Completions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="facebookShares">0</div>
                    <div class="stat-label">Facebook Shares</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn primary" onclick="refreshAnalytics()">üîÑ Refresh Analytics</button>
                <button class="action-btn" onclick="exportAnalytics()">üìä Export Analytics</button>
                <button class="action-btn" onclick="setupTracking()">üìç Setup Tracking</button>
            </div>
        </div>

        <!-- Driver Management -->
        <div id="drivers" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üöó Driver Management</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Pending Applications</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Active Drivers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Completed Routes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$0</div>
                    <div class="stat-label">Driver Earnings</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn primary" onclick="approveAllDrivers()">‚úÖ Approve All Pending</button>
                <button class="action-btn" onclick="sendDriverNotifications()">üì± Send Notifications</button>
                <button class="action-btn" onclick="exportDriverData()">üìä Export Driver Data</button>
            </div>
        </div>

        <!-- Promotional Tools -->
        <div id="promotions" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üì¢ Promotional Tools</h2>
            
            <div class="action-buttons">
                <button class="action-btn primary" onclick="createPromotion()">‚ûï Create Promotion</button>
                <button class="action-btn" onclick="sendPromoEmails()">üìß Send Promo Emails</button>
                <button class="action-btn" onclick="generatePromoCodes()">üéüÔ∏è Generate Promo Codes</button>
                <button class="action-btn" onclick="launchSocialCampaign()">üì± Launch Social Campaign</button>
            </div>
        </div>

        <!-- Route Optimization -->
        <div id="routes" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">‚ö° Route Optimization</h2>
            
            <div class="action-buttons">
                <button class="action-btn primary" onclick="optimizeAllRoutes()">‚ö° Optimize All Routes</button>
                <button class="action-btn" onclick="createShopRoute()">üè™ Create Shop Route</button>
                <button class="action-btn" onclick="viewRouteAnalytics()">üìä View Analytics</button>
                <button class="action-btn" onclick="exportRouteData()">üìÑ Export Route Data</button>
            </div>
        </div>

        <!-- Content Editor -->
        <div id="content" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">‚úèÔ∏è Content Editor</h2>
            
            <div class="action-buttons">
                <button class="action-btn primary" onclick="editPage('pitch')">üìù Edit Pitch Page</button>
                <button class="action-btn" onclick="editPage('community')">üë• Edit Community Page</button>
                <button class="action-btn" onclick="editPage('driver')">üöó Edit Driver Page</button>
                <button class="action-btn" onclick="saveContentChanges()">üíæ Save All Changes</button>
                <button class="action-btn" onclick="previewChanges()">üëÄ Preview Changes</button>
                <button class="action-btn danger" onclick="revertChanges()">‚Ü∂ Revert Changes</button>
            </div>
        </div>

        <!-- Integrations -->
        <div id="integrations" class="admin-content">
            <h2 style="color: #00FFFF; margin-bottom: 20px;">üîó Platform Integrations</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">6</div>
                    <div class="stat-label">Active Integrations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1</div>
                    <div class="stat-label">Warning Status</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1</div>
                    <div class="stat-label">Inactive</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Overall Health</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn primary" onclick="testAllIntegrations()">üîç Test All Connections</button>
                <button class="action-btn" onclick="refreshAPIKeys()">üîë Refresh API Keys</button>
                <button class="action-btn" onclick="addNewIntegration()">‚ûï Add Integration</button>
                <button class="action-btn" onclick="exportIntegrationReport()">üìä Export Report</button>
                <button class="action-btn danger" onclick="emergencyDisconnect()">üö® Emergency Disconnect</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentTab = 'overview';

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthentication();
            loadInitialData();
            setupTabNavigation();
            setLastLoginTime();
        });

        // Authentication check
        function checkAuthentication() {
            const isLoggedIn = localStorage.getItem('adminLoggedIn');
            const loginTime = localStorage.getItem('adminLoginTime');
            
            if (!isLoggedIn || isLoggedIn !== 'true') {
                window.location.href = '/admin-login.html';
                return;
            }
            
            // Check if login is still valid (24 hours)
            if (loginTime) {
                const now = Date.now();
                const timeDiff = now - parseInt(loginTime);
                const twentyFourHours = 24 * 60 * 60 * 1000;
                
                if (timeDiff >= twentyFourHours) {
                    localStorage.removeItem('adminLoggedIn');
                    localStorage.removeItem('adminLoginTime');
                    window.location.href = '/admin-login.html';
                    return;
                }
            }
            
            console.log('Admin authenticated successfully');
        }

        // Set last login time
        function setLastLoginTime() {
            const loginTime = localStorage.getItem('adminLoginTime');
            if (loginTime) {
                document.getElementById('lastLogin').textContent = new Date(parseInt(loginTime)).toLocaleString();
            }
        }

        // Setup tab navigation
        function setupTabNavigation() {
            const tabButtons = document.querySelectorAll('.tab-button');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
        }

        // Switch between tabs
        function switchTab(tabName) {
            console.log('Switching to tab:', tabName);
            currentTab = tabName;
            
            // Hide all content
            document.querySelectorAll('.admin-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected content
            const targetContent = document.getElementById(tabName);
            if (targetContent) {
                targetContent.classList.add('active');
                console.log('Switched to tab:', tabName);
            } else {
                console.error('Tab content not found:', tabName);
                return;
            }
            
            // Activate the clicked button
            const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            // Load tab-specific data
            loadTabData(tabName);
        }

        // Load initial data
        async function loadInitialData() {
            await loadAdminStats();
        }

        // Load tab-specific data
        function loadTabData(tabName) {
            switch(tabName) {
                case 'overview':
                    loadAdminStats();
                    break;
                case 'campaigns':
                    loadCampaignData();
                    break;
                case 'analytics':
                    loadAnalyticsData();
                    break;
                case 'drivers':
                    loadDriverData();
                    break;
                case 'promotions':
                    loadPromotionsData();
                    break;
                case 'routes':
                    loadRouteData();
                    break;
                case 'content':
                    loadContentData();
                    break;
                case 'integrations':
                    loadIntegrationData();
                    break;
            }
        }

        // Load admin stats
        async function loadAdminStats() {
            console.log('Loading admin stats...');
            try {
                const response = await fetch('/api/admin/stats?token=admin_token_2025');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const stats = await response.json();
                console.log('Admin stats loaded:', stats);
                
                // Update stat displays
                updateElement('totalUsers', stats.totalUsers || 0);
                updateElement('driverApplications', stats.driverApplications || 0);
                updateElement('demoSignups', stats.demoSignups || 0);
                updateElement('sponsorships', stats.sponsorships || 0);
                updateElement('revenue', '$' + (stats.revenue || 0));
                updateElement('cities', stats.cities || 0);
                updateElement('activeSessions', stats.activeSessions || 0);
                updateElement('pageViews', stats.pageViews || 0);
                updateElement('demoCompletions', stats.demoCompletions || 0);
                updateElement('facebookShares', stats.facebookShares || 0);
                
            } catch (error) {
                console.error('Error loading admin stats:', error);
                updateElement('totalUsers', 'Error');
            }
        }

        // Helper function to update elements
        function updateElement(id, value) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = value;
            }
        }

        // Placeholder data loading functions
        async function loadCampaignData() {
            console.log('Loading campaign data...');
        }

        async function loadAnalyticsData() {
            console.log('Loading analytics data...');
        }

        async function loadDriverData() {
            console.log('Loading driver data...');
        }

        async function loadPromotionsData() {
            console.log('Loading promotions data...');
        }

        async function loadRouteData() {
            console.log('Loading route data...');
        }

        async function loadContentData() {
            console.log('Loading content data...');
        }

        async function loadIntegrationData() {
            console.log('Loading integration data...');
        }

        // Test API connection
        async function testConnection() {
            console.log('Testing API connection...');
            try {
                const response = await fetch('/api/admin/test?token=admin_token_2025');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const data = await response.json();
                console.log('API response:', data);
                
                if (data.success) {
                    alert('‚úÖ Admin API connection successful!\n\nMessage: ' + data.message + '\nTimestamp: ' + new Date(data.timestamp).toLocaleString());
                } else {
                    alert('‚ùå Admin API connection failed: ' + (data.message || 'Unknown error'));
                }
            } catch (error) {
                console.error('API test error:', error);
                alert('‚ùå Admin API connection error: ' + error.message);
            }
        }

        // Admin functions
        function adminLogout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminLoginTime');
                window.location.href = '/admin-login.html';
            }
        }

        async function refreshStats() {
            await loadAdminStats();
            alert('‚úÖ Admin statistics refreshed successfully!');
        }

        function exportOverview() {
            alert('üìä Platform overview report exported successfully!');
        }

        function viewSystemHealth() {
            alert('üè• System health: All services operational. Database: Connected. API: Healthy.');
        }

        // Campaign functions
        function exportCampaignData() {
            alert('üìä Campaign data exported to CSV format successfully!');
        }

        function sendCityNotifications() {
            alert('üì± Launch notifications sent to all drivers in ready cities!');
        }

        function generateCampaignReport() {
            alert('üìÑ Campaign report generated and saved successfully!');
        }

        // Analytics functions
        async function refreshAnalytics() {
            await loadAnalyticsData();
            alert('üîÑ Analytics data refreshed successfully!');
        }

        function exportAnalytics() {
            alert('üìä Analytics data exported to CSV format successfully!');
        }

        function setupTracking() {
            alert('üìç Advanced tracking configuration updated successfully!');
        }

        // Driver functions
        function approveAllDrivers() {
            if (confirm('Approve all pending driver applications?')) {
                alert('‚úÖ All pending drivers approved and notifications sent!');
            }
        }

        function sendDriverNotifications() {
            alert('üì± Launch notifications sent to all drivers!');
        }

        function exportDriverData() {
            alert('üìä Driver data exported with privacy compliance!');
        }

        // Promotion functions
        function createPromotion() {
            alert('‚ûï Promotion creation wizard launched!');
        }

        function sendPromoEmails() {
            alert('üìß Promotional emails sent to all users!');
        }

        function generatePromoCodes() {
            alert('üéüÔ∏è New promo codes generated successfully!');
        }

        function launchSocialCampaign() {
            alert('üì± Social media campaign launched across all platforms!');
        }

        // Route functions
        function optimizeAllRoutes() {
            alert('‚ö° All active routes optimized! Average efficiency increased by 12%!');
        }

        function createShopRoute() {
            alert('üè™ New shop delivery route created for bulk orders!');
        }

        function viewRouteAnalytics() {
            alert('üìä Detailed route analytics dashboard opened!');
        }

        function exportRouteData() {
            alert('üìÑ Route performance data exported successfully!');
        }

        // Content functions
        function editPage(pageType) {
            alert(`üìù Opening ${pageType} page editor with AI assistance!`);
        }

        function saveContentChanges() {
            alert('üíæ All content changes saved successfully!');
        }

        function previewChanges() {
            alert('üëÄ Preview mode activated. Opening staging environment!');
            window.open('/', '_blank');
        }

        function revertChanges() {
            if (confirm('‚Ü∂ Are you sure you want to revert all unsaved changes?')) {
                alert('Changes reverted to last saved version!');
            }
        }

        // Integration functions
        function testAllIntegrations() {
            alert('üîç Testing all integrations... Results: 6 healthy, 1 warning (Ticketmaster), 1 inactive (StubHub)!');
        }

        function refreshAPIKeys() {
            if (confirm('üîë Refresh all API keys? This may temporarily disrupt services.')) {
                alert('API keys refreshed successfully. All services reconnected!');
            }
        }

        function addNewIntegration() {
            alert('‚ûï Integration marketplace opened. Choose from 50+ available platforms!');
        }

        function exportIntegrationReport() {
            alert('üìä Integration health report exported successfully!');
        }

        function emergencyDisconnect() {
            if (confirm('üö® EMERGENCY: Disconnect all external integrations?')) {
                alert('Emergency disconnect activated. All integrations paused!');
            }
        }

        // Auto-refresh stats every 30 seconds
        setInterval(loadAdminStats, 30000);
    </script>
</body>
</html>