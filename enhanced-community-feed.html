<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketPace Community Feed</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0d0221 0%, #1a0845 50%, #2d1810 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Floating particles background */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Header */
        .header {
            background: rgba(13, 2, 33, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 2rem;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .demo-badge {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .demo-badge:hover {
            transform: scale(1.05);
        }

        /* Main content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
            gap: 2rem;
            position: relative;
            z-index: 1;
        }

        /* Sidebar filters */
        .filters-sidebar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 100px;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .filters-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .filter-group {
            margin-bottom: 1.5rem;
        }

        .filter-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #ffffff;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        /* Feed content */
        .feed-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Post composer */
        .post-composer {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .composer-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .composer-input {
            flex: 1;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            resize: vertical;
            min-height: 50px;
            outline: none;
        }

        .composer-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .composer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .post-type-selector {
            display: flex;
            gap: 0.5rem;
        }

        .post-type-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .post-type-btn:hover,
        .post-type-btn.active {
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            transform: translateY(-2px);
        }

        .post-btn {
            padding: 0.75rem 2rem;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        /* Feed posts */
        .feed-post {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 255, 255, 0.2);
            margin-bottom: 1rem;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .post-meta {
            flex: 1;
        }

        .post-author {
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 0.25rem;
        }

        .post-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .post-category {
            background: linear-gradient(45deg, #9d4edd, #ff6b35);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            color: white;
            font-weight: 600;
        }

        .post-content {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .post-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Right sidebar */
        .right-sidebar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 100px;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .trending-item {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .trending-item:hover {
            background: rgba(0, 255, 255, 0.1);
            transform: translateX(5px);
        }

        /* Demo mode popup */
        .demo-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .demo-popup.hidden {
            display: none;
        }

        .popup-content {
            background: linear-gradient(135deg, #0d0221 0%, #1a0845 50%, #2d1810 100%);
            padding: 3rem;
            border-radius: 20px;
            border: 2px solid #00ffff;
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.3);
            text-align: center;
            max-width: 500px;
            margin: 2rem;
        }

        .popup-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .popup-text {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        .popup-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .popup-btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .popup-btn.primary {
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            color: white;
        }

        .popup-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .popup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        /* Shop showcase */
        .shop-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .shop-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 255, 255, 0.2);
        }

        .shop-item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border-radius: 10px;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .shop-item-name {
            font-weight: bold;
            margin-bottom: 0.25rem;
            color: #00ffff;
        }

        .shop-item-price {
            color: #ff6b35;
            font-weight: bold;
        }

        /* Poll styles */
        .poll-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .poll-question {
            font-weight: bold;
            margin-bottom: 1rem;
            color: #00ffff;
        }

        .poll-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .poll-option:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        .poll-percentage {
            font-weight: bold;
            color: #ff6b35;
        }

        /* New styles for enhanced features */
        .radius-slider {
            width: 100%;
            margin: 0.5rem 0;
            appearance: none;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            outline: none;
        }

        .radius-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border-radius: 50%;
            cursor: pointer;
        }

        .town-search-input {
            width: calc(100% - 80px);
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            color: white;
            margin-bottom: 0.5rem;
        }

        .search-town-btn {
            width: 70px;
            padding: 0.5rem;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            margin-left: 5px;
        }

        .poll-creator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .poll-question-input {
            margin-bottom: 1rem;
        }

        .poll-option-input {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            gap: 0.5rem;
        }

        .poll-option-field {
            flex: 1;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            color: white;
        }

        .poll-option-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .remove-option-btn {
            width: 25px;
            height: 25px;
            background: #ff4444;
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            font-size: 12px;
        }

        .add-poll-option-btn {
            padding: 0.5rem 1rem;
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            color: #00ffff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-poll-option-btn:hover {
            background: rgba(0, 255, 255, 0.3);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            outline: none;
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Floating Profile Icon */
        .floating-profile {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 255, 255, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .floating-profile:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 255, 255, 0.5);
        }

        .profile-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            color: white;
        }

        /* Main Menu Button */
        .main-menu-btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(45deg, #00ffff, #9d4edd);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .main-menu-btn:hover {
            background: linear-gradient(45deg, #00cccc, #7c3aed);
            transform: translateY(-2px);
        }

        /* Main Menu Overlay */
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 2, 33, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-content {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            backdrop-filter: blur(20px);
        }

        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .menu-header h3 {
            color: #00ffff;
            margin: 0;
            font-size: 1.5rem;
        }

        .close-menu-btn {
            background: none;
            border: none;
            color: #ff6b35;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-menu-btn:hover {
            background: rgba(255, 107, 53, 0.2);
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
        }

        .menu-item:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.4);
            transform: translateX(5px);
        }

        .menu-item span {
            font-size: 1.2rem;
            width: 20px;
        }

        /* Item Actions */
        .item-actions {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .item-action-btn {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .item-action-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.5);
            transform: translateY(-1px);
        }

        .item-action-btn.counter-offer {
            border-color: rgba(255, 107, 53, 0.5);
            color: #ff6b35;
        }

        .item-action-btn.counter-offer:hover {
            background: rgba(255, 107, 53, 0.2);
        }

        .item-action-btn.add-to-cart {
            border-color: rgba(157, 78, 221, 0.5);
            color: #9d4edd;
        }

        .item-action-btn.add-to-cart:hover {
            background: rgba(157, 78, 221, 0.2);
        }

        .item-action-btn.deliver-now {
            border-color: rgba(0, 255, 255, 0.5);
            color: #00ffff;
        }

        .item-action-btn.deliver-now:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        .post-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ff6b35;
            margin-bottom: 0.5rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .filters-sidebar,
            .right-sidebar {
                position: relative;
                top: 0;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .search-bar {
                order: 3;
                margin: 0;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Floating particles -->
    <div class="particles" id="particles"></div>

    <!-- Demo mode popup -->
    <div class="demo-popup" id="demoPopup">
        <div class="popup-content">
            <h2 class="popup-title">🎉 Early Supporter Benefits!</h2>
            <p class="popup-text">
                Join MarketPace now and receive a <strong>FREE lifetime Pro account</strong> worth $299/year! 
                Early supporters get exclusive access to all premium features forever.
            </p>
            <div class="popup-buttons">
                <button class="popup-btn primary" onclick="signUpNow()">Sign Up Now - FREE Pro!</button>
                <button class="popup-btn secondary" onclick="continueBrowsing()">Continue Browsing</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">MarketPace</div>
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="Search posts, products, services, or people..." id="searchInput">
            </div>
            <div class="user-menu">
                <div class="demo-badge" onclick="showDemoPopup()">
                    Demo Mode - Sign Up Free!
                </div>
            </div>
        </div>
    </header>

    <!-- Main content -->
    <main class="main-content">
        <!-- Left sidebar - Filters -->
        <aside class="filters-sidebar">
            <!-- Main Menu Button -->
            <button class="main-menu-btn" onclick="toggleMainMenu()">☰ Main Menu</button>
            
            <h3 class="filters-title">Filters</h3>
            
            <div class="filter-group">
                <label class="filter-label">Category</label>
                <div class="filter-options">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="buy-sell">Buy/Sell</button>
                    <button class="filter-btn" data-filter="rent">Rent</button>
                    <button class="filter-btn" data-filter="services">Services</button>
                    <button class="filter-btn" data-filter="hub">The Hub</button>
                    <button class="filter-btn" data-filter="shops">Shops</button>
                </div>
            </div>

            <div class="filter-group">
                <label class="filter-label">Post Type</label>
                <div class="filter-options">
                    <button class="filter-btn" data-filter="product">Products</button>
                    <button class="filter-btn" data-filter="iso">ISO Posts</button>
                    <button class="filter-btn" data-filter="poll">Polls</button>
                    <button class="filter-btn" data-filter="general">General</button>
                </div>
            </div>

            <div class="filter-group">
                <label class="filter-label">Location</label>
                <div class="filter-options">
                    <button class="filter-btn active" data-filter="nearby">Nearby</button>
                    <button class="filter-btn" data-filter="town-search">Search by Town</button>
                </div>
                <div class="location-controls" style="margin-top: 1rem;">
                    <label class="filter-label">Radius (miles)</label>
                    <input type="range" id="radiusSlider" min="1" max="50" value="10" class="radius-slider">
                    <span id="radiusValue">10 miles</span>
                    
                    <div class="town-search-container" style="margin-top: 1rem; display: none;">
                        <input type="text" id="townSearch" placeholder="Enter town name..." class="town-search-input">
                        <button class="search-town-btn">Search</button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Center content - Feed -->
        <div class="feed-content">
            <!-- Post composer -->
            <div class="post-composer">
                <div class="composer-header">
                    <div class="user-avatar">D</div>
                    <textarea class="composer-input" placeholder="What's happening in your community?" id="postInput"></textarea>
                </div>
                <div class="composer-actions">
                    <div class="post-type-selector">
                        <button class="post-type-btn active" data-type="general">General</button>
                        <button class="post-type-btn" data-type="product">Product</button>
                        <button class="post-type-btn" data-type="iso">ISO</button>
                        <button class="post-type-btn" data-type="poll">Poll</button>
                        <button class="post-type-btn" data-type="events">Events</button>
                        <button class="post-type-btn" data-type="rentals">Rentals</button>
                        <button class="post-type-btn" data-type="services">Services</button>
                        <button class="post-type-btn" data-type="shop">Shop</button>
                    </div>
                    <button class="post-btn" onclick="createPost()">Post</button>
                </div>
                
                <!-- Poll creation section (hidden by default) -->
                <div class="poll-creator" id="pollCreator" style="display: none; margin-top: 1rem;">
                    <div class="poll-question-input">
                        <input type="text" id="pollQuestion" placeholder="Ask a question..." class="form-input">
                    </div>
                    <div class="poll-options-container">
                        <div class="poll-option-input">
                            <input type="text" placeholder="Option 1" class="poll-option-field">
                            <button class="remove-option-btn" onclick="removePollOption(this)" style="display: none;">✕</button>
                        </div>
                        <div class="poll-option-input">
                            <input type="text" placeholder="Option 2" class="poll-option-field">
                            <button class="remove-option-btn" onclick="removePollOption(this)" style="display: none;">✕</button>
                        </div>
                    </div>
                    <button class="add-poll-option-btn" onclick="addPollOption()">+ Add Option</button>
                </div>
            </div>

            <!-- Feed posts -->
            <div id="feedPosts">
                <!-- Sample posts will be populated here -->
            </div>
        </div>

        <!-- Right sidebar -->
        <aside class="right-sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title">Trending Now</h3>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">#LocalMarket</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">2.3k posts</div>
                </div>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">#RentAnything</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">1.8k posts</div>
                </div>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">#CommunityFirst</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">1.2k posts</div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Featured Shops</h3>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">Sarah's Handmade</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Crafts & Jewelry</div>
                </div>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">Mike's Tech Repair</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Electronics</div>
                </div>
                <div class="trending-item">
                    <div style="font-weight: bold; color: #00ffff;">Local Farmers Market</div>
                    <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Fresh Produce</div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Community Stats</h3>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Active Members:</span>
                        <span style="color: #00ffff; font-weight: bold;">2,847</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Posts Today:</span>
                        <span style="color: #00ffff; font-weight: bold;">156</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Items Sold:</span>
                        <span style="color: #00ffff; font-weight: bold;">3,291</span>
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <script>
        // Initialize particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Sample posts data
        const samplePosts = [
            {
                id: 1,
                type: 'shop',
                category: 'shops',
                author: 'Sarah Johnson',
                time: '2 hours ago',
                content: 'Check out my new handmade jewelry collection! Perfect for the holidays 🎄',
                likes: 24,
                comments: 8,
                shares: 3,
                shopItems: [
                    { name: 'Silver Necklace', price: '$45', emoji: '💍' },
                    { name: 'Earrings Set', price: '$25', emoji: '💎' },
                    { name: 'Bracelet', price: '$35', emoji: '✨' }
                ]
            },
            {
                id: 2,
                type: 'iso',
                category: 'buy-sell',
                author: 'Mike Chen',
                time: '4 hours ago',
                content: 'ISO: Looking for a good condition iPhone 14 Pro. Willing to pay up to $800. Must be unlocked!',
                likes: 12,
                comments: 15,
                shares: 2
            },
            {
                id: 3,
                type: 'poll',
                category: 'general',
                author: 'Community Admin',
                time: '6 hours ago',
                content: 'What new features would you like to see in MarketPace?',
                likes: 45,
                comments: 32,
                shares: 8,
                poll: {
                    question: 'What new features would you like to see in MarketPace?',
                    options: [
                        { text: 'Video calls for negotiations', votes: 45, percentage: 35 },
                        { text: 'Live streaming events', votes: 32, percentage: 25 },
                        { text: 'Advanced search filters', votes: 38, percentage: 30 },
                        { text: 'Mobile app notifications', votes: 13, percentage: 10 }
                    ]
                }
            },
            {
                id: 4,
                type: 'product',
                category: 'rent',
                author: 'David Wilson',
                time: '8 hours ago',
                content: 'Renting out my camping gear for the weekend! Great for families heading to the mountains.',
                likes: 18,
                comments: 6,
                shares: 4,
                price: 25.00,
                image: 'https://via.placeholder.com/500x300/0d0221/00ffff?text=Camping+Gear'
            },
            {
                id: 5,
                type: 'general',
                category: 'services',
                author: 'Lisa Anderson',
                time: '1 day ago',
                content: 'Just finished helping the Johnson family move their piano! Love being part of this community 💪',
                likes: 56,
                comments: 12,
                shares: 7
            },
            {
                id: 6,
                type: 'events',
                category: 'events',
                author: 'Jazz Night Collective',
                time: '1 day ago',
                content: 'THIS SATURDAY: Live Jazz Night at the Community Center! Come support local musicians 🎷',
                likes: 89,
                comments: 23,
                shares: 34,
                image: 'https://via.placeholder.com/500x300/1a0845/9d4edd?text=Jazz+Night'
            },
            {
                id: 7,
                type: 'rentals',
                category: 'rentals',
                author: 'Outdoor Adventures Co',
                time: '3 hours ago',
                content: 'Weekend camping package available for rent! Includes tent, sleeping bags, camping chairs, and portable grill. Perfect for families!',
                likes: 31,
                comments: 12,
                shares: 8,
                price: 85.00,
                image: 'https://via.placeholder.com/500x300/0d0221/00ffff?text=Camping+Package'
            },
            {
                id: 8,
                type: 'services',
                category: 'services',
                author: 'HandyHelper Tom',
                time: '5 hours ago',
                content: 'Available for home repairs this weekend! Specializing in plumbing, electrical work, and general maintenance. Local references available.',
                likes: 18,
                comments: 7,
                shares: 5
            }
        ];

        // Filter functionality
        let currentFilter = 'all';
        let currentSearchTerm = '';

        function initializeFilters() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons in the same group
                    const group = this.closest('.filter-group');
                    group.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update filter and render posts
                    const filterType = this.getAttribute('data-filter');
                    if (filterType === 'all' || filterType === 'nearby') {
                        currentFilter = 'all';
                        document.querySelector('.town-search-container').style.display = 'none';
                    } else if (filterType === 'town-search') {
                        currentFilter = 'all';
                        document.querySelector('.town-search-container').style.display = 'block';
                    } else {
                        currentFilter = filterType;
                        document.querySelector('.town-search-container').style.display = 'none';
                    }
                    renderPosts();
                });
            });

            // Initialize radius slider
            const radiusSlider = document.getElementById('radiusSlider');
            const radiusValue = document.getElementById('radiusValue');
            radiusSlider.addEventListener('input', function() {
                radiusValue.textContent = this.value + ' miles';
                // In a real app, this would filter posts by radius
            });

            // Initialize town search
            document.querySelector('.search-town-btn').addEventListener('click', function() {
                const townName = document.getElementById('townSearch').value;
                if (townName.trim()) {
                    // In a real app, this would filter posts by town
                    console.log('Searching for posts in:', townName);
                    alert(`Searching for posts in ${townName}...`);
                }
            });
        }

        // Post type selector
        function initializePostTypes() {
            document.querySelectorAll('.post-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.post-type-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show/hide poll creator
                    const pollCreator = document.getElementById('pollCreator');
                    if (this.getAttribute('data-type') === 'poll') {
                        pollCreator.style.display = 'block';
                    } else {
                        pollCreator.style.display = 'none';
                    }
                });
            });
        }

        // Search functionality
        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                currentSearchTerm = this.value.toLowerCase();
                renderPosts();
            });
        }

        // Render posts based on current filter and search
        function renderPosts() {
            const feedContainer = document.getElementById('feedPosts');
            let filteredPosts = samplePosts;

            // Apply category filter
            if (currentFilter !== 'all') {
                filteredPosts = filteredPosts.filter(post => 
                    post.category === currentFilter || post.type === currentFilter
                );
            }

            // Apply search filter
            if (currentSearchTerm) {
                filteredPosts = filteredPosts.filter(post => 
                    post.content.toLowerCase().includes(currentSearchTerm) ||
                    post.author.toLowerCase().includes(currentSearchTerm)
                );
            }

            // Render posts
            feedContainer.innerHTML = filteredPosts.map(post => createPostHTML(post)).join('');
        }

        // Create post HTML
        function createPostHTML(post) {
            let postContent = `
                <div class="feed-post" data-category="${post.category}" id="post-${post.id}">
                    <div class="post-header">
                        <div class="user-avatar">${post.author.charAt(0)}</div>
                        <div class="post-meta">
                            <div class="post-author">${post.author}</div>
                            <div class="post-time">${post.time}</div>
                        </div>
                        <div class="post-category">${post.category.replace('-', '/')}</div>
                    </div>
                    <div class="post-content">${post.content}</div>
            `;

            // Add image if present
            if (post.image) {
                postContent += `<img src="${post.image}" alt="Post image" class="post-image">`;
            }

            // Add shop items if present
            if (post.shopItems) {
                postContent += `
                    <div class="shop-showcase">
                        ${post.shopItems.map(item => `
                            <div class="shop-item">
                                <div class="shop-item-image">${item.emoji}</div>
                                <div class="shop-item-name">${item.name}</div>
                                <div class="shop-item-price">${item.price}</div>
                                <div class="item-actions">
                                    <button class="item-action-btn counter-offer" onclick="makeCounterOffer('${item.name}', '${item.price}')">
                                        💰 Counter Offer
                                    </button>
                                    <button class="item-action-btn add-to-cart" onclick="addToCart('${item.name}')">
                                        🛒 Add to Cart
                                    </button>
                                    <button class="item-action-btn deliver-now" onclick="deliverNow('${item.name}')">
                                        🚚 Deliver Now
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            // Add individual post price and actions if it's a direct product post
            if (post.price) {
                postContent += `
                    <div class="post-price">$${post.price.toFixed(2)}</div>
                    <div class="item-actions">
                        <button class="item-action-btn counter-offer" onclick="makeCounterOffer(${post.id}, ${post.price})">
                            💰 Counter Offer
                        </button>
                        <button class="item-action-btn add-to-cart" onclick="addToCart(${post.id})">
                            🛒 Add to Cart
                        </button>
                        <button class="item-action-btn deliver-now" onclick="deliverNow(${post.id})">
                            🚚 Deliver Now
                        </button>
                    </div>
                `;
            }

            // Add poll if present
            if (post.poll) {
                postContent += `
                    <div class="poll-container">
                        <div class="poll-question">${post.poll.question}</div>
                        ${post.poll.options.map(option => `
                            <div class="poll-option">
                                <span>${option.text}</span>
                                <span class="poll-percentage">${option.percentage}%</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            // Add post actions
            postContent += `
                    <div class="post-actions">
                        <button class="action-btn">
                            <span>👍</span>
                            <span>${post.likes}</span>
                        </button>
                        <button class="action-btn">
                            <span>💬</span>
                            <span>${post.comments}</span>
                        </button>
                        <button class="action-btn">
                            <span>📤</span>
                            <span>${post.shares}</span>
                        </button>
                        <button class="action-btn" onclick="shareToFacebook(${post.id}, \`${post.content.replace(/`/g, '\\`')}\`, '${post.author}')">
                            <span>📘</span>
                        </button>
                    </div>
                </div>
            `;

            return postContent;
        }

        // Create new post
        function createPost() {
            const postInput = document.getElementById('postInput');
            const activeType = document.querySelector('.post-type-btn.active').getAttribute('data-type');
            
            if (!postInput.value.trim()) {
                alert('Please enter some content for your post!');
                return;
            }

            // Create new post object
            const newPost = {
                id: Date.now(),
                type: activeType,
                category: activeType === 'general' ? 'general' : activeType,
                author: 'Demo User',
                time: 'Just now',
                content: postInput.value,
                likes: 0,
                comments: 0,
                shares: 0
            };

            // Handle poll creation
            if (activeType === 'poll') {
                const pollQuestion = document.getElementById('pollQuestion').value;
                const pollOptions = Array.from(document.querySelectorAll('.poll-option-field'))
                    .map(input => input.value.trim())
                    .filter(value => value !== '');

                if (!pollQuestion.trim() || pollOptions.length < 2) {
                    alert('Please provide a poll question and at least 2 options!');
                    return;
                }

                newPost.poll = {
                    question: pollQuestion,
                    options: pollOptions.map(option => ({
                        text: option,
                        votes: 0,
                        percentage: 0
                    }))
                };

                // Reset poll creator
                document.getElementById('pollQuestion').value = '';
                document.querySelectorAll('.poll-option-field').forEach(input => input.value = '');
            }

            samplePosts.unshift(newPost);
            postInput.value = '';
            document.getElementById('pollCreator').style.display = 'none';
            document.querySelector('.post-type-btn[data-type="general"]').classList.add('active');
            document.querySelectorAll('.post-type-btn:not([data-type="general"])').forEach(btn => btn.classList.remove('active'));
            renderPosts();
        }

        // Poll creation functions
        function addPollOption() {
            const container = document.querySelector('.poll-options-container');
            const optionCount = container.children.length;
            
            if (optionCount >= 6) {
                alert('Maximum 6 poll options allowed');
                return;
            }

            const newOption = document.createElement('div');
            newOption.className = 'poll-option-input';
            newOption.innerHTML = `
                <input type="text" placeholder="Option ${optionCount + 1}" class="poll-option-field">
                <button class="remove-option-btn" onclick="removePollOption(this)">✕</button>
            `;
            container.appendChild(newOption);

            // Show remove buttons if more than 2 options
            if (optionCount >= 2) {
                document.querySelectorAll('.remove-option-btn').forEach(btn => {
                    btn.style.display = 'block';
                });
            }
        }

        function removePollOption(button) {
            const container = document.querySelector('.poll-options-container');
            const optionDiv = button.parentElement;
            container.removeChild(optionDiv);

            // Hide remove buttons if only 2 options left
            if (container.children.length <= 2) {
                document.querySelectorAll('.remove-option-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }

            // Update placeholders
            Array.from(container.children).forEach((child, index) => {
                const input = child.querySelector('.poll-option-field');
                input.placeholder = `Option ${index + 1}`;
            });
        }

        // Facebook sharing function
        function shareToFacebook(postId, content, author) {
            // Clean content for sharing
            const cleanContent = content.replace(/'/g, "\\'").substring(0, 200);
            const shareUrl = encodeURIComponent(window.location.href + '#post-' + postId);
            const shareText = encodeURIComponent(`Check out this post from ${author} on MarketPace: "${cleanContent}${cleanContent.length >= 200 ? '...' : ''}"`);
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${shareText}`;
            window.open(facebookUrl, '_blank', 'width=600,height=400,scrollbars=yes,resizable=yes');
        }

        // Main Menu Functions
        function toggleMainMenu() {
            const menu = document.getElementById('mainMenu');
            if (menu.style.display === 'none' || menu.style.display === '') {
                menu.style.display = 'flex';
            } else {
                menu.style.display = 'none';
            }
        }

        function navigateToFavorites() {
            alert('Navigating to Favorites page...');
            toggleMainMenu();
        }

        function navigateToForYou() {
            alert('Navigating to For You page...');
            toggleMainMenu();
        }

        function showPrivacyPolicies() {
            alert('Privacy Policies:\n\n• We collect minimal data necessary for platform operation\n• Your personal information is never sold to third parties\n• All data is encrypted and stored securely\n• You can export or delete your data at any time');
            toggleMainMenu();
        }

        function showAccountSettings() {
            alert('Account Settings:\n\n• Update profile information\n• Change password\n• Notification preferences\n• Privacy settings\n• Account deletion');
            toggleMainMenu();
        }

        function showIntegrations() {
            alert('Website Integrations:\n\n• Connect your existing online store\n• Shopify integration\n• Facebook Shop sync\n• TikTok Shop connection\n• Custom website embedding');
            toggleMainMenu();
        }

        function showAnalytics() {
            alert('Profile Analytics:\n\n• Post performance metrics\n• Engagement statistics\n• Shop visit analytics\n• Revenue tracking\n• Community interaction insights');
            toggleMainMenu();
        }

        function upgradeToDual() {
            alert('Upgrade to Dual Profile:\n\n• Add business features\n• Create professional shop\n• Advanced analytics\n• Marketing tools\n• Priority support');
            toggleMainMenu();
        }

        // Profile Functions
        function openProfile() {
            window.location.href = '/profile';
        }

        // Item Action Functions
        function makeCounterOffer(itemId, currentPrice) {
            const counterOffer = prompt(`Current price: $${currentPrice}\n\nEnter your counter offer:`);
            if (counterOffer && !isNaN(counterOffer) && parseFloat(counterOffer) > 0) {
                alert(`Counter offer of $${parseFloat(counterOffer).toFixed(2)} has been sent to the seller!\n\nYou'll receive a notification when they respond.`);
            }
        }

        function addToCart(itemId) {
            // Simulate cart count and delivery calculation
            const cartCount = Math.floor(Math.random() * 3) + 1; // 1-3 items
            const deliveryFee = 3.50;
            const mileage = (Math.random() * 15 + 5).toFixed(1); // 5-20 miles
            const driverPay = (4 + 2 + (parseFloat(mileage) * 0.50)).toFixed(2); // $4 pickup + $2 dropoff + $0.50/mile
            
            alert(`Item added to cart!\n\n⚠️ NO HOLDS - Others can still purchase until you complete checkout!\n\n📦 Cart Items: ${cartCount}\n🚚 Delivery: $${deliveryFee} (${mileage} miles)\n💰 Driver Pay: $${driverPay}\n\n🔥 PURCHASE NOW before someone else gets it!`);
        }

        function deliverNow(itemId) {
            alert(`Deliver Now selected!\n\n• Estimated delivery: 2-4 hours\n• Delivery fee: $3.50\n• Driver will contact you for pickup\n• Track your delivery in real-time`);
        }

        // Demo popup functionality
        function showDemoPopup() {
            document.getElementById('demoPopup').classList.remove('hidden');
        }

        function signUpNow() {
            window.location.href = '/enhanced-signup';
        }

        function continueBrowsing() {
            document.getElementById('demoPopup').classList.add('hidden');
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            initializeFilters();
            initializePostTypes();
            initializeSearch();
            renderPosts();
            
            // Show demo popup after 3 seconds
            setTimeout(showDemoPopup, 3000);
        });
    </script>

    <!-- Floating Profile Icon -->
    <div class="floating-profile" onclick="openProfile()">
        <div class="profile-avatar">D</div>
    </div>

    <!-- Main Menu Overlay -->
    <div class="main-menu" id="mainMenu" style="display: none;">
        <div class="menu-content">
            <div class="menu-header">
                <h3>Main Menu</h3>
                <button class="close-menu-btn" onclick="toggleMainMenu()">✕</button>
            </div>
            <div class="menu-items">
                <button class="menu-item" onclick="navigateToFavorites()">
                    <span>⭐</span> Favorites
                </button>
                <button class="menu-item" onclick="navigateToForYou()">
                    <span>🎯</span> For You Page
                </button>
                <button class="menu-item" onclick="showPrivacyPolicies()">
                    <span>🔒</span> Privacy Policies
                </button>
                <button class="menu-item" onclick="showAccountSettings()">
                    <span>⚙️</span> Account Settings
                </button>
                <button class="menu-item" onclick="showIntegrations()">
                    <span>🔗</span> Website Integrations
                </button>
                <button class="menu-item" onclick="showAnalytics()">
                    <span>📊</span> Profile Analytics
                </button>
                <button class="menu-item" onclick="upgradeToDual()">
                    <span>🏢</span> Upgrade to Dual Profile
                </button>
            </div>
        </div>
    </div>
</body>
</html>